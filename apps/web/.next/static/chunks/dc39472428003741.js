(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,258072,e=>{"use strict";let t;e.s(["View",()=>oA],258072);var i=e.i(681099);e.i(972063);var n=e.i(150629);e.i(520358);var r=e.i(464752),o=e.i(819646),a=e.i(836773),s=e.i(853332),l=e.i(860291);e.i(524062);var p=e.i(514499),u=e.i(207670),c=e.i(912678),f=e.i(519130),d=e.i(154033),m=e.i(942196),g=e.i(940799),y=e.i(75149),h=e.i(535057),b=e.i(594425),S=e.i(23703);let x=p.createContext({}),v=p.createContext(void 0),T=(0,g.styled)(d.default,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[`size${(0,m.default)(i.size)}`]]}})((0,y.default)(({theme:e})=>({...e.typography.button,borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active,[`&.${S.default.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{[`&.${S.default.selected}`]:{color:(e.vars||e).palette.text.primary,backgroundColor:e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.selectedOpacity),"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.text.primary,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.selectedOpacity)}}}}},...Object.entries(e.palette).filter((0,h.default)()).map(([t])=>({props:{color:t},style:{[`&.${S.default.selected}`]:{color:(e.vars||e).palette[t].main,backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.selectedOpacity),"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.selectedOpacity)}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:e.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:e.typography.pxToRem(15)}}]}))),P=p.forwardRef(function(e,t){var n;let{value:r,...o}=p.useContext(x),a=p.useContext(v),s=(0,c.default)({...o,selected:(n=e.value,void 0!==r&&void 0!==n&&(Array.isArray(r)?r.includes(n):n===r))},e),l=(0,b.useDefaultProps)({props:s,name:"MuiToggleButton"}),{children:d,className:g,color:y="standard",disabled:h=!1,disableFocusRipple:P=!1,fullWidth:I=!1,onChange:C,onClick:F,selected:k,size:B="medium",value:w,...A}=l,E={...l,color:y,disabled:h,disableFocusRipple:P,fullWidth:I,size:B},M=(e=>{let{classes:t,fullWidth:i,selected:n,disabled:r,size:o,color:a}=e,s={root:["root",n&&"selected",r&&"disabled",i&&"fullWidth",`size${(0,m.default)(o)}`,a]};return(0,f.default)(s,S.getToggleButtonUtilityClass,t)})(E);return(0,i.jsx)(T,{className:(0,u.default)(o.className,M.root,g,a||""),disabled:h,focusRipple:!P,ref:t,onClick:e=>{F&&(F(e,w),e.defaultPrevented)||C&&C(e,w)},onChange:C,value:w,ownerState:E,"aria-pressed":k,...A,children:d})});var I=e.i(540672),C=e.i(319727);function F(e){return(0,C.default)("MuiToggleButtonGroup",e)}let k=(0,I.default)("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),B=(0,g.styled)("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[{[`& .${k.grouped}`]:t.grouped},{[`& .${k.grouped}`]:t[`grouped${(0,m.default)(i.orientation)}`]},{[`& .${k.firstButton}`]:t.firstButton},{[`& .${k.lastButton}`]:t.lastButton},{[`& .${k.middleButton}`]:t.middleButton},t.root,"vertical"===i.orientation&&t.vertical,i.fullWidth&&t.fullWidth]}})((0,y.default)(({theme:e})=>({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${k.grouped}`]:{[`&.${k.selected} + .${k.grouped}.${k.selected}`]:{borderTop:0,marginTop:0}},[`& .${k.firstButton},& .${k.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${k.lastButton},& .${k.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},[`& .${k.lastButton}.${S.default.disabled},& .${k.middleButton}.${S.default.disabled}`]:{borderTop:"1px solid transparent"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"horizontal"},style:{[`& .${k.grouped}`]:{[`&.${k.selected} + .${k.grouped}.${k.selected}`]:{borderLeft:0,marginLeft:0}},[`& .${k.firstButton},& .${k.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${k.lastButton},& .${k.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},[`& .${k.lastButton}.${S.default.disabled},& .${k.middleButton}.${S.default.disabled}`]:{borderLeft:"1px solid transparent"}}}]}))),w=p.forwardRef(function(e,t){let n=(0,b.useDefaultProps)({props:e,name:"MuiToggleButtonGroup"}),{children:r,className:o,color:a="standard",disabled:s=!1,exclusive:l=!1,fullWidth:c=!1,onChange:d,orientation:g="horizontal",size:y="medium",value:h,...S}=n,T={...n,disabled:s,fullWidth:c,orientation:g,size:y},P=(e=>{let{classes:t,orientation:i,fullWidth:n,disabled:r}=e,o={root:["root",i,n&&"fullWidth"],grouped:["grouped",`grouped${(0,m.default)(i)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return(0,f.default)(o,F,t)})(T),I=p.useCallback((e,t)=>{let i;if(!d)return;let n=h&&h.indexOf(t);h&&n>=0?(i=h.slice()).splice(n,1):i=h?h.concat(t):[t],d(e,i)},[d,h]),C=p.useCallback((e,t)=>{d&&d(e,h===t?null:t)},[d,h]),k=p.useMemo(()=>({className:P.grouped,onChange:l?C:I,value:h,size:y,fullWidth:c,color:a,disabled:s}),[P.grouped,l,C,I,h,y,c,a,s]),w=p.Children.toArray(r).filter(e=>p.isValidElement(e)),A=w.length;return(0,i.jsx)(B,{role:"group",className:(0,u.default)(P.root,o),ref:t,ownerState:T,...S,children:(0,i.jsx)(x.Provider,{value:k,children:w.map((e,t)=>{let n,r;return(0,i.jsx)(v.Provider,{value:(n=0===t,r=t===A-1,n&&r?"":n?P.firstButton:r?P.lastButton:P.middleButton),children:e},t)})})})});var A=e.i(126863),E=e.i(458991),M=e.i(878753),U=e.i(681830),R=e.i(277233),D=e.i(668485),N=e.i(294197);class L{constructor(e){if(function(e){return"object"!=typeof e||void 0===e.length||void 0===e.readUInt8||void 0===e.readUInt16LE||void 0===e.readUInt16BE||void 0===e.readUInt32LE||void 0===e.readUInt32BE||void 0===e.readInt32LE||void 0===e.readInt32BE}(e))throw Error("DataView: Passed buffer type is unsupported.");this.buffer=e,this.byteLength=this.buffer.length}getUint8(e){return this.buffer.readUInt8(e)}getUint16(e,t){return t?this.buffer.readUInt16LE(e):this.buffer.readUInt16BE(e)}getUint32(e,t){return t?this.buffer.readUInt32LE(e):this.buffer.readUInt32BE(e)}getInt32(e,t){return t?this.buffer.readInt32LE(e):this.buffer.readInt32BE(e)}}function O(e,t,i){try{return new DataView(e,t,i)}catch(n){return new L(e,t,i)}}function K(e,t,i){let n=[];for(let r=0;r<i&&t+r<e.byteLength;r++)n.push(e.getUint8(t+r));return z(n)}function G(e,t){let i=[],n=0;for(;t+n<e.byteLength;){let r=e.getUint8(t+n);if(0===r)break;i.push(r),n++}return z(i)}function j(e,t){let i=e.getUint8(t),n=K(e,t+1,i);return[i,n]}function z(e){return e.map(e=>String.fromCharCode(e)).join("")}function V(){for(let e=1;e<arguments.length;e++)for(let t in arguments[e])arguments[0][t]=arguments[e][t];return arguments[0]}function $(e,t,i){let n=!1;Object.defineProperty(e,t,{get:()=>(n||(n=!0,Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:i.apply(e),writable:!0})),e[t]),configurable:!0,enumerable:!0})}function q(e){return"undefined"!=typeof btoa?"string"==typeof e?btoa(e):btoa(Array.prototype.reduce.call(new Uint8Array(e),(e,t)=>e+String.fromCharCode(t),"")):void 0!==N.Buffer?void 0!==N.Buffer.from?N.Buffer.from(e).toString("base64"):new N.Buffer(e).toString("base64"):void 0}function W(e,t){return Array(t+1).join(e)}function _(e,t,i,n="string"){if(0===t&&"function"==typeof DecompressionStream){let t=new DecompressionStream("deflate"),r=new Blob([e]).stream().pipeThrough(t);return"dataview"===n?new Response(r).arrayBuffer().then(e=>new DataView(e)):new Response(r).arrayBuffer().then(e=>new TextDecoder(i).decode(e))}return void 0!==t?Promise.reject(`Unknown compression method ${t}.`):e}function H(e){return e.map(e=>String.fromCharCode(e)).join("")}function X(e){if(e.length>=8){let t=H(e.slice(0,8));if("ASCII\0\0\0"===t)return H(e.slice(8));if("JIS\0\0\0\0\0"===t)return"[JIS encoded text]";if("UNICODE\0"===t)return"[Unicode encoded text]";else if("\0\0\0\0\0\0\0\0"===t)return"[Undefined encoding]"}return"Undefined"}function J(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}let Y=function(e,t){if(18761===e.getUint16(t))return 18761;if(19789===e.getUint16(t))return 19789;throw Error("Illegal byte order value. Faulty image.")},Z=function(e){var t;let i;return!!e&&e.byteLength>=4&&(i=18761===(t=e).getUint16(0),42===t.getUint16(2,i))},Q=function(e){let t,i,n,r,o,a,s,l,p,u=2;for(;u+4+5<=e.byteLength;){var c,f,d,m,g,y;if(c=e,f=u,65472!==c.getUint16(f)){if(d=e,m=u,65474!==d.getUint16(m))if(function(e,t){let i=er.length;return 65504===e.getUint16(t)&&K(e,t+4,i)===er&&0===e.getUint8(t+4+i)}(e,u))t=e.getUint16(u+2),r=u+2;else if(function(e,t){let i=eo.length;return 65505===e.getUint16(t)&&K(e,t+4,i)===eo&&0===e.getUint8(t+4+i)}(e,u))t=e.getUint16(u+2),o=u+10;else if(function(e,t){return 65505===e.getUint16(t)&&K(e,t+4,ea.length)===ea}(e,u))s||(s=[]),t=e.getUint16(u+2),s.push({dataOffset:u+33,length:t-31});else if(function(e,t){return 65505===e.getUint16(t)&&K(e,t+4,es.length)===es}(e,u))s||(s=[]),t=e.getUint16(u+2),s.push({dataOffset:u+79,length:t-77});else if(function(e,t){let i=el.length;return 65517===e.getUint16(t)&&K(e,t+4,i)===el&&0===e.getUint8(t+4+i)}(e,u))t=e.getUint16(u+2),a=u+18;else if(function(e,t){let i=ee.length;return 65506===e.getUint16(t)&&K(e,t+4,i)===ee}(e,u)){t=e.getUint16(u+2);let i=u+18,n=t-16,r=e.getUint8(u+et),o=e.getUint8(u+ei);l||(l=[]),l.push({offset:i,length:n,chunkNumber:r,chunksTotal:o})}else if(function(e,t){let i=en.length;return 65506===e.getUint16(t)&&K(e,t+4,i)===en}(e,u))t=e.getUint16(u+2),p=u+8;else if(function(e,t){let i=e.getUint16(t);return i>=65504&&i<=65519||65534===i||65472===i||65474===i||65476===i||65499===i||65501===i||65498===i}(e,u))t=e.getUint16(u+2);else{if(g=e,y=u,65535===g.getUint16(y)){u++;continue}else break}else t=e.getUint16(u+2),n=u+2}else t=e.getUint16(u+2),i=u+2;u+=2+t}return{hasAppMarkers:u>2,fileDataOffset:i||n,jfifDataOffset:r,tiffHeaderOffset:o,iptcDataOffset:a,xmpChunks:s,iccChunks:l,mpfDataOffset:p}},ee="ICC_PROFILE\0",et=4+ee.length,ei=et+1,en="MPF\0",er="JFIF",eo="Exif",ea="http://ns.adobe.com/xap/1.0/\0",es="http://ns.adobe.com/xmp/extension/\0",el="Photoshop 3.0",ep=function(e,t){let i={hasAppMarkers:!1},n=eu.length;for(;n+4+4<=e.byteLength;){if("IHDR"!==K(e,n+4,4)){var r,o;if(K(r=e,(o=n)+4,4)!==em||K(r,o+ec,ef.length)!==ef)if(function(e,t,i){let n=K(e,t+4,4);return n===ed||n===em||n===eg&&i}(e,n,t)){i.hasAppMarkers=!0;let t=K(e,n+4,4);i.pngTextChunks||(i.pngTextChunks=[]),i.pngTextChunks.push({length:e.getUint32(n+0),type:t,offset:n+ec})}else if("eXIf"===K(e,n+4,4))i.hasAppMarkers=!0,i.tiffHeaderOffset=n+ec;else if(t&&"iCCP"===K(e,n+4,4)){i.hasAppMarkers=!0;let t=e.getUint32(n+0),r=n+ec,{profileName:o,compressionMethod:a,compressedProfileOffset:s}=function(e,t){let i=G(e,t);return t+=i.length+1,{profileName:i,compressionMethod:e.getUint8(t),compressedProfileOffset:t+=1}}(e,r);i.iccChunks||(i.iccChunks=[]),i.iccChunks.push({offset:s,length:t-(s-r),chunkNumber:1,chunksTotal:1,profileName:o,compressionMethod:a})}else[ey,eh].includes(K(e,n+4,4))&&(i.hasAppMarkers=!0,i.pngChunkOffsets||(i.pngChunkOffsets=[]),i.pngChunkOffsets.push(n+0));else{let t=function(e,t){t+=ec+ef.length+1+1;let i=0;for(;i<2&&t<e.byteLength;)0===e.getUint8(t)&&i++,t++;if(!(i<2))return t}(e,n);void 0!==t&&(i.hasAppMarkers=!0,i.xmpChunks=[{dataOffset:t,length:e.getUint32(n+0)-(t-(n+ec))}])}}else i.hasAppMarkers=!0,i.pngHeaderOffset=n+ec;n+=e.getUint32(n+0)+4+4+4}return i},eu="PNG\r\n\x1a\n",ec=8,ef="XML:com.adobe.xmp\0",ed="tEXt",em="iTXt",eg="zTXt",ey="pHYs",eh="tIME";function eb(e,t,i){if(4===i)return e.getUint32(t);if(8===i)return console.warn("This file uses an 8-bit offset which is currently not supported by ExifReader. Contact the maintainer to get it fixed."),e.getUint32(t+4);return 0}function eS(e,t){var i,n,r,o,a,s,l,p,u,c,f,d,m,g,y,h,b,S,x,v,T,P,I,C,F,k,B;let w,A,{length:E,contentOffset:M}=(i=e,n=t,0===(w=i.getUint32(n))?{length:i.byteLength-n,contentOffset:n+4+4}:1===w&&(r=i,o=n,0===r.getUint32(o+8))?{length:i.getUint32(n+12),contentOffset:n+4+4+8}:{length:w,contentOffset:n+4+4});if(E<8)return;let U=e.getUint32(t+4);if(0x66747970===U){return a=e,s=M,l=E,{type:"ftyp",majorBrand:K(a,s,4),length:l}}if(0x69707270===U){return p=e,u=t,{type:"iprp",subBoxes:eT(p,c=M,(f=E)-(c-u)),length:f}}if(0x6970636f===U){return d=e,m=t,{type:"ipco",properties:eT(d,g=M,(y=E)-(g-m)),length:y}}if(0x636f6c72===U){return h=e,b=M,S=E,{type:"colr",icc:function(e,t){let i=K(e,t,4);if("prof"===i||"rICC"===i)return{offset:t+4,length:e.getUint32(t+4),chunkNumber:1,chunksTotal:1}}(h,b),length:S}}let R=e.getUint8(M);return 0x6d657461===U?(x=e,v=t,{type:"meta",subBoxes:eT(x,(T=M+1)+3,(P=E)-(T+3-v)),length:P}):0x696c6f63===U?function(e,t,i,n){var r,o,a,s,l;let p,u,{offsets:c,sizes:f}=(r=t,o=i+3,p={item:{dataReferenceIndex:2,extentCount:2,extent:{}}},r<2?(p.itemCount=2,p.item.itemId=2):2===r&&(p.itemCount=4,p.item.itemId=4),1===r||2===r?p.item.constructionMethod=2:p.item.constructionMethod=0,(u={offsetSize:o,lengthSize:o,baseOffsetSize:o+1,indexSize:o+1}).itemCount=o+2,u.items=u.itemCount+p.itemCount,u.item={itemId:0},u.item.constructionMethod=u.item.itemId+p.item.itemId,u.item.dataReferenceIndex=u.item.constructionMethod+p.item.constructionMethod,{offsets:u,sizes:p}),d=e.getUint8(c.offsetSize)>>4;f.item.extent.extentOffset=d;let m=15&e.getUint8(c.lengthSize);f.item.extent.extentLength=m;let g=e.getUint8(c.baseOffsetSize)>>4;f.item.baseOffset=g;let y=function(e,t,i){if(1===i||2===i)return 15&e.getUint8(t)}(e,c.indexSize,t);f.item.extent.extentIndex=void 0!==y?y:0;let h=(a=e,s=c.itemCount,(l=t)<2?a.getUint16(s):2===l?a.getUint32(s):void 0);return{type:"iloc",items:function(e,t,i,n,r,o,a,s){if(void 0===s)return[];let l=[],p=i.items;for(let i=0;i<s;i++){var u,c,f;let i={extents:[]};u=e,c=p,i.itemId=(f=t)<2?u.getUint16(c):2===f?u.getUint32(c):void 0,p+=n.item.itemId,i.constructionMethod=1===t||2===t?15&e.getUint16(p):void 0,p+=n.item.constructionMethod,i.dataReferenceIndex=e.getUint16(p),i.baseOffset=eb(e,p+=n.item.dataReferenceIndex,n.item.baseOffset),p+=n.item.baseOffset,i.extentCount=e.getUint16(p),p+=n.item.extentCount;for(let s=0;s<i.extentCount;s++){let s={};s.extentIndex=function(e,t,i,n){if((1===t||2===t)&&n>0)return eb(e,i,n)}(e,t,p,a),s.extentOffset=eb(e,p+=n.item.extent.extentIndex,r),s.extentLength=eb(e,p+=n.item.extent.extentOffset,o),p+=n.item.extent.extentLength,i.extents.push(s)}l.push(i)}return l}(e,t,c,f,d,m,y,h),length:n}}(e,R,M+1,E):0x69696e66===U?function(e,t,i,n,r){var o;let a,s,{offsets:l}=(o=i,a={entryCount:n+3},s={},0===o?s.entryCount=2:s.entryCount=4,a.itemInfos=a.entryCount+s.entryCount,{offsets:a});return{type:"iinf",itemInfos:eT(e,l.itemInfos,r-(l.itemInfos-t)),length:r}}(e,t,R,M+1,E):0x696e6665===U?(I=e,C=t,F=R,k=M+1,k+=3,A={type:"infe",length:B=E},(0===F||1===F)&&(A.itemId=I.getUint16(k),k+=2,A.itemProtectionIndex=I.getUint16(k),A.itemName=G(I,k+=2),k+=A.itemName.length+1),F>=2&&(2===F?(A.itemId=I.getUint16(k),k+=2):3===F&&(A.itemId=I.getUint32(k),k+=4),A.itemProtectionIndex=I.getUint16(k),k+=2,A.itemType=I.getUint32(k),A.itemName=G(I,k+=4),k+=A.itemName.length+1,0x6d696d65===A.itemType?(A.contentType=G(I,k),C+B>(k+=A.contentType.length+1)&&(A.contentEncoding=G(I,k),k+=A.contentEncoding.length+1)):0x75726920===A.itemType&&(A.itemUri=G(I,k),k+=A.itemUri.length+1)),A):{type:void 0,length:E}}function ex(e){1;{let t={},i=function(e){let t=0;for(;t+4+4<=e.byteLength;){let i=eS(e,t);if(void 0===i)break;if("meta"===i.type)return i;t+=i.length}}(e);return i?(t.tiffHeaderOffset=function(e,t){try{var i,n;let r=t.subBoxes.find(e=>"iinf"===e.type).itemInfos.find(e=>0x45786966===e.itemType).itemId,o=ev(t,r),a=o.baseOffset+o.extents[0].extentOffset;return i=e,(n=a)+4+i.getUint32(n)}catch(e){return}}(e,i),t.xmpChunks=function(e){try{let t=e.subBoxes.find(e=>"iinf"===e.type).itemInfos.find(e=>0x6d696d65===e.itemType&&"application/rdf+xml"===e.contentType).itemId,i=ev(e,t),n=ev(e,t).extents[0];return[{dataOffset:i.baseOffset+n.extentOffset,length:n.extentLength}]}catch(e){return}}(i),t.iccChunks=function(e){try{let t=e.subBoxes.find(e=>"iprp"===e.type).subBoxes.find(e=>"ipco"===e.type).properties.find(e=>"colr"===e.type).icc;if(t)return[t]}catch(e){}}(i),t.hasAppMarkers=void 0!==t.tiffHeaderOffset||void 0!==t.xmpChunks||void 0!==t.iccChunks,t):{hasAppMarkers:!1}}}function ev(e,t){return e.subBoxes.find(e=>"iloc"===e.type).items.find(e=>e.itemId===t)}function eT(e,t,i){let n=[0x45786966,0x6d696d65],r=[],o=t;for(;o<t+i;){let t=eS(e,o);if(void 0===t)break;void 0!==t.type&&(void 0===t.itemType||-1!==n.indexOf(t.itemType))&&r.push(t),o+=t.length}return r}let eP=function(e){if(!e)return!1;try{let t=eS(e,0);return t&&-1!==["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"].indexOf(t.majorBrand)}catch(e){return!1}},eI=function(e){if(!e)return!1;try{let t=eS(e,0);return t&&"avif"===t.majorBrand}catch(e){return!1}},eC=function(e){let t="RIFF",i="WEBP";return!!e&&K(e,0,t.length)===t&&K(e,8,i.length)===i},eF=function(e){let t,i,n,r,o="Exif\0\0",a=12,s=!1;for(;a+8<e.byteLength;){let l=K(e,a,4),p=e.getUint32(a+4,!0);"EXIF"===l?(s=!0,t=K(e,a+8,o.length)===o?a+8+o.length:a+8):"XMP "===l?(s=!0,i=[{dataOffset:a+8,length:p}]):"ICCP"===l?(s=!0,n=[{offset:a+8,length:p,chunkNumber:1,chunksTotal:1}]):"VP8X"===l&&(s=!0,r=a+8),a+=8+(p%2==0?p:p+1)}return{hasAppMarkers:s,tiffHeaderOffset:t,xmpChunks:i,iccChunks:n,vp8xChunkOffset:r}},ek=["GIF87a","GIF89a"],eB=function(e){let t=[];return t.push({dataOffset:0,length:e.byteLength}),{xmpChunks:t}},ew="<?xpacket begin",eA=function(e,t){var i,n,r,o;if(Z(e))return eE({hasAppMarkers:!0,tiffHeaderOffset:0},"tiff","TIFF");if((i=e)&&i.byteLength>=2&&65496===i.getUint16(0))return eE(Q(e),"jpeg","JPEG");if((n=e)&&K(n,0,eu.length)===eu)return eE(ep(e,t),"png","PNG");if(eP(e))return eE(ex(e),"heic","HEIC");if(eI(e))return eE(ex(e),"avif","AVIF");if(eC(e))return eE(eF(e),"webp","WebP");if((r=e)&&ek.includes(K(r,0,6)))return eE({gifHeaderOffset:0},"gif","GIF");if((o=e)&&K(o,0,ew.length)===ew)return eE(eB(e),"xml","XML");throw Error("Invalid image format")};function eE(e,t,i){return V({},e,{fileType:{value:t,description:i}})}let eM={ApertureValue:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2),ColorSpace:e=>1===e?"sRGB":65535===e?"Uncalibrated":"Unknown",ComponentsConfiguration:e=>e.map(e=>{if(49===e)return"Y";if(50===e)return"Cb";if(51===e)return"Cr";if(52===e)return"R";if(53===e)return"G";else if(54===e)return"B"}).join(""),Contrast:e=>0===e?"Normal":1===e?"Soft":2===e?"Hard":"Unknown",CustomRendered:e=>0===e?"Normal process":1===e?"Custom process":"Unknown",ExposureMode:e=>0===e?"Auto exposure":1===e?"Manual exposure":2===e?"Auto bracket":"Unknown",ExposureProgram(e){if(0===e)return"Undefined";if(1===e)return"Manual";if(2===e)return"Normal program";if(3===e)return"Aperture priority";if(4===e)return"Shutter priority";else if(5===e)return"Creative program";else if(6===e)return"Action program";else if(7===e)return"Portrait mode";else if(8===e)return"Landscape mode";else if(9===e)return"Bulb";return"Unknown"},ExposureTime(e){if(e[0]/e[1]>.25){let t=e[0]/e[1];return Number.isInteger(t)?""+t:t.toFixed(1)}return 0!==e[0]?`1/${Math.round(e[1]/e[0])}`:`0/${e[1]}`},FNumber:e=>`f/${Number(e[0]/e[1]).toFixed(1)}`,FocalLength:e=>e[0]/e[1]+" mm",FocalPlaneResolutionUnit:e=>2===e?"inches":3===e?"centimeters":4===e?"millimeters":"Unknown",LightSource:e=>{if(1===e)return"Daylight";if(2===e)return"Fluorescent";if(3===e)return"Tungsten (incandescent light)";if(4===e)return"Flash";if(9===e)return"Fine weather";else if(10===e)return"Cloudy weather";else if(11===e)return"Shade";else if(12===e)return"Daylight fluorescent (D 5700 – 7100K)";else if(13===e)return"Day white fluorescent (N 4600 – 5400K)";else if(14===e)return"Cool white fluorescent (W 3900 – 4500K)";else if(15===e)return"White fluorescent (WW 3200 – 3700K)";else if(17===e)return"Standard light A";else if(18===e)return"Standard light B";else if(19===e)return"Standard light C";else if(20===e)return"D55";else if(21===e)return"D65";else if(22===e)return"D75";else if(23===e)return"D50";else if(24===e)return"ISO studio tungsten";else if(255===e)return"Other light source";return"Unknown"},MeteringMode(e){if(1===e)return"Average";if(2===e)return"CenterWeightedAverage";if(3===e)return"Spot";if(4===e)return"MultiSpot";if(5===e)return"Pattern";else if(6===e)return"Partial";else if(255===e)return"Other";return"Unknown"},ResolutionUnit:e=>2===e?"inches":3===e?"centimeters":"Unknown",Saturation:e=>0===e?"Normal":1===e?"Low saturation":2===e?"High saturation":"Unknown",FocalLengthIn35mmFilm:e=>0===e?"Unknown":e+" mm",SceneCaptureType:e=>0===e?"Standard":1===e?"Landscape":2===e?"Portrait":3===e?"Night scene":"Unknown",Sharpness:e=>0===e?"Normal":1===e?"Soft":2===e?"Hard":"Unknown",ShutterSpeedValue(e){let t=Math.pow(2,e[0]/e[1]);return t<=1?`${Math.round(1/t)}`:`1/${Math.round(t)}`},WhiteBalance:e=>0===e?"Auto white balance":1===e?"Manual white balance":"Unknown",XResolution:e=>""+Math.round(e[0]/e[1]),YResolution:e=>""+Math.round(e[0]/e[1])},eU={11:"ProcessingSoftware",254:{name:"SubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",0xffffffff:"Invalid"})[e]||"Unknown"},255:{name:"OldSubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"})[e]||"Unknown"},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:e=>({1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"})[e]||"Unknown"},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:e=>({1:"Normal",2:"Reversed"})[e]||"Unknown"},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:e=>1===e?"top-left":2===e?"top-right":3===e?"bottom-right":4===e?"bottom-left":5===e?"left-top":6===e?"right-top":7===e?"right-bottom":8===e?"left-bottom":"Undefined"},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:eM.XResolution},283:{name:"YResolution",description:eM.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:e=>""+Math.round(e[0]/e[1])},287:{name:"YPosition",description:e=>""+Math.round(e[0]/e[1])},290:{name:"GrayResponseUnit",description:e=>({1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"})[e]||"Unknown"},296:{name:"ResolutionUnit",description:eM.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:e=>e.map(e=>`${e[0]}/${e[1]}`).join(", ")},319:{name:"PrimaryChromaticities",description:e=>e.map(e=>`${e[0]}/${e[1]}`).join(", ")},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:e=>({1:"CMYK",2:"Not CMYK"})[e]||"Unknown"},337:"TargetPrinter",338:{name:"ExtraSamples",description:e=>({0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"})[e]||"Unknown"},339:{name:"SampleFormat",description:e=>{let t={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map(e=>t[e]||"Unknown").join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:e=>e.map(e=>""+e[0]/e[1]).join("/")},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:e=>1===e?"centered":2===e?"co-sited":"undefined "+e},532:{name:"ReferenceBlackWhite",description:e=>e.map(e=>""+e[0]/e[1]).join(", ")},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:e=>e.join("; ")},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:{name:"XPTitle",description:eR},40092:{name:"XPComment",description:eR},40093:{name:"XPAuthor",description:eR},40094:{name:"XPKeywords",description:eR},40095:{name:"XPSubject",description:eR},42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:e=>({0:"Unsafe",1:"Safe"})[e]||"Unknown"},50778:{name:"CalibrationIlluminant1",description:eM.LightSource},50779:{name:"CalibrationIlluminant2",description:eM.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:e=>({0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"})[e]||"Unknown"},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:e=>({1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"})[e]||"Unknown"},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51108:{name:"ProfileLookTableEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:e=>({0:"Auto",1:"None"})[e]||"Unknown"},51111:"NewRawImageDigest",51112:"RawToPreviewGain"};function eR(e){return new TextDecoder("utf-16").decode(new Uint8Array(e)).replace(/\u0000+$/,"")}let eD=V({},eU,{33434:{name:"ExposureTime",description:eM.ExposureTime},33437:{name:"FNumber",description:eM.FNumber},34850:{name:"ExposureProgram",description:eM.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:()=>"[Raw OECF table data]"},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:e=>({1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"})[e]||"Unknown"},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:e=>H(e)},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:eM.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:eM.ShutterSpeedValue},37378:{name:"ApertureValue",description:eM.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},37382:{name:"SubjectDistance",description:e=>e[0]/e[1]+" m"},37383:{name:"MeteringMode",description:eM.MeteringMode},37384:{name:"LightSource",description:eM.LightSource},37385:{name:"Flash",description:e=>{if(0===e)return"Flash did not fire";if(1===e)return"Flash fired";if(5===e)return"Strobe return light not detected";if(7===e)return"Strobe return light detected";if(9===e)return"Flash fired, compulsory flash mode";else if(13===e)return"Flash fired, compulsory flash mode, return light not detected";else if(15===e)return"Flash fired, compulsory flash mode, return light detected";else if(16===e)return"Flash did not fire, compulsory flash mode";else if(24===e)return"Flash did not fire, auto mode";else if(25===e)return"Flash fired, auto mode";else if(29===e)return"Flash fired, auto mode, return light not detected";else if(31===e)return"Flash fired, auto mode, return light detected";else if(32===e)return"No flash function";else if(65===e)return"Flash fired, red-eye reduction mode";else if(69===e)return"Flash fired, red-eye reduction mode, return light not detected";else if(71===e)return"Flash fired, red-eye reduction mode, return light detected";else if(73===e)return"Flash fired, compulsory flash mode, red-eye reduction mode";else if(77===e)return"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected";else if(79===e)return"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected";else if(89===e)return"Flash fired, auto mode, red-eye reduction mode";else if(93===e)return"Flash fired, auto mode, return light not detected, red-eye reduction mode";else if(95===e)return"Flash fired, auto mode, return light detected, red-eye reduction mode";return"Unknown"}},37386:{name:"FocalLength",description:eM.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:e=>({C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"})[e]||"Unknown"},37395:"ImageHistory",37396:{name:"SubjectArea",description:e=>2===e.length?`Location; X: ${e[0]}, Y: ${e[1]}`:3===e.length?`Circle; X: ${e[0]}, Y: ${e[1]}, diameter: ${e[2]}`:4===e.length?`Rectangle; X: ${e[0]}, Y: ${e[1]}, width: ${e[2]}, height: ${e[3]}`:"Unknown"},37500:{name:"MakerNote",description:()=>"[Raw maker note data]"},37510:{name:"UserComment",description:X},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37724:"ImageSourceData",37888:{name:"AmbientTemperature",description:e=>e[0]/e[1]+" °C"},37889:{name:"Humidity",description:e=>e[0]/e[1]+" %"},37890:{name:"Pressure",description:e=>e[0]/e[1]+" hPa"},37891:{name:"WaterDepth",description:e=>e[0]/e[1]+" m"},37892:{name:"Acceleration",description:e=>e[0]/e[1]+" mGal"},37893:{name:"CameraElevationAngle",description:e=>e[0]/e[1]+" °"},40960:{name:"FlashpixVersion",description:e=>e.map(e=>String.fromCharCode(e)).join("")},40961:{name:"ColorSpace",description:eM.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:()=>"[Raw SFR table data]"},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:eM.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:([e,t])=>`X: ${e}, Y: ${t}`},41493:"ExposureIndex",41495:{name:"SensingMethod",description:e=>{if(1===e)return"Undefined";if(2===e)return"One-chip color area sensor";if(3===e)return"Two-chip color area sensor";if(4===e)return"Three-chip color area sensor";if(5===e)return"Color sequential area sensor";else if(7===e)return"Trilinear sensor";else if(8===e)return"Color sequential linear sensor";return"Unknown"}},41728:{name:"FileSource",description:e=>3===e?"DSC":"Unknown"},41729:{name:"SceneType",description:e=>1===e?"A directly photographed image":"Unknown"},41730:{name:"CFAPattern",description:()=>"[Raw CFA pattern table data]"},41985:{name:"CustomRendered",description:eM.CustomRendered},41986:{name:"ExposureMode",description:eM.ExposureMode},41987:{name:"WhiteBalance",description:eM.WhiteBalance},41988:{name:"DigitalZoomRatio",description:e=>0===e[0]?"Digital zoom was not used":""+e[0]/e[1]},41989:{name:"FocalLengthIn35mmFilm",description:eM.FocalLengthIn35mmFilm},41990:{name:"SceneCaptureType",description:eM.SceneCaptureType},41991:{name:"GainControl",description:e=>{if(0===e)return"None";if(1===e)return"Low gain up";if(2===e)return"High gain up";if(3===e)return"Low gain down";if(4===e)return"High gain down";return"Unknown"}},41992:{name:"Contrast",description:eM.Contrast},41993:{name:"Saturation",description:eM.Saturation},41994:{name:"Sharpness",description:eM.Sharpness},41995:{name:"DeviceSettingDescription",description:()=>"[Raw device settings table data]"},41996:{name:"SubjectDistanceRange",description:e=>1===e?"Macro":2===e?"Close view":3===e?"Distant view":"Unknown"},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:e=>{let t=parseFloat((e[0][0]/e[0][1]).toFixed(5)),i=parseFloat((e[1][0]/e[1][1]).toFixed(5)),n=`${t}-${i} mm`;if(0===e[3][1])return`${n} f/?`;let r=1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1]));return`${n} f/${parseFloat(r.toFixed(5))}`}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:e=>({1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"})[e]||"Unknown"},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"}),eN="exif",eL="interoperability",eO="canon",eK="pentax",eG={"0th":eD,"1st":eU,[eN]:eD,gps:{0:{name:"GPSVersionID",description:e=>2===e[0]&&2===e[1]&&0===e[2]&&0===e[3]?"Version 2.2":"Unknown"},1:{name:"GPSLatitudeRef",description:e=>{let t=e.join("");return"N"===t?"North latitude":"S"===t?"South latitude":"Unknown"}},2:{name:"GPSLatitude",description:J},3:{name:"GPSLongitudeRef",description:e=>{let t=e.join("");return"E"===t?"East longitude":"W"===t?"West longitude":"Unknown"}},4:{name:"GPSLongitude",description:J},5:{name:"GPSAltitudeRef",description:e=>0===e?"Sea level":1===e?"Sea level reference (negative value)":"Unknown"},6:{name:"GPSAltitude",description:e=>e[0]/e[1]+" m"},7:{name:"GPSTimeStamp",description:e=>e.map(([e,t])=>{let i=e/t;return/^\d(\.|$)/.test(`${i}`)?`0${i}`:i}).join(":")},8:"GPSSatellites",9:{name:"GPSStatus",description:e=>{let t=e.join("");return"A"===t?"Measurement in progress":"V"===t?"Measurement Interoperability":"Unknown"}},10:{name:"GPSMeasureMode",description:e=>{let t=e.join("");return"2"===t?"2-dimensional measurement":"3"===t?"3-dimensional measurement":"Unknown"}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:e=>{let t=e.join("");return"K"===t?"Kilometers per hour":"M"===t?"Miles per hour":"N"===t?"Knots":"Unknown"}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:e=>{let t=e.join("");return"T"===t?"True direction":"M"===t?"Magnetic direction":"Unknown"}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:e=>{let t=e.join("");return"T"===t?"True direction":"M"===t?"Magnetic direction":"Unknown"}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:e=>{let t=e.join("");return"N"===t?"North latitude":"S"===t?"South latitude":"Unknown"}},20:{name:"GPSDestLatitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},21:{name:"GPSDestLongitudeRef",description:e=>{let t=e.join("");return"E"===t?"East longitude":"W"===t?"West longitude":"Unknown"}},22:{name:"GPSDestLongitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},23:{name:"GPSDestBearingRef",description:e=>{let t=e.join("");return"T"===t?"True direction":"M"===t?"Magnetic direction":"Unknown"}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:e=>{let t=e.join("");return"K"===t?"Kilometers":"M"===t?"Miles":"N"===t?"Knots":"Unknown"}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:X},28:{name:"GPSAreaInformation",description:X},29:"GPSDateStamp",30:{name:"GPSDifferential",description:e=>0===e?"Measurement without differential correction":1===e?"Differential correction applied":"Unknown"},31:"GPSHPositioningError"},[eL]:{1:"InteroperabilityIndex",2:{name:"InteroperabilityVersion",description:e=>H(e)},4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight"},mpf:{45056:{name:"MPFVersion",description:e=>H(e)},45057:"NumberOfImages",45058:"MPEntry",45059:"ImageUIDList",45060:"TotalFrames"},[eO]:{4:{name:"ShotInfo",description:e=>e}},[eK]:{0:{name:"PentaxVersion",description:e=>e.join(".")},5:"PentaxModelID",555:"LevelInfo"}},ej={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},ez={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},eV=e_,e$=function(e,t,i){return e.getUint16(t,18761===i)},eq=eH,eW=function(e){if(void 0===ez[e])throw Error("No such type found.");return ej[ez[e]]};function e_(e,t){return e.getUint8(t)}function eH(e,t,i){return e.getUint32(t,18761===i)}function eX(e,t,i){return e.getInt32(t,18761===i)}let eJ={1:eV,2:function(e,t){return e.getUint8(t)},3:e$,4:eq,5:function(e,t,i){return[eH(e,t,i),eH(e,t+4,i)]},7:function(e,t){return e_(e,t)},9:eX,10:function(e,t,i){return[eX(e,t,i),eX(e,t+4,i)]},13:function(e,t,i){return eH(e,t,i)}};function eY(e,t,i,n,r,o){var a,s,l;let p=eW("SHORT"),u={},c=(a=e,s=n,l=r,s+eW("SHORT")<=a.byteLength?e$(a,s,l):0);n+=p;for(let a=0;a<c&&!(n+12>e.byteLength);a++){let a=function(e,t,i,n,r,o){var a,s,l,p,u,c,f;let d,m,g=eW("SHORT"),y=g+eW("SHORT"),h=y+eW("LONG"),b=e$(e,n,r),S=e$(e,n+g,r),x=eq(e,n+y,r);if(void 0===ej[S]||!o&&void 0===eG[t][b])return;(a=S,s=x,ej[a]*s<=eW("LONG"))?d=eZ(e,m=n+h,S,x,r):(m=eq(e,n+h,r),l=e,p=i,u=m,c=S,f=x,d=p+u+ej[c]*f<=l.byteLength?eZ(e,i+m,S,x,r,33723===b):"<faulty value>"),S===ez.ASCII&&(d=function(e){try{return e.map(e=>decodeURIComponent(escape(e)))}catch(t){return e}}(d=function(e){let t=[],i=0;for(let n=0;n<e.length;n++){if("\0"===e[n]){i++;continue}void 0===t[i]&&(t[i]=""),t[i]+=e[n]}return t}(d)));let v=`undefined-${b}`,T=d;if(void 0!==eG[t][b])if(void 0!==eG[t][b].name&&void 0!==eG[t][b].description){v=eG[t][b].name;try{T=eG[t][b].description(d)}catch(e){T=eQ(d)}}else S===ez.RATIONAL||S===ez.SRATIONAL?(v=eG[t][b],T=""+d[0]/d[1]):(v=eG[t][b],T=eQ(d));return{id:b,name:v,value:d,description:T,__offset:m}}(e,t,i,n,r,o);void 0!==a&&(u[a.name]={id:a.id,value:a.value,description:a.description},("MakerNote"===a.name||t===eK&&"LevelInfo"===a.name)&&(u[a.name].__offset=a.__offset)),n+=12}if(n<e.byteLength-eW("LONG")){let a=eq(e,n,r);0!==a&&"0th"===t&&(u.Thumbnail=eY(e,"1st",i,i+a,r,o))}return u}function eZ(e,t,i,n,r,o=!1){let a=[];o&&(n*=ej[i],i=ez.BYTE);for(let o=0;o<n;o++)a.push(eJ[i](e,t,r)),t+=ej[i];return i===ez.ASCII?a=a.map(e=>String.fromCharCode(e)):1===a.length&&(a=a[0]),a}function eQ(e){return e instanceof Array?e.join(", "):e}let e0="Exif IFD Pointer",e1="GPS Info IFD Pointer",e2="Interoperability IFD Pointer",e4=function(e,t,i){var n,r,o,a,s,l,p,u,c,f,d,m,g,y,h;let b=Y(e,t),S=function(e,t,i,n){return eY(e,"0th",t,t+eq(e,t+4,i),i,n)}(e,t,b,i);return{tags:(d=(l=(n=S,r=e,o=t,a=b,s=i,S=void 0!==n[e0]?V(n,eY(r,eN,o,o+n[e0].value,a,s)):n),p=e,u=t,c=b,f=i,S=void 0!==l[e1]?V(l,eY(p,"gps",u,u+l[e1].value,c,f)):l),m=e,g=t,y=b,h=i,S=void 0!==d[e2]?V(d,eY(m,eL,g,g+d[e2].value,y,h)):d),byteOrder:b}},e3=function(e,t,i){let n=Y(e,t),r=eY(e,"mpf",t,t+eq(e,t+4,n),n,i);return function(e,t,i,n){if(!i.MPEntry)return i;let r=[];for(let o=0;o<Math.ceil(i.MPEntry.value.length/16);o++){r[o]={};let a=e5(i.MPEntry.value,16*o,eW("LONG"),n);r[o].ImageFlags=function(e){let t=[e>>31&1,e>>30&1,e>>29&1],i=[];return t[0]&&i.push("Dependent Parent Image"),t[1]&&i.push("Dependent Child Image"),t[2]&&i.push("Representative Image"),{value:t,description:i.join(", ")||"None"}}(a),r[o].ImageFormat=function(e){let t=e>>24&7;return{value:t,description:0===t?"JPEG":"Unknown"}}(a),r[o].ImageType=function(e){let t=0xffffff&e;return{value:t,description:({196608:"Baseline MP Primary Image",65537:"Large Thumbnail (VGA equivalent)",65538:"Large Thumbnail (Full HD equivalent)",131073:"Multi-Frame Image (Panorama)",131074:"Multi-Frame Image (Disparity)",131075:"Multi-Frame Image (Multi-Angle)",0:"Undefined"})[t]||"Unknown"}}(a);let s=e5(i.MPEntry.value,16*o+4,eW("LONG"),n);r[o].ImageSize={value:s,description:""+s};let l=function(e,t,i,n){return 0===e?0:e5(t.value,16*e+8,eW("LONG"),i)+n}(o,i.MPEntry,n,t);r[o].ImageOffset={value:l,description:""+l};let p=e5(i.MPEntry.value,16*o+12,eW("SHORT"),n);r[o].DependentImage1EntryNumber={value:p,description:""+p};let u=e5(i.MPEntry.value,16*o+14,eW("SHORT"),n);r[o].DependentImage2EntryNumber={value:u,description:""+u},r[o].image=e.buffer.slice(l,l+s),$(r[o],"base64",function(){return q(this.image)})}return i.Images=r,i}(e,t,r,n)};function e5(e,t,i,n){if(18761===n){let n=0;for(let r=0;r<i;r++)n+=e[t+r]<<8*r;return n}let r=0;for(let n=0;n<i;n++)r+=e[t+n]<<8*(i-1-n);return r}let e6=function(e,t){let i=e$(e,t),n=function(e,t,i){if(8>i)return;let n=eV(e,t+7);return{value:n,description:""+n}}(e,t,i);return{"Bits Per Sample":function(e,t,i){if(3>i)return;let n=eV(e,t+2);return{value:n,description:""+n}}(e,t,i),"Image Height":function(e,t,i){if(5>i)return;let n=e$(e,t+3);return{value:n,description:`${n}px`}}(e,t,i),"Image Width":function(e,t,i){if(7>i)return;let n=e$(e,t+5);return{value:n,description:`${n}px`}}(e,t,i),"Color Components":n,Subsampling:n&&function(e,t,i,n){var r;let o,a;if(8+3*i>n)return;let s=[];for(let n=0;n<i;n++){let i=t+8+3*n;s.push([eV(e,i),eV(e,i+1),eV(e,i+2)])}return{value:s,description:s.length>1?(o={1:"Y",2:"Cb",3:"Cr",4:"I",5:"Q"},s.map(e=>o[e[0]]).join("")+(a={17:"4:4:4 (1 1)",18:"4:4:0 (1 2)",20:"4:4:1 (1 4)",33:"4:2:2 (2 1)",34:"4:2:0 (2 2)",36:"4:2:1 (2 4)",65:"4:1:1 (4 1)",66:"4:1:0 (4 2)"},0===(r=s).length||void 0===r[0][1]||void 0===a[r[0][1]]?"":a[r[0][1]])):""}}(e,t,n.value,i)}},e8=function(e,t){let i=e$(e,t),n=function(e,t,i){if(15>i)return;let n=eV(e,t+14);return{value:n,description:`${n}px`}}(e,t,i),r=function(e,t,i){if(16>i)return;let n=eV(e,t+15);return{value:n,description:`${n}px`}}(e,t,i),o={"JFIF Version":function(e,t,i){if(9>i)return;let n=eV(e,t+7),r=eV(e,t+7+1);return{value:256*n+r,description:n+"."+r}}(e,t,i),"Resolution Unit":function(e,t,i){var n;if(10>i)return;let r=eV(e,t+9);return{value:r,description:0===(n=r)?"None":1===n?"inches":2===n?"cm":"Unknown"}}(e,t,i),XResolution:function(e,t,i){if(12>i)return;let n=e$(e,t+10);return{value:n,description:""+n}}(e,t,i),YResolution:function(e,t,i){if(14>i)return;let n=e$(e,t+12);return{value:n,description:""+n}}(e,t,i),"JFIF Thumbnail Width":n,"JFIF Thumbnail Height":r};if(void 0!==n&&void 0!==r){let a=function(e,t,i,n){if(0!==i&&!(16+i>n))return{value:e.buffer.slice(t+16,t+16+i),description:"<24-bit RGB pixel data>"}}(e,t,3*n.value*r.value,i);a&&(o["JFIF Thumbnail"]=a)}for(let e in o)void 0===o[e]&&delete o[e];return o},e7={256:{name:"Model Version",description:e=>((e[0]<<8)+e[1]).toString()},261:{name:"Destination",repeatable:!0},276:{name:"File Format",description:e=>((e[0]<<8)+e[1]).toString()},278:{name:"File Format Version",description:e=>((e[0]<<8)+e[1]).toString()},286:"Service Identifier",296:"Envelope Number",306:"Product ID",316:"Envelope Priority",326:{name:"Date Sent",description:e9},336:{name:"Time Sent",description:te},346:{name:"Coded Character Set",description:tt,encoding_name:tt},356:"UNO",376:{name:"ARM Identifier",description:e=>((e[0]<<8)+e[1]).toString()},378:{name:"ARM Version",description:e=>((e[0]<<8)+e[1]).toString()},512:{name:"Record Version",description:e=>((e[0]<<8)+e[1]).toString()},515:"Object Type Reference",516:"Object Attribute Reference",517:"Object Name",519:"Edit Status",520:{name:"Editorial Update",description:e=>"01"===H(e)?"Additional Language":"Unknown"},522:"Urgency",524:{name:"Subject Reference",repeatable:!0,description:e=>{let t=H(e).split(":");return t[2]+(t[3]?"/"+t[3]:"")+(t[4]?"/"+t[4]:"")}},527:"Category",532:{name:"Supplemental Category",repeatable:!0},534:"Fixture Identifier",537:{name:"Keywords",repeatable:!0},538:{name:"Content Location Code",repeatable:!0},539:{name:"Content Location Name",repeatable:!0},542:"Release Date",547:"Release Time",549:"Expiration Date",550:"Expiration Time",552:"Special Instructions",554:{name:"Action Advised",description:e=>{let t=H(e);return"01"===t?"Object Kill":"02"===t?"Object Replace":"03"===t?"Object Append":"04"===t?"Object Reference":"Unknown"}},557:{name:"Reference Service",repeatable:!0},559:{name:"Reference Date",repeatable:!0},562:{name:"Reference Number",repeatable:!0},567:{name:"Date Created",description:e9},572:{name:"Time Created",description:te},574:{name:"Digital Creation Date",description:e9},575:{name:"Digital Creation Time",description:te},577:"Originating Program",582:"Program Version",587:{name:"Object Cycle",description:e=>{let t=H(e);return"a"===t?"morning":"p"===t?"evening":"b"===t?"both":"Unknown"}},592:{name:"By-line",repeatable:!0},597:{name:"By-line Title",repeatable:!0},602:"City",604:"Sub-location",607:"Province/State",612:"Country/Primary Location Code",613:"Country/Primary Location Name",615:"Original Transmission Reference",617:"Headline",622:"Credit",627:"Source",628:"Copyright Notice",630:{name:"Contact",repeatable:!0},632:"Caption/Abstract",634:{name:"Writer/Editor",repeatable:!0},637:{name:"Rasterized Caption",description:e=>e},642:"Image Type",643:{name:"Image Orientation",description:e=>{let t=H(e);return"P"===t?"Portrait":"L"===t?"Landscape":"S"===t?"Square":"Unknown"}},647:"Language Identifier",662:{name:"Audio Type",description:e=>{let t=H(e),i=t.charAt(0),n=t.charAt(1),r="";return("1"===i?r+="Mono":"2"===i&&(r+="Stereo"),"A"===n?r+=", actuality":"C"===n?r+=", question and answer session":"M"===n?r+=", music, transmitted by itself":"Q"===n?r+=", response to a question":"R"===n?r+=", raw sound":"S"===n?r+=", scener":"V"===n?r+=", voicer":"W"===n&&(r+=", wrap"),""!==r)?r:t}},663:{name:"Audio Sampling Rate",description:e=>parseInt(H(e),10)+" Hz"},664:{name:"Audio Sampling Resolution",description:e=>{let t=parseInt(H(e),10);return t+(1===t?" bit":" bits")}},665:{name:"Audio Duration",description:e=>{let t=H(e);return t.length>=6?t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2):t}},666:"Audio Outcue",698:"Short Document ID",699:"Unique Document ID",700:"Owner ID",712:{name:e=>2===e.length?"ObjectData Preview File Format":"Record 2 destination",description:e=>{if(2===e.length){let t=(e[0]<<8)+e[1];if(0===t)return"No ObjectData";if(1===t)return"IPTC-NAA Digital Newsphoto Parameter Record";if(2===t)return"IPTC7901 Recommended Message Format";else if(3===t)return"Tagged Image File Format (Adobe/Aldus Image data)";else if(4===t)return"Illustrator (Adobe Graphics data)";else if(5===t)return"AppleSingle (Apple Computer Inc)";else if(6===t)return"NAA 89-3 (ANPA 1312)";else if(7===t)return"MacBinary II";else if(8===t)return"IPTC Unstructured Character Oriented File Format (UCOFF)";else if(9===t)return"United Press International ANPA 1312 variant";else if(10===t)return"United Press International Down-Load Message";else if(11===t)return"JPEG File Interchange (JFIF)";else if(12===t)return"Photo-CD Image-Pac (Eastman Kodak)";else if(13===t)return"Microsoft Bit Mapped Graphics File [*.BMP]";else if(14===t)return"Digital Audio File [*.WAV] (Microsoft & Creative Labs)";else if(15===t)return"Audio plus Moving Video [*.AVI] (Microsoft)";else if(16===t)return"PC DOS/Windows Executable Files [*.COM][*.EXE]";else if(17===t)return"Compressed Binary File [*.ZIP] (PKWare Inc)";else if(18===t)return"Audio Interchange File Format AIFF (Apple Computer Inc)";else if(19===t)return"RIFF Wave (Microsoft Corporation)";else if(20===t)return"Freehand (Macromedia/Aldus)";else if(21===t)return'Hypertext Markup Language "HTML" (The Internet Society)';else if(22===t)return"MPEG 2 Audio Layer 2 (Musicom), ISO/IEC";else if(23===t)return"MPEG 2 Audio Layer 3, ISO/IEC";else if(24===t)return"Portable Document File (*.PDF) Adobe";else if(25===t)return"News Industry Text Format (NITF)";else if(26===t)return"Tape Archive (*.TAR)";else if(27===t)return"Tidningarnas Telegrambyrå NITF version (TTNITF DTD)";else if(28===t)return"Ritzaus Bureau NITF version (RBNITF DTD)";else if(29===t)return"Corel Draw [*.CDR]";return`Unknown format ${t}`}return H(e)}},713:{name:"ObjectData Preview File Format Version",description:(e,t)=>{let i={"00":{"00":"1"},"01":{"01":"1","02":"2","03":"3","04":"4"},"02":{"04":"4"},"03":{"01":"5.0","02":"6.0"},"04":{"01":"1.40"},"05":{"01":"2"},"06":{"01":"1"},11:{"01":"1.02"},20:{"01":"3.1","02":"4.0","03":"5.0","04":"5.5"},21:{"02":"2.0"}},n=H(e);if(t["ObjectData Preview File Format"]){let e=H(t["ObjectData Preview File Format"].value);if(i[e]&&i[e][n])return i[e][n]}return n}},714:"ObjectData Preview Data",1802:{name:"Size Mode",description:e=>e[0].toString()},1812:{name:"Max Subfile Size",description:e=>{let t=0;for(let i=0;i<e.length;i++)t=(t<<8)+e[i];return t.toString()}},1882:{name:"ObjectData Size Announced",description:e=>{let t=0;for(let i=0;i<e.length;i++)t=(t<<8)+e[i];return t.toString()}},1887:{name:"Maximum ObjectData Size",description:e=>{let t=0;for(let i=0;i<e.length;i++)t=(t<<8)+e[i];return t.toString()}}};function e9(e){let t=H(e);return t.length>=8?t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2):t}function te(e){let t=H(e),i=t;return t.length>=6&&(i=t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2),11===t.length&&(i+=t.substr(6,1)+t.substr(7,2)+":"+t.substr(9,2))),i}function tt(e){let t=H(e);if("\x1b%G"===t)return"UTF-8";if("\x1b%5"===t)return"Windows-1252";if("\x1b%/G"===t)return"UTF-8 Level 1";if("\x1b%/H"===t)return"UTF-8 Level 2";if("\x1b%/I"===t)return"UTF-8 Level 3";else if("\x1b/A"===t)return"ISO-8859-1";else if("\x1b/B"===t)return"ISO-8859-2";else if("\x1b/C"===t)return"ISO-8859-3";else if("\x1b/D"===t)return"ISO-8859-4";else if("\x1b/@"===t)return"ISO-8859-5";else if("\x1b/G"===t)return"ISO-8859-6";else if("\x1b/F"===t)return"ISO-8859-7";else if("\x1b/H"===t)return"ISO-8859-8";return"Unknown"}let ti=function(){if("undefined"!=typeof TextDecoder)return TextDecoder},tn=function(e,t){let i=ti();if(void 0!==i&&void 0!==e)try{return new i(e).decode(t instanceof DataView?t.buffer:Uint8Array.from(t))}catch(e){}var n=t.map(e=>String.fromCharCode(e)).join("");try{return decodeURIComponent(escape(n))}catch(e){return n}},tr=function(e,t,i){try{if(Array.isArray(e))return to(new DataView(Uint8Array.from(e).buffer),{size:e.length},0,i);let{naaBlock:n,dataOffset:r}=function(e,t){for(;t+12<=e.byteLength;){var i,n;let r=function(e,t){if(0x3842494d!==e.getUint32(t,!1))throw Error("Not an IPTC resource block.");let i=e.getUint8(t+4+2),n=(i%2==0?i+1:i)+1;return{headerSize:6+n+4,type:e.getUint16(t+4),size:e.getUint32(t+4+2+n)}}(e,t);if(i=r,1028===i.type)return{naaBlock:r,dataOffset:t+r.headerSize};t+=r.headerSize+r.size+(n=r,+(n.size%2!=0))}throw Error("No IPTC NAA resource block.")}(e,t);return to(e,n,r,i)}catch(e){return{}}};function to(e,t,i,n){let r,o={},a=i+t.size;for(;i<a&&i<e.byteLength;){let{tag:t,tagSize:a}=function(e,t,i,n,r){var o,a,s,l;if(o=e,a=t,28!==o.getUint8(a))return{tag:null,tagSize:0};let p=e.getUint16(t+1),u=e.getUint16(t+3);if(!r&&!e7[p])return{tag:void 0,tagSize:u};let c=function(e,t,i){let n=[];for(let r=0;r<i;r++)n.push(e.getUint8(t+r));return n}(e,t+5,u),f={id:p,name:function(e,t,i){return e?"string"==typeof e?e:"function"==typeof e.name?e.name(i):e.name:`undefined-${t}`}(e7[p],p,c),value:c,description:function(e,t,i,n){var r,o,a;if((r=e)&&void 0!==r.description)try{return e.description(t,i)}catch(e){}return(o=e,a=t,o&&a instanceof Array)?tn(n,t):t}(e7[p],c,i,n)};return e7[s=p]&&e7[s].repeatable&&(f.repeatable=!0),e7[l=p]&&void 0!==e7[l].encoding_name&&(f.encoding=e7[p].encoding_name(c)),{tag:f,tagSize:u}}(e,i,o,r,n);if(null===t)break;t&&("encoding"in t&&(r=t.encoding),void 0===o[t.name]||void 0===t.repeatable?o[t.name]={id:t.id,value:t.value,description:t.description}:(o[t.name]instanceof Array||(o[t.name]=[{id:o[t.name].id,value:o[t.name].value,description:o[t.name].description}]),o[t.name].push({id:t.id,value:t.value,description:t.description}))),i+=5+a}return o}let ta={"tiff:Orientation":e=>"1"===e?"Horizontal (normal)":"2"===e?"Mirror horizontal":"3"===e?"Rotate 180":"4"===e?"Mirror vertical":"5"===e?"Mirror horizontal and rotate 270 CW":"6"===e?"Rotate 90 CW":"7"===e?"Mirror horizontal and rotate 90 CW":"8"===e?"Rotate 270 CW":e,"tiff:ResolutionUnit":e=>eM.ResolutionUnit(parseInt(e,10)),"tiff:XResolution":e=>ts(eM.XResolution,e),"tiff:YResolution":e=>ts(eM.YResolution,e),"exif:ApertureValue":e=>ts(eM.ApertureValue,e),"exif:GPSLatitude":tp,"exif:GPSLongitude":tp,"exif:FNumber":e=>ts(eM.FNumber,e),"exif:FocalLength":e=>ts(eM.FocalLength,e),"exif:FocalPlaneResolutionUnit":e=>eM.FocalPlaneResolutionUnit(parseInt(e,10)),"exif:ColorSpace":e=>{var t;return eM.ColorSpace("0x"===(t=e).substring(0,2)?parseInt(t.substring(2),16):parseInt(t,10))},"exif:ComponentsConfiguration"(e,t){if(/^\d, \d, \d, \d$/.test(t)){let e=t.split(", ").map(e=>e.charCodeAt(0));return eM.ComponentsConfiguration(e)}return t},"exif:Contrast":e=>eM.Contrast(parseInt(e,10)),"exif:CustomRendered":e=>eM.CustomRendered(parseInt(e,10)),"exif:ExposureMode":e=>eM.ExposureMode(parseInt(e,10)),"exif:ExposureProgram":e=>eM.ExposureProgram(parseInt(e,10)),"exif:ExposureTime":e=>tl(e)?eM.ExposureTime(e.split("/").map(e=>parseInt(e,10))):e,"exif:MeteringMode":e=>eM.MeteringMode(parseInt(e,10)),"exif:Saturation":e=>eM.Saturation(parseInt(e,10)),"exif:SceneCaptureType":e=>eM.SceneCaptureType(parseInt(e,10)),"exif:Sharpness":e=>eM.Sharpness(parseInt(e,10)),"exif:ShutterSpeedValue":e=>ts(eM.ShutterSpeedValue,e),"exif:WhiteBalance":e=>eM.WhiteBalance(parseInt(e,10))};function ts(e,t){return tl(t)?e(t.split("/")):t}function tl(e){return/^-?\d+\/-?\d+$/.test(e)}function tp(e){let[t,i]=e.split(",");if(void 0!==t&&void 0!==i){let e=parseFloat(t),n=parseFloat(i),r=i.charAt(i.length-1);if(!Number.isNaN(e)&&!Number.isNaN(n))return""+(e+n/60)+r}return e}let tu=function(e){if(e)return e;if("undefined"!=typeof DOMParser)return new DOMParser;try{let{DOMParser:e,onErrorStopParsing:t}=__non_webpack_require__("@xmldom/xmldom");return new e({onError:t})}catch(e){return}},tc={xmp:"http://ns.adobe.com/xap/1.0/",tiff:"http://ns.adobe.com/tiff/1.0/",exif:"http://ns.adobe.com/exif/1.0/",dc:"http://purl.org/dc/elements/1.1/",xmpMM:"http://ns.adobe.com/xap/1.0/mm/",stEvt:"http://ns.adobe.com/xap/1.0/sType/ResourceEvent#",stRef:"http://ns.adobe.com/xap/1.0/sType/ResourceRef#",photoshop:"http://ns.adobe.com/photoshop/1.0/"},tf=function(e,t,i){let n={};if("string"==typeof e)return tg(n,e,i),n;let[r,o]=function(e,t){if(0===t.length)return[];let i=[tm(e,t.slice(0,1))];return t.length>1&&i.push(tm(e,t.slice(1))),i}(e,t),a=tg(n,r,i);if(o){let r=tg(n,o,i);a||r||(delete n._raw,tg(n,tm(e,t),i))}return n};class td extends Error{constructor(e){super(e),this.name="ParseError"}}function tm(e,t){let i=new Uint8Array(t.reduce((e,t)=>e+t.length,0)),n=0;for(let r=0;r<t.length;r++){let o=t[r],a=e.buffer.slice(o.dataOffset,o.dataOffset+o.length);i.set(new Uint8Array(a),n),n+=o.length}return new DataView(i.buffer)}function tg(e,t,i){try{let{doc:n,raw:r}=function(e,t){let i=tu(t);if(!i)throw console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags."),Error();let n="string"==typeof e?e:K(e,0,e.byteLength);return{doc:function e(t,i,n=!1){try{let e=t.parseFromString(i,"application/xml"),n=e.getElementsByTagName("parsererror");if(n.length>0)throw new td(n[0].textContent);return e}catch(r){if("ParseError"===r.name&&function(e){let t=["prefix is non-null and namespace is null","prefix not bound to a namespace","prefix inte bundet till en namnrymd",/Namespace prefix .+ is not defined/];for(let i=0;i<t.length;i++)if(new RegExp(t[i]).test(e.message))return!0;return!1}(r)&&!n)return e(t,function(e){var t,i,n;let r,o=e.match(/<([A-Za-z_][A-Za-z0-9._-]*)([^>]*)>/);if(!o)return e;let a=o[1],s=function(e){let t,i=[],n=/xmlns:([\w-]+)=["'][^"']+["']/g;for(;null!==(t=n.exec(e));)-1===i.indexOf(t[1])&&i.push(t[1]);return i}(e),l=(function(e){let t,i=[],n=/\b([A-Za-z_][A-Za-z0-9._-]*):[A-Za-z_][A-Za-z0-9._-]*\b/g;for(;null!==(t=n.exec(e));){let e=t[1];"xmlns"!==e&&"xml"!==e&&-1===i.indexOf(e)&&i.push(e)}return i})(e).filter(e=>-1===s.indexOf(e));return 0===l.length?e:(t=e,i=a,n=function(e){let t=[];for(let i=0;i<e.length;i++){let n=e[i],r=tc[n]||"http://fallback.namespace/"+n;t.push(" xmlns:"+n+'="'+r+'"')}return t.join("")}(l),r=RegExp("<"+i+"([^>]*)>"),t.replace(r,"<"+i+"$1"+n+">"))}(i),!0);throw r}}(i,n.replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")),raw:n}}(t,i);e._raw=(e._raw||"")+r;let o=function e(t){for(let i=0;i<t.childNodes.length;i++){if("x:xmpmeta"===t.childNodes[i].tagName)return e(t.childNodes[i]);if("rdf:RDF"===t.childNodes[i].tagName)return t.childNodes[i]}throw Error()}(n);return V(e,ty(function e(t,i=!1){var n;let r,o=function(e){let t=[];for(let i=0;i<e.childNodes.length;i++)t.push(e.childNodes[i]);return t}(t);if(1===(n=o).length&&"#text"===n[0].nodeName)return i?{}:o[0].nodeValue;return r={},o.forEach(t=>{var i,n;if((i=t).nodeName&&"#text"!==i.nodeName){let i={attributes:function(e){let t={};for(let i=0;i<e.attributes.length;i++)t[e.attributes[i].nodeName]=decodeURIComponent(escape(e.attributes[i].value));return t}(n=t),value:e(n)};void 0!==r[t.nodeName]?(Array.isArray(r[t.nodeName])||(r[t.nodeName]=[r[t.nodeName]]),r[t.nodeName].push(i)):r[t.nodeName]=i}}),r}(o,!0))),!0}catch(e){return!1}}function ty(e){let t={};if("string"==typeof e)return e;for(let i in e){let n=e[i];Array.isArray(n)||(n=[n]),n.forEach(e=>{V(t,th(e.attributes)),"object"==typeof e.value&&V(t,tv(e.value))})}return t}function th(e){let t={};for(let n in e)try{var i;i=n,"rdf:parseType"===i||tb(i)||(t[tS(n)]={value:e[n],attributes:{},description:tx(e[n],n)})}catch(e){}return t}function tb(e){return"xmlns"===e.split(":")[0]}function tS(e){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(e)?"RatingPercent":e.split(":")[1]}function tx(e,t){if(Array.isArray(e)){let i=e.map(e=>void 0!==e.value?tx(e.value):tx(e)).join(", ");return t&&"function"==typeof ta[t]?ta[t](e,i):i}if("object"==typeof e){var i,n=e;let t=[];for(let e in n){t.push(`${"CiAdrCity"===(i=e)?"CreatorCity":"CiAdrCtry"===i?"CreatorCountry":"CiAdrExtadr"===i?"CreatorAddress":"CiAdrPcode"===i?"CreatorPostalCode":"CiAdrRegion"===i?"CreatorRegion":"CiEmailWork"===i?"CreatorWorkEmail":"CiTelWork"===i?"CreatorWorkPhone":"CiUrlWork"===i?"CreatorWorkUrl":i}: ${tx(n[e].value)}`)}return t.join("; ")}try{if(t&&"function"==typeof ta[t])return ta[t](e);return decodeURIComponent(escape(e))}catch(t){return e}}function tv(e){let t={};for(let i in e)try{tb(i)||(t[tS(i)]=function(e,t){var i,n,r,o,a;return(i=e,Array.isArray(i))?(n=e,r=t,tA(n[n.length-1],r)):(o=e,"Resource"===o.attributes["rdf:parseType"]&&"string"==typeof o.value&&""===o.value.trim())?{value:"",attributes:{},description:""}:tT(e)?tP(e,t):tC(e)?tF(e,t):tk(e)?tB(e,t):(a=e,void 0!==tw(a.value))?function(e,t){let i=tw(e.value).value["rdf:li"],n=tI(e),r=[];return void 0===i?i=[]:Array.isArray(i)||(i=[i]),i.forEach(e=>{var t;r.push((t=e,tT(t)?tP(t):tC(t)?tF(t).value:tk(t)?tB(t).value:tA(t)))}),{value:r,attributes:n,description:tx(r,t)}}(e,t):tA(e,t)}(e[i],i))}catch(e){}return t}function tT(e){return"Resource"===e.attributes["rdf:parseType"]&&void 0!==e.value["rdf:value"]||void 0!==e.value["rdf:Description"]&&void 0!==e.value["rdf:Description"].value["rdf:value"]}function tP(e,t){var i;let n=tI(e);void 0!==e.value["rdf:Description"]&&(e=e.value["rdf:Description"]),V(n,tI(e),function(e){let t={};for(let i in e.value)"rdf:value"===i||tb(i)||(t[tS(i)]=e.value[i].value);return t}(e));let r=tE((i=e).value["rdf:value"])||i.value["rdf:value"].value;return{value:r,attributes:n,description:tx(r,t)}}function tI(e){let t={};for(let i in e.attributes)"rdf:parseType"===i||"rdf:resource"===i||tb(i)||(t[tS(i)]=e.attributes[i]);return t}function tC(e){return"Resource"===e.attributes["rdf:parseType"]||void 0!==e.value["rdf:Description"]&&void 0===e.value["rdf:Description"].value["rdf:value"]}function tF(e,t){let i={value:{},attributes:{}};return void 0!==e.value["rdf:Description"]&&(V(i.value,th(e.value["rdf:Description"].attributes)),V(i.attributes,tI(e)),e=e.value["rdf:Description"]),V(i.value,tv(e.value)),i.description=tx(i.value,t),i}function tk(e){return 0===Object.keys(e.value).length&&void 0===e.attributes["xml:lang"]&&void 0===e.attributes["rdf:resource"]}function tB(e,t){let i=th(e.attributes);return{value:i,attributes:{},description:tx(i,t)}}function tw(e){return e["rdf:Bag"]||e["rdf:Seq"]||e["rdf:Alt"]}function tA(e,t){let i=tE(e)||ty(e.value);return{value:i,attributes:tI(e),description:tx(i,t)}}function tE(e){return e.attributes&&e.attributes["rdf:resource"]}let tM={2e3:{name:"PathInformation",description:function(e){let t={},i=[];for(let n=0;n<e.byteLength;n+=26){let r=e$(e,n);tU[r]&&(t[r]||(t[r]=tU[r].description),i.push({type:r,path:tU[r].path(e,n+2)}))}return JSON.stringify({types:t,paths:i})}},2999:{name:"ClippingPathName",description(e){let[,t]=j(e,0);return t}}},tU={0:{description:"Closed subpath length",path:(e,t)=>[e$(e,t)]},1:{description:"Closed subpath Bezier knot, linked",path:tR},2:{description:"Closed subpath Bezier knot, unlinked",path:tR},3:{description:"Open subpath length",path:(e,t)=>[e$(e,t)]},4:{description:"Open subpath Bezier knot, linked",path:tR},5:{description:"Open subpath Bezier knot, unlinked",path:tR},6:{description:"Path fill rule",path:()=>[]},8:{description:"Initial fill rule",path:(e,t)=>[e$(e,t)]},7:{description:"Clipboard",path:function(e,t){return[[tD(e,t,8),tD(e,t+4,8),tD(e,t+8,8),tD(e,t+12,8)],tD(e,t+16,8)]}}};function tR(e,t){let i=[];for(let n=0;n<24;n+=8)i.push(function(e,t){let i=tD(e,t,8);return[tD(e,t+4,8),i]}(e,t+n));return i}function tD(e,t,i){var n,r;let o=eq(e,t),a=o&parseInt(W("1",32-i),2);return(o>>>31==0?1:-1)*(r=((0x7f000000&o)>>>32-i).toString(2)+"."+(n=a.toString(2),W("0",32-i-n.length)+n),parseInt(r.replace(".",""),2)/Math.pow(2,(r.split(".")[1]||"").length))}let tN=function(e,t){let i=O(new Uint8Array(e).buffer),n={},r=0;for(;r<e.length;){let e=K(i,r,tO),o=e$(i,r+=tO),{tagName:a,tagNameSize:s}=function(e,t){let[i,n]=j(e,t);return{tagName:n,tagNameSize:1+i+ +(i%2==0)}}(i,r+=2),l=eq(i,r+=s);if(r+=4,e===tL){let e=O(i.buffer,r,l),s={id:o,value:K(e,0,l)};if(tM[o]){try{s.description=tM[o].description(e)}catch(e){s.description="<no description formatter>"}n[a||tM[o].name]=s}else t&&(n[`undefined-${o}`]=s)}r+=l+l%2}return n},tL="8BIM",tO=tL.length,tK={desc:{name:"ICC Description"},cprt:{name:"ICC Copyright"},dmdd:{name:"ICC Device Model Description"},vued:{name:"ICC Viewing Conditions Description"},dmnd:{name:"ICC Device Manufacturer for Display"},tech:{name:"Technology"}},tG={4:{name:"Preferred CMM type",value:(e,t)=>K(e,t,4),description:e=>null!==e?tj(e):""},8:{name:"Profile Version",value:(e,t)=>e.getUint8(t).toString(10)+"."+(e.getUint8(t+1)>>4).toString(10)+"."+(e.getUint8(t+1)%16).toString(10)},12:{name:"Profile/Device class",value:(e,t)=>K(e,t,4),description:e=>{switch(e.toLowerCase()){case"scnr":return"Input Device profile";case"mntr":return"Display Device profile";case"prtr":return"Output Device profile";case"link":return"DeviceLink profile";case"abst":return"Abstract profile";case"spac":return"ColorSpace profile";case"nmcl":return"NamedColor profile";case"cenc":return"ColorEncodingSpace profile";case"mid ":return"MultiplexIdentification profile";case"mlnk":return"MultiplexLink profile";case"mvis":return"MultiplexVisualization profile";default:return e}}},16:{name:"Color Space",value:(e,t)=>K(e,t,4)},20:{name:"Connection Space",value:(e,t)=>K(e,t,4)},24:{name:"ICC Profile Date",value:(e,t)=>{var i,n;return(i=e,n=t,new Date(Date.UTC(i.getUint16(n),i.getUint16(n+2)-1,i.getUint16(n+4),i.getUint16(n+6),i.getUint16(n+8),i.getUint16(n+10)))).toISOString()}},36:{name:"ICC Signature",value:(e,t)=>{var i;return i=e.buffer.slice(t,t+4),String.fromCharCode.apply(null,new Uint8Array(i))}},40:{name:"Primary Platform",value:(e,t)=>K(e,t,4),description:e=>tj(e)},48:{name:"Device Manufacturer",value:(e,t)=>K(e,t,4),description:e=>tj(e)},52:{name:"Device Model Number",value:(e,t)=>K(e,t,4)},64:{name:"Rendering Intent",value:(e,t)=>e.getUint32(t),description:e=>{switch(e){case 0:return"Perceptual";case 1:return"Relative Colorimetric";case 2:return"Saturation";case 3:return"Absolute Colorimetric";default:return e}}},80:{name:"Profile Creator",value:(e,t)=>K(e,t,4)}};function tj(e){switch(e.toLowerCase()){case"appl":return"Apple";case"adbe":return"Adobe";case"msft":return"Microsoft";case"sunw":return"Sun Microsystems";case"sgi":return"Silicon Graphics";case"tgnt":return"Taligent";default:return e}}let tz=function(e,i,n){var r,o;return n&&i[0].compressionMethod!==t?(r=e,0!==(o=i)[0].compressionMethod?{}:_(new DataView(r.buffer.slice(o[0].offset,o[0].offset+o[0].length)),o[0].compressionMethod,"utf-8","dataview").then(tV).catch(()=>({}))):function(e,t){try{var i;let n=t.reduce((e,t)=>e+t.length,0),r=new Uint8Array(n),o=0,a=(i=e,Array.isArray(i)?new DataView(Uint8Array.from(i).buffer).buffer:i.buffer);for(let e=1;e<=t.length;e++){let i=t.find(t=>t.chunkNumber===e);if(!i)throw Error(`ICC chunk ${e} not found`);let n=a.slice(i.offset,i.offset+i.length),s=new Uint8Array(n);r.set(s,o),o+=s.length}return tV(new DataView(r.buffer))}catch(e){return{}}}(e,i)};function tV(e){let t=e.buffer,i=e.getUint32();if(e.byteLength!==i)throw Error("ICC profile length not matching");if(e.byteLength<84)throw Error("ICC profile too short");let n={},r=Object.keys(tG);for(let t=0;t<r.length;t++){let i=r[t],o=tG[i],a=o.value(e,parseInt(i,10)),s=a;o.description&&(s=o.description(a)),n[o.name]={value:a,description:s}}if("acsp"!==t$(t.slice(36,40)))throw Error("ICC profile: missing signature");if(t.length<132)return n;let o=e.getUint32(128),a=132;for(let i=0;i<o;i++){var s;if(s=a,t.length<s+12)break;let i=K(e,a,4),r=e.getUint32(a+4),o=e.getUint32(a+8);if(r>t.length)break;let l=K(e,r,4);if("desc"===l){let a=e.getUint32(r+8);if(a>o)return n;tq(n,i,t$(t.slice(r+12,r+a+11)))}else if("mluc"===l){let t=e.getUint32(r+8),o=e.getUint32(r+12),a=r+16,s=[];for(let i=0;i<t;i++){let t=K(e,a+0,2),i=K(e,a+2,2),n=e.getUint32(a+4),l=e.getUint32(a+8),p=function(e,t,i){let n=[];for(let r=0;r<i&&t+r<e.byteLength;r+=2)n.push(e.getUint16(t+r));return 0===n[n.length-1]&&n.pop(),z(n)}(e,r+l,n);s.push({languageCode:t,countryCode:i,text:p}),a+=o}if(1===t)tq(n,i,s[0].text);else{let e={};for(let t=0;t<s.length;t++)e[`${s[t].languageCode}-${s[t].countryCode}`]=s[t].text;tq(n,i,e)}}else"text"===l?tq(n,i,t$(t.slice(r+8,r+o-7))):"sig "===l&&tq(n,i,t$(t.slice(r+8,r+12)));a+=12}return n}function t$(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function tq(e,t,i){tK[t]?e[tK[t].name]={value:i,description:i}:e[t]={value:i,description:i}}let tW=function(e,t,i,n,r){var o,a;let s,l=eY(e,eO,t,t+i,n,r);return l.ShotInfo&&(l=V({},l,(o=l.ShotInfo.value,s={},void 0!==o[27]&&(s.AutoRotate={value:o[27],description:0===(a=o[27])?"None":1===a?"Rotate 90 CW":2===a?"Rotate 180":3===a?"Rotate 270 CW":"Unknown"}),s)),delete l.ShotInfo),l},t_=78420,tH=1,tX=3,tJ=5,tY=function(e,t,i,n){var r;let o=Y(e,t+i+8),a=t+i,s=eY(e,eK,a,a+10,o,n,!0);return(r=s).PentaxModelID&&r.PentaxModelID.value===t_&&r.LevelInfo&&(s=V({},s,function(e,t,i){var n;let r={};if(t+7>e.byteLength)return r;let o=e.getInt8(t+tH);r.CameraOrientation={value:o,description:0===(n=o)?"Horizontal (normal)":1===n?"Rotate 270 CW":2===n?"Rotate 180":3===n?"Rotate 90 CW":4===n?"Upwards":5===n?"Downwards":"Unknown"};let a=e.getInt16(t+tX,18761===i);r.RollAngle={value:a,description:""+-.5*a};let s=e.getInt16(t+tJ,18761===i);return r.PitchAngle={value:s,description:""+-.5*s},r}(e,a+s.LevelInfo.__offset,o)),delete s.LevelInfo),s},tZ=function(e,i,n,r){let o={},a=[];for(let s=0;s<i.length;s++){let{offset:l,length:p,type:u}=i[s],c=function(e,i,n,r,o){var a;let s,l=[],p=[],u=[],c=tQ,f=t;for(let o=0;o<n&&i+o<e.byteLength;o++){if(c===t0){f=function({type:e,dataView:i,offset:n}){if(e===em){if(1===i.getUint8(n))return i.getUint8(n+1)}else if(e===eg)return i.getUint8(n);return t}({type:r,dataView:e,offset:i+o}),r===em&&(o+=1),c=t3(r,c);continue}if(c===t4){s=new DataView(e.buffer.slice(i+o,i+n));break}let a=e.getUint8(i+o);0===a?c=t3(r,c):c===tQ?l.push(a):c===t1?p.push(a):c===t2&&u.push(a)}if(f!==t&&!o)return{};let d=_(s,f,(a=r)===ed||a===eg?"latin1":"utf-8");return d instanceof Promise?d.then(e=>t5(e,r,p,l)).catch(()=>t5("<text using unknown compression>".split(""),r,p,l)):t5(d,r,p,l)}(e,l,p,u,n);if(c instanceof Promise)a.push(c.then(({name:e,value:t,description:i})=>{try{if(t6(e,t))return{__exif:e4(t7(t),6,r).tags};if(t8(e,t))return{__iptc:tr(t7(t),0,r)};if(e&&!t6(e,t)&&!t8(e,t))return{[e]:{value:t,description:i}}}catch(e){}return{}}));else{let{name:e,value:t,description:i}=c;e&&(o[e]={value:t,description:i})}}return{readTags:o,readTagsPromise:a.length>0?Promise.all(a):void 0}},tQ="STATE_KEYWORD",t0="STATE_COMPRESSION",t1="STATE_LANG",t2="STATE_TRANSLATED_KEYWORD",t4="STATE_TEXT";function t3(e,t){return t===tQ&&[em,eg].includes(e)?t0:t===t0?e===em?t1:t4:t===t1?t2:t4}function t5(e,t,i,n){var r;let o=(r=e)instanceof DataView?K(r,0,r.byteLength):r;return{name:function(e,t,i){let n=z(i);if(e===ed||0===t.length)return n;let r=z(t);return`${n} (${r})`}(t,i,n),value:o,description:t===em?tn("UTF-8",e):o}}function t6(e,t){return"raw profile type exif"===e.toLowerCase()&&"exif"===t.substring(1,5)}function t8(e,t){return"raw profile type iptc"===e.toLowerCase()&&"iptc"===t.substring(1,5)}function t7(e){var t=e.match(/\n(exif|iptc)\n\s*\d+\n([\s\S]*)$/)[2].replace(/\n/g,"");let i=new DataView(new ArrayBuffer(t.length/2));for(let e=0;e<t.length;e+=2)i.setUint8(e/2,parseInt(t.substring(e,e+2),16));return i}let t9=function(e,t){let i={};for(let n=0;n<t.length;n++){let r=eq(e,t[n]+0),o=K(e,t[n]+4,4);o===ey?(i["Pixels Per Unit X"]=function(e,t,i){if(!ie(e,t,i,0,4))return;let n=eq(e,t+ec+0);return{value:n,description:""+n}}(e,t[n],r),i["Pixels Per Unit Y"]=function(e,t,i){if(!ie(e,t,i,4,4))return;let n=eq(e,t+ec+4);return{value:n,description:""+n}}(e,t[n],r),i["Pixel Units"]=function(e,t,i){if(!ie(e,t,i,8,1))return;let n=eV(e,t+ec+8);return{value:n,description:1===n?"meters":"Unknown"}}(e,t[n],r)):o===eh&&(i["Modify Date"]=function(e,t,i){if(!ie(e,t,i,0,7))return;let n=e$(e,t+ec),r=eV(e,t+ec+2),o=eV(e,t+ec+3),a=eV(e,t+ec+4),s=eV(e,t+ec+5),l=eV(e,t+ec+6);return{value:[n,r,o,a,s,l],description:`${it(n,4)}-${it(r,2)}-${it(o,2)} ${it(a,2)}:${it(s,2)}:${it(l,2)}`}}(e,t[n],r))}return i};function ie(e,t,i,n,r){return n+r<=i&&t+ec+n+r<=e.byteLength}function it(e,t){return`${"0".repeat(t-(""+e).length)}${e}`}let ii=function(e,t){let i,n,r={},o=eV(e,t);return r.Alpha={value:+!!(i=16&o),description:i?"Yes":"No"},r.Animation={value:+!!(n=2&o),description:n?"Yes":"No"},r.ImageWidth=ir(e,t+4),r.ImageHeight=ir(e,t+7),r};function ir(e,t){let i=eV(e,t)+256*eV(e,t+1)+65536*eV(e,t+2)+1;return{value:i,description:i+"px"}}let io=[6,7,99],ia=function(e,t,i){var n;if((n=t)&&(void 0===n.Compression||io.includes(n.Compression.value))&&n.JPEGInterchangeFormat&&n.JPEGInterchangeFormat.value&&n.JPEGInterchangeFormatLength&&n.JPEGInterchangeFormatLength.value){t.type="image/jpeg";let n=i+t.JPEGInterchangeFormat.value;t.image=e.buffer.slice(n,n+t.JPEGInterchangeFormatLength.value),$(t,"base64",function(){return q(this.image)})}return t},is=function(e,t){let i={},n=!1,r=il(e,"exif","FocalLength",t),o=il(e,"exif","FocalPlaneXResolution",t),a=il(e,"exif","FocalPlaneYResolution",t),s=il(e,"exif","FocalPlaneResolutionUnit",t),l=il(e,"file","Image Width",t),p=il(e,"file","Image Height",t),u=il(e,"exif","FocalLengthIn35mmFilm",t)||function(e,t,i,n,r,o){if(e&&t&&i&&n&&r&&o)try{let a;switch(i){case 2:a=25.4;break;case 3:a=10;break;case 4:a=1;break;default:return}let s=e[0]/e[1]*a,l=t[0]/t[1]*a,p=Math.sqrt((n/s)**2+(r/l)**2);return o[0]/o[1]*(43.27/p)}catch(e){}}(o,a,s,l,p,r);u&&(i.FocalLength35efl={value:u,description:eM.FocalLengthIn35mmFilm(u)},n=!0);let c=function(e,t){if(e&&t)try{let i=t/(e[0]/e[1]);return{value:i,description:i.toFixed(1)}}catch(e){}}(r,u);c&&(i.ScaleFactorTo35mmEquivalent=c,n=!0);let f=function(e){if(e)try{let t=2*Math.atan(36/(2*e))*(180/Math.PI);return{value:t,description:t.toFixed(1)+" deg"}}catch(e){}}(u);if(f&&(i.FieldOfView=f,n=!0),n)return i};function il(e,t,i,n){return n&&e[t]&&e[t][i]?e[t][i].value:!n&&e[i]?e[i].value:void 0}function ip(e){this.name="MetadataMissingError",this.message=e||"No Exif data",this.stack=Error().stack}ip.prototype=Error();let iu=ip,ic=function(e,t={}){var i,n;return"string"==typeof e?(t.async=!0,(function(e,t){var i;if(/^\w+:\/\//.test(e))return"undefined"!=typeof fetch?function(e,{length:t}={}){let i={method:"GET"};return Number.isInteger(t)&&t>=0&&(i.headers={range:`bytes=0-${t-1}`}),fetch(e,i).then(e=>e.arrayBuffer())}(e,t):function(e,{length:t}={}){return new Promise((i,n)=>{var r;let o={};Number.isInteger(t)&&t>=0&&(o.headers={range:`bytes=0-${t-1}`}),(r=e,/^https:\/\//.test(r)?__non_webpack_require__("https").get:__non_webpack_require__("http").get)(e,o,e=>{if(e.statusCode>=200&&e.statusCode<=299){let t=[];e.on("data",e=>t.push(N.Buffer.from(e))),e.on("error",e=>n(e)),e.on("end",()=>i(N.Buffer.concat(t)))}else n(`Could not fetch file: ${e.statusCode} ${e.statusMessage}`),e.resume()}).on("error",e=>n(e))})}(e,t);return(i=e,/^data:[^;,]*(;base64)?,/.test(i))?Promise.resolve(function(e){let t=e.substring(e.indexOf(",")+1);if(-1!==e.indexOf(";base64"))return"undefined"!=typeof atob?Uint8Array.from(atob(t),e=>e.charCodeAt(0)).buffer:void 0===N.Buffer?void 0:void 0!==N.Buffer.from?N.Buffer.from(t,"base64"):new N.Buffer(t,"base64");let i=decodeURIComponent(t);return void 0!==N.Buffer?void 0!==N.Buffer.from?N.Buffer.from(i):new N.Buffer(i):Uint8Array.from(i,e=>e.charCodeAt(0)).buffer}(e)):function(e,{length:t}={}){return new Promise((i,n)=>{let r=function(){try{return __non_webpack_require__("fs")}catch(e){return}}();r.open(e,(o,a)=>{o?n(o):r.stat(e,(o,s)=>{if(o)n(o);else{let o=Math.min(s.size,void 0!==t?t:s.size),l=N.Buffer.alloc(o);r.read(a,{buffer:l,length:o},t=>{t?n(t):r.close(a,t=>{t&&console.warn(`Could not close file ${e}:`,t),i(l)})})}})})})}(e,t)})(e,t).then(e=>id(e,t))):(i=e,"undefined"!=typeof File&&i instanceof File)?(t.async=!0,(n=e,new Promise((e,t)=>{let i=new FileReader;i.onload=t=>e(t.target.result),i.onerror=()=>t(i.error),i.readAsArrayBuffer(n)})).then(e=>id(e,t))):id(e,t)};function id(e,t){return function(e){try{return N.Buffer.isBuffer(e)}catch(e){return!1}}(e)&&(e=new Uint8Array(e).buffer),function(e,{expanded:t=!1,async:i=!1,includeUnknown:n=!1,domParser:r}={expanded:!1,async:!1,includeUnknown:!1,domParser:void 0}){var o,a,s,l,p;let u=!1,c={},f=[],{fileType:d,fileDataOffset:m,jfifDataOffset:g,tiffHeaderOffset:y,iptcDataOffset:h,xmpChunks:b,iccChunks:S,mpfDataOffset:x,pngHeaderOffset:v,pngTextChunks:T,pngChunkOffsets:P,vp8xChunkOffset:I,gifHeaderOffset:C}=eA(e,i);if(void 0!==m){u=!0;let i=e6(e,m);t?c.file=i:c=V({},c,i)}if(void 0!==g){u=!0;let i=e8(e,g);t?c.jfif=i:c=V({},c,i)}if(void 0!==y){u=!0;let{tags:i,byteOrder:s}=e4(e,y,n);if(i.Thumbnail&&(c.Thumbnail=i.Thumbnail,delete i.Thumbnail),t?(c.exif=i,function(e){if(e.exif){if(e.exif.GPSLatitude&&e.exif.GPSLatitudeRef)try{e.gps=e.gps||{},e.gps.Latitude=J(e.exif.GPSLatitude.value),"S"===e.exif.GPSLatitudeRef.value.join("")&&(e.gps.Latitude=-e.gps.Latitude)}catch(e){}if(e.exif.GPSLongitude&&e.exif.GPSLongitudeRef)try{e.gps=e.gps||{},e.gps.Longitude=J(e.exif.GPSLongitude.value),"W"===e.exif.GPSLongitudeRef.value.join("")&&(e.gps.Longitude=-e.gps.Longitude)}catch(e){}if(e.exif.GPSAltitude&&e.exif.GPSAltitudeRef)try{e.gps=e.gps||{},e.gps.Altitude=e.exif.GPSAltitude.value[0]/e.exif.GPSAltitude.value[1],1===e.exif.GPSAltitudeRef.value&&(e.gps.Altitude=-e.gps.Altitude)}catch(e){}}}(c)):c=V({},c,i),i["IPTC-NAA"]&&void 0===h){let e=tr(i["IPTC-NAA"].value,0,n);t?c.iptc=e:c=V({},c,e)}if(0,i.ApplicationNotes&&!im(b)){let e=tf(z(i.ApplicationNotes.value),void 0,r);t?c.xmp=e:(delete e._raw,c=V({},c,e))}if(0,i.ImageSourceData&&i.PhotoshopSettings){let e=tN(i.PhotoshopSettings.value,n);t?c.photoshop=e:c=V({},c,e)}if(0,i.ICC_Profile&&!ig(S)){let e=tz(i.ICC_Profile.value,[{offset:0,length:i.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]);t?c.icc=e:c=V({},c,e)}if(0,i.MakerNote){if((o=i).Make&&o.Make.value&&Array.isArray(o.Make.value)&&"Canon"===o.Make.value[0]&&o.MakerNote&&o.MakerNote.__offset){let r=tW(e,y,i.MakerNote.__offset,s,n);t?c.makerNotes=r:c=V({},c,r)}else{let r;if(r="PENTAX ",(a=i).MakerNote.value.length>r.length&&z(a.MakerNote.value.slice(0,r.length))===r&&a.MakerNote.__offset){let r=tY(e,y,i.MakerNote.__offset,n);t?c.makerNotes=r:c=V({},c,r)}}}i.MakerNote&&delete i.MakerNote.__offset}if(void 0!==h){u=!0;let i=tr(e,h,n);t?c.iptc=i:c=V({},c,i)}if(im(b)){u=!0;let i=tf(e,b,r);t?c.xmp=i:(delete i._raw,c=V({},c,i))}if(ig(S)){u=!0;let t=tz(e,S,i);t instanceof Promise?f.push(t.then(B)):B(t)}if(void 0!==x){u=!0;let i=e3(e,x,n);t?c.mpf=i:c=V({},c,i)}if(void 0!==v){u=!0;let i={"Image Width":function(e,t){if(t+0+4>e.byteLength)return;let i=eq(e,t);return{value:i,description:`${i}px`}}(s=e,l=v),"Image Height":function(e,t){if(t+4+4>e.byteLength)return;let i=eq(e,t+4);return{value:i,description:`${i}px`}}(s,l),"Bit Depth":function(e,t){if(t+8+1>e.byteLength)return;let i=eV(e,t+8);return{value:i,description:`${i}`}}(s,l),"Color Type":function(e,t){if(t+9+1>e.byteLength)return;let i=eV(e,t+9);return{value:i,description:({0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha"})[i]||"Unknown"}}(s,l),Compression:function(e,t){if(t+10+1>e.byteLength)return;let i=eV(e,t+10);return{value:i,description:0===i?"Deflate/Inflate":"Unknown"}}(s,l),Filter:function(e,t){if(t+11+1>e.byteLength)return;let i=eV(e,t+11);return{value:i,description:0===i?"Adaptive":"Unknown"}}(s,l),Interlace:function(e,t){if(t+12+1>e.byteLength)return;let i=eV(e,t+12);return{value:i,description:({0:"Noninterlaced",1:"Adam7 Interlace"})[i]||"Unknown"}}(s,l)};t?(c.png=c.png?V({},c.png,i):i,c.pngFile=i):c=V({},c,i)}if(void 0!==T){u=!0;let{readTags:t,readTagsPromise:r}=tZ(e,T,i,n);w(t),r&&f.push(r.then(e=>e.forEach(w)))}if(void 0!==P){u=!0;let i=t9(e,P);t?c.png=c.png?V({},c.png,i):i:c=V({},c,i)}if(void 0!==I){u=!0;let i=ii(e,I);t?c.riff=c.riff?V({},c.riff,i):i:c=V({},c,i)}if(void 0!==C){u=!0;let i={"GIF Version":function(e){if(6>e.byteLength)return;let t=K(e,3,3);return{value:t,description:t}}(p=e),"Image Width":function(e){if(8>e.byteLength)return;let t=e.getUint16(6,!0);return{value:t,description:`${t}px`}}(p),"Image Height":function(e){if(10>e.byteLength)return;let t=e.getUint16(8,!0);return{value:t,description:`${t}px`}}(p),"Global Color Map":function(e){if(11>e.byteLength)return;let t=(128&e.getUint8(10))>>>7;return{value:t,description:1===t?"Yes":"No"}}(p),"Bits Per Pixel":function(e){if(11>e.byteLength)return;let t=(7&e.getUint8(10))+1;return{value:t,description:`${t} ${1===t?"bit":"bits"}`}}(p),"Color Resolution Depth":function(e){if(11>e.byteLength)return;let t=((112&e.getUint8(10))>>>4)+1;return{value:t,description:`${t} ${1===t?"bit":"bits"}`}}(p)};t?c.gif=c.gif?V({},c.gif,i):i:c=V({},c,i)}let F=is(c,t);F&&(t?c.composite=F:c=V({},c,F));let k=ia(e,c.Thumbnail,y);if(k?(u=!0,c.Thumbnail=k):delete c.Thumbnail,d&&(t?(c.file||(c.file={}),c.file.FileType=d):c.FileType=d,u=!0),!u)throw new iu;if(i)return Promise.all(f).then(()=>c);return c;function B(e){t?c.icc=e:c=V({},c,e)}function w(e){if(t){for(let t of["exif","iptc"]){let i=`__${t}`;e[i]&&(c[t]=c[t]?V({},c.exif,e[i]):e[i],delete e[i])}c.png=c.png?V({},c.png,e):e,c.pngText=c.pngText?V({},c.png,e):e}else c=V({},c,e.__exif?e.__exif:{},e.__iptc?e.__iptc:{},e),delete c.__exif,delete c.__iptc}}(function(e){try{return new DataView(e)}catch(t){return new L(e)}}(e),t)}function im(e){return Array.isArray(e)&&e.length>0}function ig(e){return Array.isArray(e)&&e.length>0}var iy=e.i(300767);class ih extends iy.TaggedError("ExifParseError"){}class ib extends iy.TaggedError("FileReadError"){}let iS=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],ix=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],iv=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],iT=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],iP=(e,t,i)=>"string"==typeof t||Array.isArray(t)?e.toLocaleString(t,i):!0===t||void 0!==i?e.toLocaleString(void 0,i):String(e),iI=e=>{if("number"==typeof e)return Math.log10(e);let t=e.toString(10);return t.length+Math.log10(Number.parseFloat(`0.${t.slice(0,15)}`))};function iC(e,t){var i;let n;if("bigint"!=typeof e&&!Number.isFinite(e))throw TypeError(`Expected a finite number, got ${typeof e}: ${e}`);let r={bits:!1,binary:!1,space:!0,...t},o=r.bits?r.binary?iT:iv:r.binary?ix:iS,a=r.space?" ":"";if(r.signed&&("number"==typeof e?0===e:0n===e))return` 0${a}${o[0]}`;let s=e<0,l=s?"-":r.signed?"+":"";if(s&&(e=-e),void 0!==r.minimumFractionDigits&&(n={minimumFractionDigits:r.minimumFractionDigits}),void 0!==r.maximumFractionDigits&&(n={maximumFractionDigits:r.maximumFractionDigits,...n}),"number"==typeof e?e<1:e<1n)return l+iP("number"==typeof e?e:Number(e),r.locale,n)+a+o[0];let p=r.binary?1024:1e3,u=Math.min(Math.floor(r.binary?("number"==typeof(i=e)?Math.log(i):iI(i)*Math.log(10))/Math.log(1024):iI(e)/3),o.length-1),c=((e,t)=>{if("number"==typeof e)return e/t;let i=e/BigInt(t),n=e%BigInt(t);return Number(i)+Number(n)/t})(e,p**u);if(!n){let e=Math.max(3,Number.parseInt(String(c),10).toString().length);c=Number(c.toPrecision(e))}return l+iP(Number(c),r.locale,n)+a+o[u]}let iF=M.fn("readFileArrayBuffer")(function*(e){return yield*M.tryPromise({try:()=>e.arrayBuffer(),catch:t=>new ib({message:"Array buffer could not be read",cause:t,fileName:e.name,fileType:e.type,fileSize:e.size,phase:"read"})})});e.i(69368);var ik=e.i(527828);let iB=ik.BS.Struct({description:R.String,value:R.Number}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/NumberFileTag"),identifier:"NumberFileTag",title:"Number File Tag",description:"EXIF tag with a numeric value and a human-readable description."}),iw=ik.BS.Struct({description:R.String,value:R.Array(R.Number)}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/NumberArrayFileTag"),identifier:"NumberArrayFileTag",title:"Number Array File Tag",description:"EXIF tag with an array of numbers (e.g., resolutions, coordinates)."}),iA=ik.BS.Struct({description:R.String,value:R.Union(R.Array(R.Number),R.Array(R.Array(R.Number)))}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/NumberArray2DFileTag"),identifier:"NumberArray2DFileTag",title:"Number Array 2D File Tag",description:"EXIF tag with a 1D or 2D array of numbers (e.g., chroma subsampling)."}),iE=e=>ik.BS.Struct({id:R.Number,description:R.Union(R.String,R.Number),value:e}),iM=iE(R.Tuple(R.Number,R.Number)).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/RationalTag"),identifier:"RationalTag",title:"Rational Tag",description:"Typed EXIF tag whose value is a rational tuple [numerator, denominator] (e.g., shutter speed)."}),iU=iE(R.Number).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/NumberTag"),identifier:"NumberTag",title:"Number Tag",description:"Typed EXIF tag with numeric value."}),iR=iE(R.Array(R.Number)).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/NumberArrayTag"),identifier:"NumberArrayTag",title:"Number Array Tag",description:"Typed EXIF tag with array of numbers."}),iD=iE(R.Array(R.String)).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/StringArrayTag"),identifier:"StringArrayTag",title:"String Array Tag",description:"Typed EXIF tag with array of strings."}),iN=iE(R.String).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/StringTag"),identifier:"StringTag",title:"String Tag",description:"Typed EXIF tag with string value."}),iL=ik.BS.Struct({description:R.String,value:R.Union(R.String,R.Number)}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/ValueTag"),identifier:"ValueTag",title:"Value Tag",description:"Generic EXIF tag with a string or numeric value."}),iO=ik.BS.Struct({value:R.Literal("tiff","jpeg","png","heic","avif","webp","gif"),description:R.Literal("TIFF","JPEG","PNG","HEIC","AVIF","WebP","GIF")}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/FileTypeTag"),identifier:"FileTypeTag",title:"File Type Tag",description:"File container/codec identification reported by the reader."}),iK=ik.BS.Struct({fileType:R.optional(R.Union(iO,R.Literal("TIFF","JPEG","PNG","HEIC","AVIF","WebP","GIF"))).pipe(R.fromKey("FileType")),bitsPerSample:R.optional(iB).pipe(R.fromKey("Bits Per Sample")),height:R.optional(iB).pipe(R.fromKey("Image Height")),width:R.optional(iB).pipe(R.fromKey("Image Width")),colorComponents:R.optional(iB).pipe(R.fromKey("Color Components")),subsampling:R.optional(iA).pipe(R.fromKey("Subsampling"))}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/FileTags"),identifier:"FileTags",title:"File Tags",description:"Basic file-level properties from container headers (dimensions, bit depth, subsampling, etc.)."}),iG=ik.BS.Struct({value:R.Number,description:R.Literal("None","inches","cm","Unknown")}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/JfifResolutionUnitTag"),identifier:"JfifResolutionUnitTag",title:"Jfif Resolution Unit Tag",description:"Resolution unit for JFIF (e.g., inches for DPI, centimeters for DPCM)."}),ij=ik.BS.Struct({value:R.Union(R.instanceOf(ArrayBuffer),R.instanceOf(SharedArrayBuffer),R.instanceOf(N.Buffer)),description:R.Literal("<24-bit RGB pixel data>")}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/JfifThumbnailTag"),identifier:"JfifThumbnailTag",title:"Jfif Thumbnail Tag",description:"Embedded JFIF thumbnail or raw RGB pixel data from the container."}),iz=ik.BS.Struct({jfifVersion:R.optional(iB).pipe(R.fromKey("JFIF Version")),resolutionUnit:R.optional(iG).pipe(R.fromKey("Resolution Unit")),xResolution:R.optional(iB).pipe(R.fromKey("XResolution")),yResolution:R.optional(iB).pipe(R.fromKey("YResolution")),jfifThumbnailWidth:R.optional(iB).pipe(R.fromKey("JFIF Thumbnail Width")),jfifThumbnailHeight:R.optional(iB).pipe(R.fromKey("JFIF Thumbnail Height")),jfifThumbnail:R.optional(ij).pipe(R.fromKey("JFIF Thumbnail"))}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/JfifTags"),identifier:"JfifTags",title:"JFIF Tags",description:"JFIF segment fields including resolution and embedded thumbnail metadata."}),iV=ik.BS.Struct({value:R.Number,description:R.Literal("Grayscale","RGB","Palette","Grayscale with Alpha","RGB with Alpha","Unknown")}),i$=ik.BS.Struct({value:R.Number,description:R.Literal("Deflate/Inflate","Unknown")}),iq=ik.BS.Struct({value:R.Number,description:R.Literal("Adaptive","Unknown")}),iW=ik.BS.Struct({value:R.Number,description:R.Literal("Noninterlaced","Adam7 Interlace","Unknown")}),i_=ik.BS.Struct({imageWidth:R.optional(iB).pipe(R.fromKey("Image Width")),imageHeight:R.optional(iB).pipe(R.fromKey("Image Height")),bitDepth:R.optional(iB).pipe(R.fromKey("Bit Depth")),colorType:R.optional(iV).pipe(R.fromKey("Color Type")),compression:R.optional(i$).pipe(R.fromKey("Compression")),filter:R.optional(iq).pipe(R.fromKey("Filter")),interlace:R.optional(iW).pipe(R.fromKey("Interlace"))}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/PngFileTags"),identifier:"PngFileTags",title:"PNG File Tags",description:"IHDR-level PNG properties: dimensions, bit depth, color type, compression, filter, and interlace."}),iH=ik.BS.Struct({value:R.Number,description:R.Literal("meters","Unknown")}),iX=ik.BS.Struct({pixelsPerUnitX:R.optional(iB).pipe(R.fromKey("Pixels Per Unit X")),pixelsPerUnitY:R.optional(iB).pipe(R.fromKey("Pixels Per Unit Y")),pixelUnits:R.optional(iH).pipe(R.fromKey("Pixel Units")),modifyDate:R.optional(iw).pipe(R.fromKey("Modify Date"))}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/PngPhysTags"),identifier:"PngPhysTags",title:"PNG Physical Pixel Tags",description:"pHYs chunk-derived physical pixel density and units."}),iJ=ik.BS.Struct({description:R.String,value:R.Union(R.String,R.Number)}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/PngTag"),identifier:"PngTag",title:"PNG Tag",description:"Generic PNG tag with a textual description and a string or numeric value."}),iY=ik.BS.Struct({...i_.fields,...iX.fields},R.Record({key:R.String,value:iJ})).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/PngTags"),identifier:"PngTags",title:"PNG Tags",description:"Aggregate PNG metadata combining IHDR/pHYs fields and arbitrary tag map."}),iZ=ik.BS.Struct({description:R.String,value:R.String}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/PngTextTag"),identifier:"PngTextTag",title:"PNG Text Tag",description:"PNG textual metadata entry (tEXt/zTXt/iTXt)."}),iQ=R.Record({key:R.String,value:iZ}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/PngTextTags"),identifier:"PngTextTags",title:"PNG Text Tags",description:"Map of PNG textual metadata entries."}),i0=ik.BS.Struct({value:R.Literal(0,1),description:R.Literal("No","Yes")}),i1=ik.BS.Struct({value:R.Literal(0,1),description:R.Literal("No","Yes")}),i2=ik.BS.Struct({value:R.Number,description:R.String}),i4=ik.BS.Struct({alpha:R.optional(i0).pipe(R.fromKey("Alpha")),animation:R.optional(i1).pipe(R.fromKey("Animation")),imageWidth:R.optional(i2).pipe(R.fromKey("ImageWidth")),imageHeight:R.optional(i2).pipe(R.fromKey("ImageHeight"))}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/RiffTags"),identifier:"RiffTags",title:"RIFF/WEBP Tags",description:"Basic WEBP/RIFF properties such as alpha, animation, and dimensions."}),i3=ik.BS.Struct({value:R.Literal("87a","89a"),description:R.Literal("87a","89a")}),i5=ik.BS.Struct({value:R.Literal(0,1),description:R.Literal("No","Yes")}),i6=ik.BS.Struct({value:R.Number,description:R.String}),i8=ik.BS.Struct({value:R.Literal(1,2,3,4,5,6,7,8),description:R.String}),i7=ik.BS.Struct({gifVersion:i3.pipe(R.propertySignature,R.fromKey("GIF Version")),imageWidth:R.optional(i6).pipe(R.fromKey("Image Width")),imageHeight:R.optional(i6).pipe(R.fromKey("Image Height")),globalColorMap:R.optional(i5).pipe(R.fromKey("Global Color Map")),bitsPerPixel:R.optional(i8).pipe(R.fromKey("Bits Per Pixel")),colorResolutionDepth:R.optional(i8).pipe(R.fromKey("Color Resolution Depth"))}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/GifTags"),identifier:"GifTags",title:"GIF Tags",description:"Core GIF header and logical screen descriptor fields."}),i9=ik.BS.Struct({value:R.Union(R.String,R.Array(R.suspend(()=>i9)),R.Record({key:R.String,value:R.suspend(()=>i9)})),attributes:R.Record({key:R.String,value:R.String}),description:R.String}),ne=R.Record({key:R.String,value:i9}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/XmpTags"),identifier:"XmpTags",title:"XMP Tags",description:"Recursive map of XMP metadata entries (namespaced XML properties)."}),nt=ik.BS.Struct({Latitude:R.optional(R.Number),Longitude:R.optional(R.Number),Altitude:R.optional(R.Number)}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/GpsTags"),identifier:"GpsTags",title:"GPS Tags",description:"Simplified GPS coordinate values in decimal degrees and altitude in meters (if present)."}),ni=ik.BS.Struct({value:R.Array(R.Number),description:R.String}),nn=ik.BS.Struct({value:R.Number,description:R.String}),nr=ik.BS.Struct({ImageFlags:ni,ImageFormat:nn,ImageType:nn,ImageSize:nn,ImageOffset:nn,DependentImage1EntryNumber:nn,DependentImage2EntryNumber:nn,image:R.Union(R.instanceOf(ArrayBuffer),R.instanceOf(SharedArrayBuffer),R.instanceOf(N.Buffer)),base64:R.String}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/MPFImageTags"),identifier:"MPFImageTags",title:"MPF Image Tags",description:"Multi-Picture Format (MPF) entries for burst/live-photo auxiliary images."}),no=ik.BS.Struct({PathInformation:R.optional(iN),ClippingPathName:R.optional(iN)}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/PhotoshopTags"),identifier:"PhotoshopTags",title:"Photoshop Tags",description:"Subset of Photoshop-specific metadata embedded in images."}),na=ik.BS.Struct({value:R.Number,description:R.Literal("None","Rotate 90 CW","Rotate 180","Rotate 270 CW","Unknown")}),ns=ik.BS.Struct({AutoRotate:R.optional(na)}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/CanonTags"),identifier:"CanonTags",title:"Canon Maker Notes",description:"Common Canon-specific maker notes."}),nl=ik.BS.Struct({value:R.Array(R.Number),description:R.String}),np=ik.BS.Struct({value:R.Number,description:R.String}),nu=ik.BS.Struct({value:R.Number,description:R.Literal("Horizontal (normal)","Rotate 270 CW","Rotate 180","Rotate 90 CW","Upwards","Downwards","Unknown")}),nc=ik.BS.Struct({value:R.Number,description:R.String}),nf=ik.BS.Struct({PentaxVersion:R.optional(nl),PentaxModelID:R.optional(np),Orientation:R.optional(nu),RollAngle:R.optional(nc),PitchAngle:R.optional(nc)}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/PentaxTags"),identifier:"PentaxTags",title:"Pentax Maker Notes",description:"Common Pentax-specific maker notes (orientation, roll/pitch)."}),nd=ik.BS.Struct({value:R.Number,description:R.String}),nm=ik.BS.Struct({FocalLength35efl:R.optional(nd),ScaleFactorTo35mmEquivalent:R.optional(nd),FieldOfView:R.optional(nd)}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/CompositeTags"),identifier:"CompositeTags",title:"Composite Tags",description:"Calculated/composite properties derived from primary EXIF fields."}),ng=ik.BS.Struct({type:R.Literal("image/jpeg"),image:R.Union(R.instanceOf(ArrayBuffer),R.instanceOf(SharedArrayBuffer),R.instanceOf(N.Buffer)),base64:R.optional(R.String),Compression:R.optional(iU),XResolution:R.optional(iM),YResolution:R.optional(iM),ResolutionUnit:R.optional(iU),JPEGInterchangeFormat:R.optional(iU),JPEGInterchangeFormatLength:R.optional(iU),ImageWidth:R.optional(iU),ImageLength:R.optional(iU),YCbCrPositioning:R.optional(iU),Orientation:R.optional(iU),PhotometricInterpretation:R.optional(iU),StripOffsets:R.optional(iR),SamplesPerPixel:R.optional(iU),RowsPerStrip:R.optional(iU),StripByteCounts:R.optional(iR)}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/ThumbnailTags"),identifier:"ThumbnailTags",title:"Thumbnail Tags",description:"Embedded thumbnail metadata and pixel data (image/base64 may be removed by cleaners)."}),ny=R.Record({key:R.String,value:iL}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/IccTags"),identifier:"IccTags",title:"ICC Profile Tags",description:"ICC color profile key-value entries. Large binary fields may be cleaned by utilities."}),nh=ik.BS.Struct({interoperabilityIndex:R.optional(iD).pipe(R.fromKey("InteroperabilityIndex")),imageWidth:R.optional(iU).pipe(R.fromKey("ImageWidth")),imageLength:R.optional(iU).pipe(R.fromKey("ImageLength")),bitsPerSample:R.optional(iR).pipe(R.fromKey("BitsPerSample")),compression:R.optional(iU).pipe(R.fromKey("Compression")),photometricInterpretation:R.optional(iU).pipe(R.fromKey("PhotometricInterpretation")),documentName:R.optional(iD).pipe(R.fromKey("DocumentName")),imageDescription:R.optional(iD).pipe(R.fromKey("ImageDescription")),make:R.optional(iD).pipe(R.fromKey("Make")),model:R.optional(iD).pipe(R.fromKey("Model")),stripOffsets:R.optional(iR).pipe(R.fromKey("StripOffsets")),orientation:R.optional(iU).pipe(R.fromKey("Orientation")),samplesPerPixel:R.optional(iU).pipe(R.fromKey("SamplesPerPixel")),rowsPerStrip:R.optional(iU).pipe(R.fromKey("RowsPerStrip")),stripByteCounts:R.optional(iR).pipe(R.fromKey("StripByteCounts")),xResolution:R.optional(R.Union(iM,iB)).pipe(R.fromKey("XResolution")),yResolution:R.optional(R.Union(iM,iB)).pipe(R.fromKey("YResolution")),planarConfiguration:R.optional(iU).pipe(R.fromKey("PlanarConfiguration")),resolutionUnit:R.optional(iU).pipe(R.fromKey("ResolutionUnit")),transferFunction:R.optional(iR).pipe(R.fromKey("TransferFunction")),software:R.optional(iD).pipe(R.fromKey("Software")),dateTime:R.optional(iD).pipe(R.fromKey("DateTime")),artist:R.optional(iD).pipe(R.fromKey("Artist")),whitePoint:R.optional(iR).pipe(R.fromKey("WhitePoint")),primaryChromaticities:R.optional(iR).pipe(R.fromKey("PrimaryChromaticities")),jpegInterchangeFormat:R.optional(iU).pipe(R.fromKey("JPEGInterchangeFormat")),jpegInterchangeFormatLength:R.optional(iU).pipe(R.fromKey("JPEGInterchangeFormatLength")),yCbCrCoefficients:R.optional(iR).pipe(R.fromKey("YCbCrCoefficients")),yCbCrSubSampling:R.optional(iR).pipe(R.fromKey("YCbCrSubSampling")),yCbCrPositioning:R.optional(iU).pipe(R.fromKey("YCbCrPositioning")),referenceBlackWhite:R.optional(iR).pipe(R.fromKey("ReferenceBlackWhite")),copyright:R.optional(iD).pipe(R.fromKey("Copyright")),exifIfdPointer:R.optional(iU).pipe(R.fromKey("Exif IFD Pointer")),gpsInfoIfdPointer:R.optional(iU).pipe(R.fromKey("GPS Info IFD Pointer")),jfifVersion:R.optional(iB).pipe(R.fromKey("JFIF Version")),jfifResolutionUnit:R.optional(iG).pipe(R.fromKey("Resolution Unit")),jfifThumbnailWidth:R.optional(iB).pipe(R.fromKey("JFIF Thumbnail Width")),jfifThumbnailHeight:R.optional(iB).pipe(R.fromKey("JFIF Thumbnail Height")),jfifThumbnail:R.optional(ij).pipe(R.fromKey("JFIF Thumbnail")),exposureTime:R.optional(iM).pipe(R.fromKey("ExposureTime")),fNumber:R.optional(iM).pipe(R.fromKey("FNumber")),exposureProgram:R.optional(iU).pipe(R.fromKey("ExposureProgram")),spectralSensitivity:R.optional(iD).pipe(R.fromKey("SpectralSensitivity")),isoSpeedRatings:R.optional(R.Union(iU,iR)).pipe(R.fromKey("ISOSpeedRatings")),oecf:R.optional(R.Unknown).pipe(R.fromKey("OECF")),exifVersion:R.optional(iR).pipe(R.fromKey("ExifVersion")),dateTimeOriginal:R.optional(iD).pipe(R.fromKey("DateTimeOriginal")),dateTimeDigitized:R.optional(iD).pipe(R.fromKey("DateTimeDigitized")),componentsConfiguration:R.optional(iR).pipe(R.fromKey("ComponentsConfiguration")),compressedBitsPerPixel:R.optional(iM).pipe(R.fromKey("CompressedBitsPerPixel")),shutterSpeedValue:R.optional(iM).pipe(R.fromKey("ShutterSpeedValue")),apertureValue:R.optional(iM).pipe(R.fromKey("ApertureValue")),brightnessValue:R.optional(iM).pipe(R.fromKey("BrightnessValue")),exposureBiasValue:R.optional(iM).pipe(R.fromKey("ExposureBiasValue")),maxApertureValue:R.optional(iM).pipe(R.fromKey("MaxApertureValue")),subjectDistance:R.optional(iM).pipe(R.fromKey("SubjectDistance")),meteringMode:R.optional(iU).pipe(R.fromKey("MeteringMode")),lightSource:R.optional(iU).pipe(R.fromKey("LightSource")),flash:R.optional(iU).pipe(R.fromKey("Flash")),focalLength:R.optional(iM).pipe(R.fromKey("FocalLength")),subjectArea:R.optional(iR).pipe(R.fromKey("SubjectArea")),makerNote:R.optional(R.Unknown).pipe(R.fromKey("MakerNote")),userComment:R.optional(R.Unknown).pipe(R.fromKey("UserComment")),subSecTime:R.optional(iD).pipe(R.fromKey("SubSecTime")),subSecTimeOriginal:R.optional(iD).pipe(R.fromKey("SubSecTimeOriginal")),subSecTimeDigitized:R.optional(iD).pipe(R.fromKey("SubSecTimeDigitized")),flashpixVersion:R.optional(iR).pipe(R.fromKey("FlashpixVersion")),colorSpace:R.optional(iU).pipe(R.fromKey("ColorSpace")),pixelXDimension:R.optional(iU).pipe(R.fromKey("PixelXDimension")),pixelYDimension:R.optional(iU).pipe(R.fromKey("PixelYDimension")),relatedSoundFile:R.optional(iD).pipe(R.fromKey("RelatedSoundFile")),interoperabilityIfdPointer:R.optional(iU).pipe(R.fromKey("Interoperability IFD Pointer")),flashEnergy:R.optional(iU).pipe(R.fromKey("FlashEnergy")),spatialFrequencyResponse:R.optional(R.Unknown).pipe(R.fromKey("SpatialFrequencyResponse")),focalPlaneXResolution:R.optional(iM).pipe(R.fromKey("FocalPlaneXResolution")),focalPlaneYResolution:R.optional(iM).pipe(R.fromKey("FocalPlaneYResolution")),focalPlaneResolutionUnit:R.optional(iU).pipe(R.fromKey("FocalPlaneResolutionUnit")),subjectLocation:R.optional(iR).pipe(R.fromKey("SubjectLocation")),exposureIndex:R.optional(iM).pipe(R.fromKey("ExposureIndex")),sensingMethod:R.optional(iU).pipe(R.fromKey("SensingMethod")),fileSource:R.optional(iU).pipe(R.fromKey("FileSource")),sceneType:R.optional(iU).pipe(R.fromKey("SceneType")),cfaPattern:R.optional(R.Unknown).pipe(R.fromKey("CFAPattern")),customRendered:R.optional(iU).pipe(R.fromKey("CustomRendered")),exposureMode:R.optional(iU).pipe(R.fromKey("ExposureMode")),whiteBalance:R.optional(iU).pipe(R.fromKey("WhiteBalance")),digitalZoomRatio:R.optional(iM).pipe(R.fromKey("DigitalZoomRatio")),focalLengthIn35mmFilm:R.optional(iU).pipe(R.fromKey("FocalLengthIn35mmFilm")),sceneCaptureType:R.optional(iU).pipe(R.fromKey("SceneCaptureType")),gainControl:R.optional(iU).pipe(R.fromKey("GainControl")),contrast:R.optional(iU).pipe(R.fromKey("Contrast")),saturation:R.optional(iU).pipe(R.fromKey("Saturation")),sharpness:R.optional(iU).pipe(R.fromKey("Sharpness")),deviceSettingDescription:R.optional(R.Unknown).pipe(R.fromKey("DeviceSettingDescription")),subjectDistanceRange:R.optional(iU).pipe(R.fromKey("SubjectDistanceRange")),imageUniqueId:R.optional(iD).pipe(R.fromKey("ImageUniqueID")),lensMake:R.optional(iD).pipe(R.fromKey("LensMake")),lensModel:R.optional(iD).pipe(R.fromKey("LensModel")),offsetTime:R.optional(iD).pipe(R.fromKey("OffsetTime")),offsetTimeDigitized:R.optional(iD).pipe(R.fromKey("OffsetTimeDigitized")),offsetTimeOriginal:R.optional(iD).pipe(R.fromKey("OffsetTimeOriginal")),gpsHPositioningError:R.optional(iR).pipe(R.fromKey("GPSHPositioningError")),gpsVersionId:R.optional(iU).pipe(R.fromKey("GPSVersionID")),gpsLatitudeRef:R.optional(iD).pipe(R.fromKey("GPSLatitudeRef")),gpsLatitude:R.optional(iE(R.Tuple(R.Tuple(R.Number,R.Number),R.Tuple(R.Number,R.Number),R.Tuple(R.Number,R.Number)))).pipe(R.fromKey("GPSLatitude")),gpsLongitudeRef:R.optional(iD).pipe(R.fromKey("GPSLongitudeRef")),gpsLongitude:R.optional(iE(R.Tuple(R.Tuple(R.Number,R.Number),R.Tuple(R.Number,R.Number),R.Tuple(R.Number,R.Number)))).pipe(R.fromKey("GPSLongitude")),gpsAltitudeRef:R.optional(iU).pipe(R.fromKey("GPSAltitudeRef")),gpsAltitude:R.optional(iM).pipe(R.fromKey("GPSAltitude")),gpsTimeStamp:R.optional(iR).pipe(R.fromKey("GPSTimeStamp")),gpsSatellites:R.optional(iD).pipe(R.fromKey("GPSSatellites")),gpsStatus:R.optional(iD).pipe(R.fromKey("GPSStatus")),gpsMeasureMode:R.optional(iD).pipe(R.fromKey("GPSMeasureMode")),gpsDop:R.optional(iU).pipe(R.fromKey("GPSDOP")),gpsSpeedRef:R.optional(iD).pipe(R.fromKey("GPSSpeedRef")),gpsSpeed:R.optional(iU).pipe(R.fromKey("GPSSpeed")),gpsTrackRef:R.optional(iD).pipe(R.fromKey("GPSTrackRef")),gpsTrack:R.optional(iU).pipe(R.fromKey("GPSTrack")),gpsImgDirectionRef:R.optional(iD).pipe(R.fromKey("GPSImgDirectionRef")),gpsImgDirection:R.optional(iM).pipe(R.fromKey("GPSImgDirection")),gpsMapDatum:R.optional(iD).pipe(R.fromKey("GPSMapDatum")),gpsDestLatitudeRef:R.optional(iD).pipe(R.fromKey("GPSDestLatitudeRef")),gpsDestLatitude:R.optional(iR).pipe(R.fromKey("GPSDestLatitude")),gpsDestLongitudeRef:R.optional(iD).pipe(R.fromKey("GPSDestLongitudeRef")),gpsDestLongitude:R.optional(iR).pipe(R.fromKey("GPSDestLongitude")),gpsDestBearingRef:R.optional(iD).pipe(R.fromKey("GPSDestBearingRef")),gpsDestBearing:R.optional(iU).pipe(R.fromKey("GPSDestBearing")),gpsDestDistanceRef:R.optional(iD).pipe(R.fromKey("GPSDestDistanceRef")),gpsDestDistance:R.optional(iU).pipe(R.fromKey("GPSDestDistance")),gpsProcessingMethod:R.optional(R.Unknown).pipe(R.fromKey("GPSProcessingMethod")),gpsAreaInformation:R.optional(R.Unknown).pipe(R.fromKey("GPSAreaInformation")),gpsDateStamp:R.optional(iD).pipe(R.fromKey("GPSDateStamp")),gpsDifferential:R.optional(iU).pipe(R.fromKey("GPSDifferential")),mpfVersion:R.optional(iR).pipe(R.fromKey("MPFVersion")),numberOfImages:R.optional(iU).pipe(R.fromKey("NumberOfImages")),mpEntry:R.optional(iR).pipe(R.fromKey("MPEntry")),imageUidList:R.optional(iR).pipe(R.fromKey("ImageUIDList")),totalFrames:R.optional(iU).pipe(R.fromKey("TotalFrames")),images:R.optional(R.Array(nr)).pipe(R.fromKey("Images")),modelVersion:R.optional(iR).pipe(R.fromKey("Model Version")),destination:R.optional(iR).pipe(R.fromKey("Destination")),fileFormat:R.optional(iR).pipe(R.fromKey("File Format")),fileFormatVersion:R.optional(iR).pipe(R.fromKey("File Format Version")),serviceIdentifier:R.optional(iR).pipe(R.fromKey("Service Identifier")),envelopeNumber:R.optional(iR).pipe(R.fromKey("Envelope Number")),productId:R.optional(iR).pipe(R.fromKey("Product ID")),envelopePriority:R.optional(iR).pipe(R.fromKey("Envelope Priority")),dateSent:R.optional(iR).pipe(R.fromKey("Date Sent")),timeSent:R.optional(iR).pipe(R.fromKey("Time Sent")),codedCharacterSet:R.optional(iR).pipe(R.fromKey("Coded Character Set")),uno:R.optional(iR).pipe(R.fromKey("UNO")),armIdentifier:R.optional(iR).pipe(R.fromKey("ARM Identifier")),armVersion:R.optional(iR).pipe(R.fromKey("ARM Version")),recordVersion:R.optional(iR).pipe(R.fromKey("Record Version")),objectTypeReference:R.optional(iR).pipe(R.fromKey("Object Type Reference")),objectAttributeReference:R.optional(iR).pipe(R.fromKey("Object Attribute Reference")),objectName:R.optional(iR).pipe(R.fromKey("Object Name")),editStatus:R.optional(iR).pipe(R.fromKey("Edit Status")),editorialUpdate:R.optional(iR).pipe(R.fromKey("Editorial Update")),urgency:R.optional(iR).pipe(R.fromKey("Urgency")),subjectReference:R.optional(iR).pipe(R.fromKey("Subject Reference")),category:R.optional(iR).pipe(R.fromKey("Category")),supplementalCategory:R.optional(iR).pipe(R.fromKey("Supplemental Category")),fixtureIdentifier:R.optional(iR).pipe(R.fromKey("Fixture Identifier")),keywords:R.optional(R.Union(iR,R.Array(iR))).pipe(R.fromKey("Keywords")),contentLocationCode:R.optional(iR).pipe(R.fromKey("Content Location Code")),contentLocationName:R.optional(iR).pipe(R.fromKey("Content Location Name")),releaseDate:R.optional(iR).pipe(R.fromKey("Release Date")),releaseTime:R.optional(iR).pipe(R.fromKey("Release Time")),expirationDate:R.optional(iR).pipe(R.fromKey("Expiration Date")),expirationTime:R.optional(iR).pipe(R.fromKey("Expiration Time")),specialInstructions:R.optional(iR).pipe(R.fromKey("Special Instructions")),actionAdvised:R.optional(iR).pipe(R.fromKey("Action Advised")),referenceService:R.optional(iR).pipe(R.fromKey("Reference Service")),referenceDate:R.optional(iR).pipe(R.fromKey("Reference Date")),referenceNumber:R.optional(iR).pipe(R.fromKey("Reference Number")),dateCreated:R.optional(iR).pipe(R.fromKey("Date Created")),timeCreated:R.optional(iR).pipe(R.fromKey("Time Created")),digitalCreationDate:R.optional(iR).pipe(R.fromKey("Digital Creation Date")),digitalCreationTime:R.optional(iR).pipe(R.fromKey("Digital Creation Time")),originatingProgram:R.optional(iR).pipe(R.fromKey("Originating Program")),programVersion:R.optional(iR).pipe(R.fromKey("Program Version")),objectCycle:R.optional(iR).pipe(R.fromKey("Object Cycle")),byline:R.optional(iR).pipe(R.fromKey("By-line")),bylineTitle:R.optional(iR).pipe(R.fromKey("By-line Title")),city:R.optional(iR).pipe(R.fromKey("City")),subLocation:R.optional(iR).pipe(R.fromKey("Sub-location")),provinceState:R.optional(iR).pipe(R.fromKey("Province/State")),countryPrimaryLocationCode:R.optional(iR).pipe(R.fromKey("Country/Primary Location Code")),countryPrimaryLocationName:R.optional(iR).pipe(R.fromKey("Country/Primary Location Name")),originalTransmissionReference:R.optional(iR).pipe(R.fromKey("Original Transmission Reference")),headline:R.optional(iR).pipe(R.fromKey("Headline")),credit:R.optional(iR).pipe(R.fromKey("Credit")),source:R.optional(iR).pipe(R.fromKey("Source")),copyrightNotice:R.optional(iR).pipe(R.fromKey("Copyright Notice")),contact:R.optional(iR).pipe(R.fromKey("Contact")),captionAbstract:R.optional(iR).pipe(R.fromKey("Caption/Abstract")),writerEditor:R.optional(iR).pipe(R.fromKey("Writer/Editor")),rasterizedCaption:R.optional(iR).pipe(R.fromKey("Rasterized Caption")),imageType:R.optional(iR).pipe(R.fromKey("Image Type")),imageOrientation:R.optional(iR).pipe(R.fromKey("Image Orientation")),languageIdentifier:R.optional(iR).pipe(R.fromKey("Language Identifier")),audioType:R.optional(iR).pipe(R.fromKey("Audio Type")),audioSamplingRate:R.optional(iR).pipe(R.fromKey("Audio Sampling Rate")),audioSamplingResolution:R.optional(iR).pipe(R.fromKey("Audio Sampling Resolution")),audioDuration:R.optional(iR).pipe(R.fromKey("Audio Duration")),audioOutcue:R.optional(iR).pipe(R.fromKey("Audio Outcue")),shortDocumentId:R.optional(iR).pipe(R.fromKey("Short Document ID")),uniqueDocumentId:R.optional(iR).pipe(R.fromKey("Unique Document ID")),ownerId:R.optional(iR).pipe(R.fromKey("Owner ID")),objectDataPreviewFileFormat:R.optional(iR).pipe(R.fromKey("ObjectData Preview File Format")),record2Destination:R.optional(iR).pipe(R.fromKey("Record 2 destination")),objectDataPreviewFileFormatVersion:R.optional(iR).pipe(R.fromKey("ObjectData Preview File Format Version")),objectDataPreviewData:R.optional(iR).pipe(R.fromKey("ObjectData Preview Data")),sizeMode:R.optional(iR).pipe(R.fromKey("Size Mode")),maxSubfileSize:R.optional(iR).pipe(R.fromKey("Max Subfile Size")),objectDataSizeAnnounced:R.optional(iR).pipe(R.fromKey("ObjectData Size Announced")),maximumObjectDataSize:R.optional(iR).pipe(R.fromKey("Maximum ObjectData Size")),thumbnail:R.optional(ng).pipe(R.fromKey("Thumbnail"))}),nb=ik.BS.Struct({file:R.optional(iK),jfif:R.optional(iz),pngFile:R.optional(i_),pngText:R.optional(iQ),png:R.optional(iY),exif:R.optional(nh),iptc:R.optional(nh),xmp:R.optional(R.Union(ik.BS.Json,ik.BS.Struct({_raw:R.String},R.Record({key:R.String,value:i9})),R.String)),icc:R.optional(ny),riff:R.optional(i4),gif:R.optional(i7),Thumbnail:R.optional(ng),gps:R.optional(nt),photoshop:R.optional(no),makerNotes:R.optional(ik.BS.Struct({...ns.fields,...nf.fields})),composite:R.optional(nm)}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/ExpandedTags"),identifier:"ExpandedTags",title:"Expanded EXIF Metadata",description:"High-level structure compatible with ExifReader's expanded output across multiple containers."});ik.BS.Struct({...ne.fields,...ny.fields,...iY.fields,...i4.fields,...i7.fields,...no.fields,...ns.fields,...nf.fields,...nm.fields,Thumbnail:R.optional(ng),Images:R.optional(R.Array(nr))}).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifTags/Tags"),identifier:"Tags",title:"Combined Tags",description:"Flattened union of container-specific tag maps for convenience."});let nS=["base64","image","thumbnailImage","preview","previewImage","rawImage","blob","buffer","data","binaryData","iccProfile","colorProfile","embeddedImage","makerNoteImage"],nx=e=>{let t=e.toLowerCase();return"thumbnail"!==t&&(nS.some(e=>t.includes(e.toLowerCase()))||t.endsWith("image")||t.includes("base64"))},nv=e=>e instanceof ArrayBuffer||e instanceof Uint8Array?e.byteLength>1024:"string"==typeof e&&(e.length>1024||/^[A-Za-z0-9+/]+=*$/.test(e)&&e.length>100),nT=e=>{let t={};for(let[i,n]of Object.entries(e))!nx(i)&&(nv(n)||(n&&"object"==typeof n&&!Array.isArray(n)?t[i]=nT(n):Array.isArray(n)?t[i]=n.filter(e=>!nv(e)).map(e=>e&&"object"==typeof e&&!Array.isArray(e)?nT(e):e):t[i]=n));return t},nP=e=>e&&"object"==typeof e?nT(e):e,nI=e=>{let t={...e};if(U.isNotNullable(t.icc)&&"object"==typeof t.icc&&(t={...t,icc:D.omit("base64","data","buffer")(t.icc)}),U.isNotNullable(t.xmp)&&"object"==typeof t.xmp&&(t={...t,xmp:D.omit("base64","rawXml","data")(t.xmp)}),U.isNotNullable(t.iptc)&&"object"==typeof t.iptc&&(t={...t,iptc:D.omit("base64","data","buffer")(t.iptc)}),U.isNotNullable(t.thumbnail)&&"object"==typeof t.thumbnail&&(t={...t,thumbnail:D.omit("image","base64","blob","buffer")(t.thumbnail)}),U.isNotNullable(t.exif)&&"object"==typeof t.exif){let e=nT(t.exif);t={...t,exif:e}}return t};class nC extends nb.annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/exif-metadata/ExifMetadata"),identifier:"ExifMetadata",title:"EXIF Metadata",description:"EXIF metadata extracted from an image file."}){static cleanExifData=nP;static omitKnownLargeFields=nI;static isLargeDataField=nx;static isLargeDataValue=nv;static omitLargeDataFromObject=nT;static extractMetadata=M.fn("extractMetadata")(function*(e){let t=yield*iF(e),i=nP((yield*M.try({try:()=>ic(t,{expanded:!0}),catch:t=>new ih({message:"Could not parse EXIF data",cause:t,fileName:e.name,fileType:e.type,fileSize:e.size,phase:"parse"})})));return yield*R.decodeUnknown(nC)(i).pipe(M.mapError(t=>new ih({message:"Could not decode EXIF data to schema",cause:t,fileName:e.name,fileType:e.type,fileSize:e.size,phase:"decode"})))})}var nF=ik,nk=R;class nB extends nF.BS.Class("FileAttributes")({size:nk.NonNegativeInt,type:nF.BS.MimeType,lastModifiedDate:nF.BS.DateFromAllAcceptable,lastModified:nF.BS.DateFromAllAcceptable,name:nk.NonEmptyString,webkitRelativePath:nk.optional(nk.NonEmptyString),relativePath:nk.optional(nk.NonEmptyString),path:nk.optional(nk.NonEmptyString)},{schemaId:Symbol.for("@beep/files-domain/value-objects/FileAttributes"),identifier:"FileAttributes",title:"FileAttributes",description:"File attributes schema"}){}var nw=R;class nA extends nw.declare(e=>e instanceof File).annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/FileInstance"),identifier:"FileInstance",title:"FileInstance",description:"Base file instance schema"}){}let nE=ik.BS.stringLiteralKit("B","kB","MB","GB","TB","PB","EB","ZB","YB");class nM extends nE.Schema.annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/ByteUnit"),identifier:"ByteUnit",title:"Byte Unit — SI (Decimal, base‑10)",description:"Byte units using SI decimal prefixes for file sizes: B, kB, MB, GB, TB, PB, EB, ZB, YB. Uses powers of 10 (1 kB = 1,000 B; 1 MB = 1,000,000 B). Prefer for storage/device specs and end‑user file size displays. Case‑sensitive: 'B' means byte (8 bits)."}){static Options=nE.Options;static Enum=nE.Enum}let nU=ik.BS.stringLiteralKit("B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB");class nR extends nU.Schema.annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/BiByteUnit"),identifier:"BiByteUnit",title:"Byte Unit — IEC (Binary, base‑2)",description:"Byte units using IEC binary prefixes: B, KiB, MiB, GiB, TiB, PiB, EiB, ZiB, YiB. Uses powers of 2 (1 KiB = 1,024 B; 1 MiB = 1,024 KiB). Prefer for memory sizes and contexts requiring exact powers‑of‑two semantics. Case‑sensitive: 'B' means byte (8 bits)."}){static Options=nU.Options;static Enum=nU.Enum}let nD=ik.BS.stringLiteralKit("b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit");class nN extends nD.Schema.annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/BitUnit"),identifier:"BitUnit",title:"Bit Unit — SI (Decimal, base‑10)",description:"Bit units with SI decimal prefixes, commonly used for data rates: b, kbit, Mbit, Gbit, Tbit, Pbit, Ebit, Zbit, Ybit. Uses powers of 10 (1 kbit = 1,000 b). Case‑sensitive: 'b' means bit; 8 bits = 1 byte. Practical rule of thumb: MB/s ≈ Mb/s ÷ 8."}){static Options=nD.Options;static Enum=nD.Enum}let nL=ik.BS.stringLiteralKit("b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit");class nO extends nL.Schema.annotations({schemaId:Symbol.for("@beep/files-domain/value-objects/BiBitUnit"),identifier:"BiBitUnit",title:"Bit Unit — IEC (Binary, base‑2)",description:"Bit units with IEC binary prefixes: b, kibit, Mibit, Gibit, Tibit, Pibit, Eibit, Zibit, Yibit. Uses powers of 2 (1 kibit = 1,024 b). Less common than decimal bit units; use when exact base‑2 bit counts are required. Case‑sensitive: 'b' means bit."}){static Options=nL.Options;static Enum=nL.Enum}var nK=ik,nG=R,nj=R;class nz extends nj.Class("FileSignature")({sequence:nj.Array(nj.Union(nj.Number,nj.NonEmptyString)),offset:nj.optional(nj.Int.pipe(nj.greaterThan(0))),skippedBytes:nj.optional(nj.Array(nj.Int.pipe(nj.greaterThan(0)))),description:nj.optional(nj.NonEmptyString),compatibleExtensions:nj.optional(nj.NonEmptyArray(nj.String))},{schemaId:Symbol.for("@beep/files-domain/value-objects/file-types/FileSignature"),identifier:"FileSignature",title:"File Signature",description:"File signature"}){}class nV extends nG.Class("FileInfo")({extension:nK.BS.FileExtension,mimeType:nK.BS.MimeType,description:nG.NonEmptyString,signatures:nG.Array(nz)},{schemaId:Symbol.for("@beep/files-domain/value-objects/file-types/FileInfo"),identifier:"FileInfo",title:"File Info",description:"File information"}){}nG.Class("DetectedFileInfo")({extension:nK.BS.FileExtension,mimeType:nK.BS.MimeType,description:nG.String,signature:nz},{schemaId:Symbol.for("@beep/files-domain/value-objects/file-types/DetectedFileInfo"),identifier:"DetectedFileInfo",title:"Detected File Info",description:"File information detected by signature"});var n$=iy,nq=e.i(266417);function nW(e,t=32){let i=e instanceof ArrayBuffer?new Uint8Array(e):e,n=[];if(U.or(U.and(nq.isArray,ik.BS.ArrayOfNumbers.is),U.or(ik.BS.ArrBuffer.is,ik.BS.Uint8Arr.is))(e))n=Array.from(i.slice(0,t));else throw TypeError(`Expected the \`file\` argument to be of type \`Array<number>\`, \`Uint8Array\`, or \`ArrayBuffer\`, got \`${typeof e}\``);if(!n.every(e=>U.and(U.isNumber,U.not(Number.isNaN))(e)))throw TypeError("File content contains illegal values");return n}function n_(e,t){let i=t.indexOf(".");return i>-1?n_(e[t.slice(0,i)],t.slice(i+1)):e[t]}function nH(e){let t=e.map(e=>String.fromCharCode(e)).join("");return t.includes("webm")?"webm":t.includes("matroska")?"mkv":void 0}function nX(e){return"ftypavif"===e.slice(4,12).map(e=>String.fromCharCode(e)).join("")}class nJ extends n$.TaggedClass("VideoTypes"){static AVI=nV.make({extension:"avi",mimeType:"video/x-msvideo",description:"Audio Video Interleave video format",signatures:[nz.make({sequence:[82,73,70,70,65,86,73,32,76,73,83,84],skippedBytes:[4,5,6,7]})]});static FLV=nV.make({extension:"flv",mimeType:"video/x-flv",description:"Flash Video file",signatures:[nz.make({sequence:[70,76,86,1]}),nz.make({sequence:[102,116,121,112,77,52,86,32],description:"ISO Media, MPEG v4 system, or iTunes AVC-LC file",offset:4,compatibleExtensions:["mp4","m4v"]})]});static M4V=nV.make({extension:"m4v",mimeType:"video/x-m4v",description:"Apple's video container format, very similar to MP4",signatures:[nz.make({sequence:[102,116,121,112,109,112,52,50],description:"MPEG-4 video | QuickTime file",offset:4,compatibleExtensions:["mp4"]}),nz.make({sequence:[102,116,121,112,77,52,86,32],description:"ISO Media, MPEG v4 system, or iTunes AVC-LC file",offset:4,compatibleExtensions:["mp4","flv"]})]});static MKV=nV.make({extension:"mkv",mimeType:"video/x-matroska",description:"MKV (Matroska Video) is a flexible, open-source media container format that supports multiple audio, video, and subtitle streams in a single file",signatures:[nz.make({sequence:[26,69,223,163],description:"EBML identifier",compatibleExtensions:["webm","mka","mks","mk3d"]})]});static MOV=nV.make({extension:"mov",mimeType:"video/quicktime",description:"QuickTime movie file",signatures:[nz.make({sequence:[102,116,121,112,113,116,32,32],offset:4}),nz.make({sequence:[109,111,111,118],offset:4})]});static MP4=nV.make({extension:"mp4",mimeType:"video/mp4",description:"A multimedia container format widely used for storing audio, video, and other data, and is known for its high compression efficiency and compatibility with many devices",signatures:[nz.make({sequence:[102,116,121,112,77,83,78,86],description:"MPEG-4 video file",offset:4}),nz.make({sequence:[102,116,121,112,105,115,111,109],description:"ISO Base Media file (MPEG-4) v1",offset:4}),nz.make({sequence:[102,116,121,112,77,52,86,32],description:"ISO Media, MPEG v4 system, or iTunes AVC-LC file",offset:4,compatibleExtensions:["m4v","flv"]})]});static OGG=nV.make({extension:"ogg",mimeType:"video/ogg",description:"Ogg Vorbis Codec compressed Multimedia file",signatures:[nz.make({sequence:[79,103,103,83,0,2,0,0,0,0,0,0,0,0],compatibleExtensions:["oga","ogv","ogx"]})]});static SWF=nV.make({extension:"swf",mimeType:"application/x-shockwave-flash",description:"SWF (Shockwave Flash) is a file format for multimedia, vector graphics, and ActionScript, used for creating and delivering animations, games, and other interactive web-based content",signatures:[nz.make({sequence:[67,87,83],description:"Macromedia Shockwave Flash player file (zlib compressed, SWF 6 and later)"}),nz.make({sequence:[70,87,83],description:"Macromedia Shockwave Flash player file (uncompressed)"}),nz.make({sequence:[90,87,83],description:"Macromedia Shockwave Flash player file (uncompressed)"})]});static WEBM=nV.make({extension:"webm",mimeType:"video/webm",description:"WebM is a royalty-free, open-source media file format optimized for web delivery, using efficient VP8 video and Vorbis audio codecs",signatures:[nz.make({sequence:[26,69,223,163],description:"EBML identifier",compatibleExtensions:["mkv"]})]})}class nY{static BLEND=nV.make({extension:"blend",mimeType:"application/x-blender",description:"Blender File Format",signatures:[nz.make({sequence:[66,76,69,78,68,69,82]})]});static DOC=nV.make({extension:"doc",mimeType:"application/msword",description:"Old Microsoft Word documents",signatures:[nz.make({sequence:[208,207,17,224,161,177,26,225],compatibleExtensions:["xls","ppt","msi","msg","dot","pps","xla","wiz"],description:"An Object Linking and Embedding (OLE) Compound File (CF) (i.e., OLECF) file format, known as Compound Binary File format by Microsoft, used by Microsoft Office 97-2003 applications"}),nz.make({sequence:[219,165,45,0],description:"Microsoft Word 2.0 file format"})]});static ELF=nV.make({extension:"elf",mimeType:"application/x-executable",description:"Executable and Linking Format executable file (Linux/Unix)",signatures:[nz.make({sequence:[127,69,76,70]})]});static EXE=nV.make({extension:"exe",mimeType:"application/x-msdownload",description:"Windows/DOS executable file and its descendants",signatures:[nz.make({sequence:[77,90],compatibleExtensions:["acm","ax","cpl","com","dll","drv","efi","fon","iec","ime","mui","ocx","olb","pif","qts","qtx","rs","sys","scr","tsp","vbx","vxd"]}),nz.make({sequence:[90,77],description:"DOS ZM executable (rare)"})]});static INDD=nV.make({extension:"indd",mimeType:"application/x-indesign",description:"Adobe InDesign document",signatures:[nz.make({sequence:[6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29],compatibleExtensions:["indt"]})]});static MACHO=nV.make({extension:"macho",mimeType:"application/x-mach-binary",description:"Apple OS X ABI Mach-O binary file",signatures:[nz.make({sequence:[254,237,250,206],description:"32-bit"}),nz.make({sequence:[206,250,237,254],description:"32-bit, where target system has reverse byte ordering from host running compiler"}),nz.make({sequence:[254,237,250,207],description:"64-bit"}),nz.make({sequence:[207,250,237,254],description:"64-bit, where target system has reverse byte ordering from host running compiler"}),nz.make({sequence:[202,254,186,190],description:"Mach-O Fat Binary"})]});static PDF=nV.make({extension:"pdf",mimeType:"application/pdf",description:"Portable Document Format",signatures:[nz.make({sequence:[37,80,68,70,45]})]});static ORC=nV.make({extension:"orc",mimeType:"application/x-orc",description:"Apache ORC (Optimized Row Columnar) file format for columnar storage",signatures:[nz.make({sequence:[79,82,67]})]});static PARQUET=nV.make({extension:"parquet",mimeType:"application/vnd.apache.parquet",description:"Apache Parquet file format for columnar storage",signatures:[nz.make({sequence:[80,65,82,49]})]});static PS=nV.make({extension:"ps",mimeType:"application/postscript",description:"PostScript document",signatures:[nz.make({sequence:[37,33,80,83]})]});static RTF=nV.make({extension:"rtf",mimeType:"application/rtf",description:"Rich Text Format word processing file",signatures:[nz.make({sequence:[123,92,114,116,102,49]})]});static SQLITE=nV.make({extension:"sqlite",mimeType:"application/x-sqlite3",description:"SQLite database file",signatures:[nz.make({sequence:[83,81,76,105,116,101,32,102,111,114,109,97,116,32,51,0]})]});static STL=nV.make({extension:"stl",mimeType:"application/sla",description:"ASCII STL (STereoLithography) file for 3D printing",signatures:[nz.make({sequence:[115,111,108,105,100]})]});static TTF=nV.make({extension:"ttf",mimeType:"application/x-font-ttf",description:"TrueType font file",signatures:[nz.make({sequence:[116,114,117,101,0]}),nz.make({sequence:[0,1,0,0,0],compatibleExtensions:["tte, dfont"]})]});static PCAP=nV.make({extension:"pcap",mimeType:"application/vnd.tcpdump.pcap",description:"Libpcap File Format",signatures:[nz.make({sequence:[212,195,178,161]}),nz.make({sequence:[77,60,178,161],description:"Nanosecond resolution"})]})}class nZ extends n$.TaggedClass("FileInfo"){static AVIF=nV.make({extension:"avif",mimeType:"image/avif",description:"Alliance for Open Media (AOMedia) Video 1 (AV1) Image File",signatures:[nz.make({sequence:[0,0,0]})]});static BMP=nV.make({extension:"bmp",mimeType:"image/bmp",description:"A bitmap format used mostly in Windows",signatures:[nz.make({sequence:[66,77],compatibleExtensions:["dib"]})]});static BPG=nV.make({extension:"bpg",mimeType:"image/bpg",description:"Better Portable Graphics image format",signatures:[nz.make({sequence:[66,80,71,251]})]});static CR2=nV.make({extension:"cr2",mimeType:"image/x-canon-cr2",description:"Canon digital camera RAW file",signatures:[nz.make({sequence:[73,73,42,0,16,0,0,0,67,82]})]});static EXR=nV.make({extension:"exr",mimeType:"image/x-exr",description:"OpenEXR bitmap image format",signatures:[nz.make({sequence:[118,47,49,1]})]});static GIF=nV.make({extension:"gif",mimeType:"image/gif",description:"Image file encoded in the Graphics Interchange Format (GIF)",signatures:[nz.make({sequence:[71,73,70,56,55,97]}),nz.make({sequence:[71,73,70,56,57,97]})]});static HEIC=nV.make({extension:"heic",mimeType:"image/heic",description:"A variant of the HEIF (High Efficiency Image Format) that store images on the latest Apple devices.",signatures:[nz.make({sequence:[102,116,121,112,104,101,105,99],offset:4}),nz.make({sequence:[102,116,121,112,109],offset:4})]});static ICO=nV.make({extension:"ico",mimeType:"image/x-icon",description:"Computer icon encoded in ICO file format",signatures:[nz.make({sequence:[0,0,1,0],compatibleExtensions:["spl"]})]});static JPEG=nV.make({extension:"jpeg",mimeType:"image/jpeg",description:"JPEG (Joint Photographic Experts Group) is a widely used lossy image compression format.",signatures:[nz.make({sequence:[255,216,255,225,69,120,105,102,0],skippedBytes:[4,5],description:"Digital camera JPG using Exchangeable Image File Format (EXIF)"}),nz.make({sequence:[255,216,255,232,83,80,73,70,70,0],skippedBytes:[4,5],description:"Still Picture Interchange File Format (SPIFF)"}),nz.make({sequence:[255,216,255,224,0,16,74,70,73,70,0,0],description:"JPEG raw or in the JFIF or Exif file format"}),nz.make({sequence:[255,216,255,238],description:"JPEG raw or in the JFIF or Exif file format"}),nz.make({sequence:[255,216,255,225,69,120,105,102,0,0],skippedBytes:[4,5],description:"JPEG raw or in the JFIF or Exif file format"}),nz.make({sequence:[255,216,255,224,74,70,73,70,0],skippedBytes:[4,5],description:"JPEG/JFIF graphics file",compatibleExtensions:["jfif","jpe"]}),nz.make({sequence:[255,216,255,224],description:"JPEG raw or in the JFIF or Exif file format"}),nz.make({sequence:[255,216],description:"Generic JPEGimage file",compatibleExtensions:["jpe"]})]});static PBM=nV.make({extension:"pbm",mimeType:"image/x-portable-bitmap",description:"PBM (Portable Bitmap) is a simple monochrome bitmap image format that uses plain text ASCII characters to represent binary image data",signatures:[nz.make({sequence:[80,49,10],description:"Portable bitmap ASCII"}),nz.make({sequence:[80,52,10],description:"Portable bitmap binary"})]});static PGM=nV.make({extension:"pgm",mimeType:"image/x-portable-graymap",description:"PGM (Portable Graymap) is a simple grayscale image format that uses ASCII text characters to represent binary image data.",signatures:[nz.make({sequence:[80,50,10],description:"Portable Gray Map ASCII"}),nz.make({sequence:[80,53,10],description:"Portable Gray Map binary"})]});static PNG=nV.make({extension:"png",mimeType:"image/png",description:"PNG (Portable Network Graphics) is a lossless image compression format that supports a wide range of color depths and transparency and is widely used for high-quality graphics.",signatures:[nz.make({sequence:[137,80,78,71,13,10,26,10]})]});static PPM=nV.make({extension:"ppm",mimeType:"image/x-portable-pixmap",description:"PPM (Portable Pixmap) is a simple color image format in the Portable Network Graphics (PNG) suite.",signatures:[nz.make({sequence:[80,51,10],description:"Portable Pixmap ASCII"}),nz.make({sequence:[80,54,10],description:"Portable Pixmap binary"})]});static PSD=nV.make({extension:"psd",mimeType:"image/vnd.adobe.photoshop",description:"PSD (Photoshop Document) is an Adobe Photoshop image file format",signatures:[nz.make({sequence:[56,66,80,83]})]});static WEBP=nV.make({extension:"webp",mimeType:"image/webp",description:"A modern image format that provides superior lossless and lossy compression for images on the web",signatures:[nz.make({sequence:[82,73,70,70,87,69,66,80],skippedBytes:[4,5,6,7]})]})}class nQ extends n$.TaggedClass("CompressedTypes"){static _7Z=nV.make({extension:"7z",mimeType:"application/x-7z-compressed",description:"7-Zip compressed file",signatures:[nz.make({sequence:[55,122,188,175,39,28]})]});static LZH=nV.make({extension:"lzh",mimeType:"application/x-lzh-compressed",description:"Compressed file using Lempel-Ziv and Haruyasu (LZH) compression algorithm",signatures:[nz.make({sequence:[45,104,108,48,45],description:"Lempel Ziv Huffman archive file Method 0 (No compression)",compatibleExtensions:["lha"]}),nz.make({sequence:[45,104,108,53,45],description:"Lempel Ziv Huffman archive file Method 5 (8KiB sliding window)",compatibleExtensions:["lha"]})]});static RAR=nV.make({extension:"rar",mimeType:"application/x-rar-compressed",description:"Roshal ARchive compressed archive file",signatures:[nz.make({sequence:[82,97,114,33,26,7,0],description:"Compressed archive v5.00 onwards"}),nz.make({sequence:[82,97,114,33,26,7,1,0],description:"Compressed archive v1.50 onwards"})]});static ZIP=nV.make({extension:"zip",mimeType:"application/zip",description:"Compressed archive file",signatures:[nz.make({sequence:[87,105,110,90,105,112],offset:29152,description:"WinZip compressed archive"}),nz.make({sequence:[80,75,3,4,20,0,1,0,99,0,0,0,0,0],description:"ZLock Pro encrypted ZIP"}),nz.make({sequence:[80,75,76,73,84,69],offset:30,description:"PKLITE compressed ZIP archive (see also PKZIP)"}),nz.make({sequence:[80,75,83,112,88],offset:526,description:"PKSFX self-extracting executable compressed file (see also PKZIP)"}),nz.make({sequence:[80,75,3,4],description:"PKZIP archive file - zip file format and multiple formats based on it",compatibleExtensions:["aar","apk","docx","epub","ipa","jar","kmz","maff","msix","odp","ods","odt","pk3","pk4","pptx","usdz","vsdx","xlsx","xpi"]}),nz.make({sequence:[80,75,5,6],description:"PKZIP empty archive file - zip file format and multiple formats based on it",compatibleExtensions:["aar","apk","docx","epub","ipa","jar","kmz","maff","msix","odp","ods","odt","pk3","pk4","pptx","usdz","vsdx","xlsx","xpi"]}),nz.make({sequence:[80,75,7,8],description:"PKZIP multivolume archive file - zip file format and multiple formats based on it",compatibleExtensions:["aar","apk","docx","epub","ipa","jar","kmz","maff","msix","odp","ods","odt","pk3","pk4","pptx","usdz","vsdx","xlsx","xpi"]})]})}class n0 extends n$.TaggedClass("AudioTypes"){static AAC=nV.make({extension:"aac",mimeType:"audio/aac",description:"Advanced Audio Coding (AAC) is an audio coding standard for lossy digital audio compression",signatures:[nz.make({sequence:[255,241],description:"MPEG-4 Advanced Audio Coding (AAC) Low Complexity (LC) audio file"}),nz.make({sequence:[255,249],description:"MPEG-2 Advanced Audio Coding (AAC) Low Complexity (LC) audio file"})]});static AMR=nV.make({extension:"amr",mimeType:"audio/amr",description:"Adaptive Multi-Rate ACELP (Algebraic Code Excited Linear Prediction) Codec, commonly audio format with GSM cell phones",signatures:[nz.make({sequence:[35,33,65,77,82]})]});static FLAC=nV.make({extension:"flac",mimeType:"audio/x-flac",description:"Free Lossless Audio Codec file",signatures:[nz.make({sequence:[102,76,97,67,0,0,0,34]})]});static M4A=nV.make({extension:"m4a",mimeType:"audio/x-m4a",description:"Apple Lossless Audio Codec file",signatures:[nz.make({sequence:[102,116,121,112,77,52,65,32],offset:4,compatibleExtensions:["aac"]},{disableValidation:!0})]});static MP3=nV.make({extension:"mp3",mimeType:"audio/mpeg",description:"A digital audio file format that uses compression to reduce file size while maintaining high quality sound",signatures:[nz.make({sequence:[255,251],description:"MPEG-1 Layer 3 file without an ID3 tag or with an ID3v1 tag (which is appended at the end of the file)"}),nz.make({sequence:[255,243],description:"MPEG-1 Layer 3 file without an ID3 tag or with an ID3v1 tag (which is appended at the end of the file)"}),nz.make({sequence:[255,242],description:"MPEG-1 Layer 3 file without an ID3 tag or with an ID3v1 tag (which is appended at the end of the file)"}),nz.make({sequence:[73,68,51],description:"MP3 file with an ID3v2 container"})]});static WAV=nV.make({extension:"wav",mimeType:"audio/wav",description:"Waveform Audio File Format",signatures:[nz.make({sequence:[82,73,70,70,87,65,86,69,102,109,116,32],skippedBytes:[4,5,6,7]})]})}let n1=[...ik.BS.FileExtensionKit.pick("m4v","flv","mp4","mkv","webm","avif","heic")];class n2 extends n$.TaggedClass("FileTypes"){static AAC=n0.AAC;static AMR=n0.AMR;static FLAC=n0.FLAC;static M4A=n0.M4A;static MP3=n0.MP3;static WAV=n0.WAV;static AVIF=nZ.AVIF;static BMP=nZ.BMP;static BPG=nZ.BPG;static CR2=nZ.CR2;static EXR=nZ.EXR;static GIF=nZ.GIF;static ICO=nZ.ICO;static JPEG=nZ.JPEG;static PBM=nZ.PBM;static PGM=nZ.PGM;static PNG=nZ.PNG;static PPM=nZ.PPM;static PSD=nZ.PSD;static WEBP=nZ.WEBP;static HEIC=nZ.HEIC;static AVI=nJ.AVI;static FLV=nJ.FLV;static M4V=nJ.M4V;static MKV=nJ.MKV;static MOV=nJ.MOV;static MP4=nJ.MP4;static OGG=nJ.OGG;static SWF=nJ.SWF;static WEBM=nJ.WEBM;static _7Z=nQ._7Z;static LZH=nQ.LZH;static RAR=nQ.RAR;static ZIP=nQ.ZIP;static BLEND=nY.BLEND;static DOC=nY.DOC;static ELF=nY.ELF;static EXE=nY.EXE;static INDD=nY.INDD;static MACHO=nY.MACHO;static ORC=nY.ORC;static PARQUET=nY.PARQUET;static PCAP=nY.PCAP;static PDF=nY.PDF;static PS=nY.PS;static RTF=nY.RTF;static SQLITE=nY.SQLITE;static STL=nY.STL;static TTF=nY.TTF;static getInfoByName(e){return n_(n2,e.toUpperCase())}static getSignaturesByName(e){let{signatures:t}=n_(n2,e.toUpperCase());return t}static detectSignature(e,t){for(let i of t){let t=!0,n=i.offset||0,r=0;for(let o=0;o<i.sequence.length;o++){if(i.skippedBytes?.includes(o)){r++;continue}if(e[n+o]!==i.sequence[o-r]){t=!1;break}}if(t)return i}}static detectTypeByAdditionalCheck(e,t){let i=t.map(e=>e.extension);if(i.some(e=>["m4v","flv","mp4","heic"].includes(e)))return i.includes("heic")&&rp(e)?"heic":rR(e)?"flv":rD(e)&&!rp(e)?"m4v":"mp4";if(i.some(e=>["mkv","webm"].includes(e))){let t=nH(e);return"mkv"===t&&rN(e)?"mkv":"webm"===t&&rj(e)?"webm":void 0}if(i.some(e=>["avif"].includes(e))&&nX(e))return"avif"}static detectBySignatures(e,t){for(let i of t){let t=0,n=!0,r=i.offset||0,o=i?.skippedBytes?i.sequence.length+i.skippedBytes.length:i.sequence.length;for(let a=0;a<o;a++){if(i.skippedBytes?.includes(a)){t++;continue}if(e[r+a]!==i.sequence[a-t]){n=!1;break}}if(n)return i}}static checkByFileType(e,t){if(Object.prototype.hasOwnProperty.call(n2,t.toUpperCase())){let i=n2.getSignaturesByName(t.toUpperCase());if(n2.detectSignature(e,i))return!0}return!1}}function n4(e,t){let i=nW(e);return!!n2.checkByFileType(i,"aac")||!t?.excludeSimilarTypes&&n6(i)}function n3(e){let t=nW(e);return n2.checkByFileType(t,"amr")}function n5(e){let t=nW(e);return n2.checkByFileType(t,"flac")}function n6(e){let t=nW(e);return n2.checkByFileType(t,"m4a")}function n8(e){let t=nW(e);return n2.checkByFileType(t,"mp3")}function n7(e){let t=nW(e);return n2.checkByFileType(t,"wav")}function n9(e){let t=nW(e);return n2.checkByFileType(t,"_7z")}function re(e){let t=nW(e);return n2.checkByFileType(t,"lzh")}function rt(e){let t=nW(e);return n2.checkByFileType(t,"rar")}function ri(e,t){let i=nW(e,t?.chunkSize||64);return n2.checkByFileType(i,"zip")}function rn(e){let t=nW(e);return!!n2.checkByFileType(t,"avif")&&nX(t)}function rr(e){let t=nW(e);return n2.checkByFileType(t,"bmp")}function ro(e){let t=nW(e);return n2.checkByFileType(t,"bpg")}function ra(e){let t=nW(e);return n2.checkByFileType(t,"cr2")}function rs(e){let t=nW(e);return n2.checkByFileType(t,"exr")}function rl(e){let t=nW(e);return n2.checkByFileType(t,"gif")}function rp(e){let t,i=nW(e);return!!n2.checkByFileType(i,"avif")&&(t=i.map(e=>String.fromCharCode(e)).join(""),["ftypheic","ftyphevc","ftypmif1","ftypmsf1"].some(e=>t.includes(e)))}function ru(e){let t=nW(e);return n2.checkByFileType(t,"ico")}function rc(e){let t=nW(e);return n2.checkByFileType(t,"jpeg")}function rf(e){let t=nW(e);return n2.checkByFileType(t,"pbm")}function rd(e){let t=nW(e);return n2.checkByFileType(t,"pgm")}function rm(e){let t=nW(e);return n2.checkByFileType(t,"png")}function rg(e){let t=nW(e);return n2.checkByFileType(t,"ppm")}function ry(e){let t=nW(e);return n2.checkByFileType(t,"psd")}function rh(e){let t=nW(e);return n2.checkByFileType(t,"webp")}function rb(e){let t=nW(e);return n2.checkByFileType(t,"blend")}function rS(e){let t=nW(e);return n2.checkByFileType(t,"elf")}function rx(e){let t=nW(e);return n2.checkByFileType(t,"exe")}function rv(e){let t=nW(e);return n2.checkByFileType(t,"macho")}function rT(e){let t=nW(e);return n2.checkByFileType(t,"indd")}function rP(e){let t=nW(e);return n2.checkByFileType(t,"orc")}function rI(e){let t=nW(e);return n2.checkByFileType(t,"parquet")}function rC(e){let t=nW(e);return n2.checkByFileType(t,"pdf")}function rF(e){let t=nW(e);return n2.checkByFileType(t,"ps")}function rk(e){let t=nW(e);return n2.checkByFileType(t,"rtf")}function rB(e){let t=nW(e);return n2.checkByFileType(t,"sqlite")}function rw(e){let t=nW(e);return n2.checkByFileType(t,"stl")}function rA(e){let t=nW(e);return n2.checkByFileType(t,"ttf")}function rE(e){let t=nW(e);return n2.checkByFileType(t,"doc")}function rM(e){let t=nW(e);return n2.checkByFileType(t,"pcap")}function rU(e){let t=nW(e);return n2.checkByFileType(t,"avi")}function rR(e){let t,i=nW(e);return!!n2.checkByFileType(i,"flv")&&(t=i.slice(0,3),new TextDecoder().decode(new Uint8Array(t)).includes("FLV"))}function rD(e){let t=nW(e);if(!n2.checkByFileType(t,"m4v"))return!1;let i=[102,116,121,112];for(let e=0;e<t.length-i.length;e++){let n=!0;for(let r=0;r<i.length;r++)if(t[e+r]!==i[r]){n=!1;break}if(n)return!0}return!1}function rN(e){let t=nW(e,64);return!!n2.checkByFileType(t,"mkv")&&"mkv"===nH(t)}function rL(e){let t=nW(e);return n2.checkByFileType(t,"mov")}function rO(e,t){let i=nW(e);return!!n2.checkByFileType(i,"mp4")||!t?.excludeSimilarTypes&&rD(i)}function rK(e){let t=nW(e);return n2.checkByFileType(t,"ogg")}function rG(e){let t=nW(e);return n2.checkByFileType(t,"swf")}function rj(e){let t=nW(e,64);return!!n2.checkByFileType(t,"webm")&&"webm"===nH(t)}function rz(e,t,i){let n=[];for(let e of[...new Set(t.map(e=>{let t=e.split(".").join("").toUpperCase();return"7Z"===t?`_${t}`:t}))]){if(!Object.prototype.hasOwnProperty.call(n2,e))throw TypeError(`Type \`${e.toLowerCase()}\` is not supported. Please make sure that \`types\` list conatins only supported files`);n.push(e)}if(i&&Object.prototype.hasOwnProperty.call(i,"chunkSize")&&(i?.chunkSize??0)<=0)throw RangeError("chunkSize must be bigger than zero");if(!i||!i?.excludeSimilarTypes){var r;let e=(r=n).some(e=>"MP4"===e)?["M4V"]:r.some(e=>"AAC"===e)?["M4A"]:[];e.length>0&&(n=n.concat(e))}let o=[],a=[];for(let e of n){let t=n2.getSignaturesByName(e);o=o.concat(t),n1.includes(e.toLowerCase())&&a.push(n2.getInfoByName(e))}let s=nW(e,i?.chunkSize||64),l=n2.detectSignature(s,o);if(!l)return!1;if(a.length>0){let e=a.filter(e=>e.signatures.includes(l));if(e.length>0){let t=n2.detectTypeByAdditionalCheck(s,e);return!!t&&n.some(e=>e.toLowerCase()===t)}}return!0}function rV(e,t){if(t&&Object.prototype.hasOwnProperty.call(t,"chunkSize")&&(t?.chunkSize??0)<=0)throw RangeError("chunkSize must be bigger than zero");let i=nW(e,t?.chunkSize||64);if(0===i.length)return;let n=[],r=[];for(let e in n2)if(Object.prototype.hasOwnProperty.call(n2,e)){let t=n2.getSignaturesByName(e),o=n2.detectBySignatures(i,t);if(o){let t=n2.getInfoByName(e);n1.includes(t.extension)&&r.push(t.extension);let i={extension:t.extension,mimeType:t.mimeType,description:t.description,signature:{...o,sequence:o.sequence.map(e=>e.toString(16))}};n.push(i)}}if(0===n.length)return;if(1===n.length&&0===r.length)return n[0];let o=n2.detectTypeByAdditionalCheck(i,n);if(o)return n.find(e=>e.extension===o)}e.s(["AudioTypes",()=>n0,"CompressedTypes",()=>nQ,"FILE_TYPES_REQUIRED_ADDITIONAL_CHECK",0,n1,"FileTypes",()=>n2,"ImageTypes",()=>nZ,"OtherTypes",()=>nY,"VideoTypes",()=>nJ,"is7Z",()=>n9,"isAAC",()=>n4,"isAMR",()=>n3,"isAVI",()=>rU,"isAVIF",()=>rn,"isBLEND",()=>rb,"isBMP",()=>rr,"isBPG",()=>ro,"isCR2",()=>ra,"isDOC",()=>rE,"isELF",()=>rS,"isEXE",()=>rx,"isEXR",()=>rs,"isFLAC",()=>n5,"isFLV",()=>rR,"isGIF",()=>rl,"isHEIC",()=>rp,"isICO",()=>ru,"isINDD",()=>rT,"isJPEG",()=>rc,"isLZH",()=>re,"isM4A",()=>n6,"isM4V",()=>rD,"isMACHO",()=>rv,"isMKV",()=>rN,"isMOV",()=>rL,"isMP3",()=>n8,"isMP4",()=>rO,"isOGG",()=>rK,"isORC",()=>rP,"isPARQUET",()=>rI,"isPBM",()=>rf,"isPCAP",()=>rM,"isPDF",()=>rC,"isPGM",()=>rd,"isPNG",()=>rm,"isPPM",()=>rg,"isPS",()=>rF,"isPSD",()=>ry,"isRAR",()=>rt,"isRTF",()=>rk,"isSQLITE",()=>rB,"isSTL",()=>rw,"isSWF",()=>rG,"isTTF",()=>rA,"isWAV",()=>n7,"isWEBM",()=>rj,"isWEBP",()=>rh,"isZIP",()=>ri,"validateFileType",()=>rz],491258),e.s(["detectFile",()=>rV],670948);var r$=e.i(670948),rq=e.i(491258);let rW={...r$,...rq};e.i(349067);var r_=e.i(360443),rH=e.i(19048);e.i(928505);var rX=e.i(690989),rJ=e.i(724188),rY=e.i(432723),rZ=e.i(69e4),rQ=e.i(688762),r0=iy;class r1 extends r0.TaggedError("ValidationError"){}class r2 extends r0.TaggedError("DetectionError"){}class r4 extends r0.TaggedError("ExifParseError"){}var r3=e.i(6368),r5=e.i(842502),r6=e.i(344883);r6.MetricBoundariesTypeId,r6.isMetricBoundaries;let r8=r6.fromIterable;r6.linear,r6.exponential;let r7={filesProcessedTotal:r5.counter("upload.files_processed_total"),filesFailedTotal:r5.counter("upload.files_failed_total"),detectionFailedTotal:r5.counter("upload.detection_failed_total"),exifParsedTotal:r5.counter("upload.exif_parsed_total"),exifFailedTotal:r5.counter("upload.exif_failed_total"),processFileDurationMs:r5.histogram("upload.process_file_duration_ms",r8([1,5,10,25,50,100,250,500,1e3,2e3,5e3,1e4]))},r9=(e,t)=>({service:"upload",fileName:e.name,fileType:e.type,fileSize:e.size,...t}),oe=e=>t=>t.pipe((0,r3.withLogContext)({service:"upload",...e}),(0,r3.withRootSpan)("upload.processFile"),(0,r3.withSpanAndMetrics)("upload.processFile",{successCounter:r7.filesProcessedTotal,errorCounter:r7.filesFailedTotal,durationHistogram:r7.processFileDurationMs,durationUnit:"millis"},{service:"upload",...e})),ot=(e,t)=>M.logWarning(e).pipe(M.annotateLogs(t??{}));var oi=e.i(539686);let on=M.fn("upload.validateFile")(function*({file:e,config:t}){let i=iC(e.size);if("number"==typeof t?.maxSizeBytes&&e.size>t.maxSizeBytes){let n=iC(t.maxSizeBytes);return yield*new r1({message:`File too large: ${i} (max ${n})`,fileName:e.name,fileType:e.type,fileSize:e.size})}let n=t?.chunkSize??64,r=nW((yield*M.tryPromise({try:async()=>e.arrayBuffer(),catch:t=>new r2({message:"Could not detect file type from signature",cause:t,fileName:e.name,fileType:e.type,fileSize:e.size,chunkSize:n})})),n),o=rW.detectFile(r,{chunkSize:n});if(!o)return yield*r5.increment(r7.detectionFailedTotal),yield*ot("upload.validateFile: signature detection failed",r9(e)),yield*new r2({message:"Could not detect file type from signature",fileName:e.name,fileType:e.type,fileSize:e.size,chunkSize:n});let a=o?.mimeType??e.type;return(yield*R.decodeUnknown(ik.BS.MimeType)(a).pipe(M.tapError(t=>ot("upload.validateFile: unsupported mime type",{...r9(e),candidate:a,error:t})),M.mapError(t=>new r1({message:`Unsupported mime type: ${a}`,cause:t,fileName:e.name,fileType:a,fileSize:e.size}))),t?.allowedMime&&!t.allowedMime.includes(a))?(yield*ot("upload.validateFile: disallowed MIME",{...r9(e),candidate:a,allowed:t.allowedMime}),yield*new r1({message:`Disallowed type: ${a}`,fileName:e.name,fileType:e.type,fileSize:e.size,candidateMime:a,allowedMime:t.allowedMime})):{detected:o,formattedSize:i}}),or=M.fn("upload.extractBasicMetadata")(function*({file:e,detected:t}){let i=e.webkitRelativePath,n=oi.isString(i)&&i.length>0,r=t?.mimeType??e.type,o={size:e.size,type:r,lastModifiedDate:e.lastModified,lastModified:e.lastModified,name:e.name,...n?{webkitRelativePath:i,relativePath:i}:{}};return{attributes:yield*R.decodeUnknown(nB)(o).pipe(M.tapError(t=>ot("upload.extractBasicMetadata: invalid file attributes",{...r9(e),candidateType:r,error:t})),M.mapError(t=>new r1({message:"Invalid file attributes",cause:t,fileName:e.name,fileType:r,fileSize:e.size}))),detected:t}}),oo=M.fn("upload.extractExifMetadata")(function*({file:e,detected:t}){let i=t?.mimeType??e.type;if(i&&i.startsWith("image/"))return yield*M.gen(function*(){let t,i=yield*M.tryPromise({try:()=>e.arrayBuffer(),catch:t=>new r4({message:"Could not parse EXIF data because array buffer could not be read",cause:t,fileName:e.name,fileType:e.type,fileSize:e.size,phase:"read"})}),n=yield*M.try({try:()=>ic(i,{expanded:!0}),catch:t=>new r4({message:"Could not parse EXIF data",cause:t,fileName:e.name,fileType:e.type,fileSize:e.size,phase:"parse"})}),r=nC.cleanExifData(n),o=yield*R.decodeUnknown(nC)(r).pipe(M.mapError(t=>new r4({message:"Could not decode EXIF data to schema",cause:t,fileName:e.name,fileType:e.type,fileSize:e.size,phase:"decode"})));return yield*r5.increment(r7.exifParsedTotal),yield*(t=r9(e),M.logInfo("upload.extractExifMetadata: parsed EXIF").pipe(M.annotateLogs(t??{}))),o}).pipe(M.catchAll(t=>M.gen(function*(){yield*r5.increment(r7.exifFailedTotal),yield*ot("upload.extractExifMetadata: non-fatal EXIF parse failure",{...r9(e),error:t})})))});var oa=E,os=M;class ol extends os.Service()("UploadFileService",{dependencies:[],accessors:!0,effect:os.gen(function*(){let e=os.fn("UploadFileService.processFile")(function*({file:e,config:t}){let i=os.gen(function*(){let i=yield*on({file:e,config:t}),n=yield*or({file:e,detected:i.detected}),r=yield*oo({file:e,detected:n.detected??i.detected}),o={file:e,validated:i,basic:n,exif:r};return o});return yield*i.pipe(oe(r9(e)))}),t=os.fn("UploadFileService.processFiles")(function*({files:t,config:i}){let n=t.map(t=>e({file:t,config:i})),r=yield*(0,oa.accumulateEffectsAndReport)(n,{concurrency:"unbounded",annotations:{service:"upload"}});return r});return{processFile:e,processFiles:t,validateFile:on,extractBasicMetadata:or,extractExifMetadata:oo}})}){}var op=e.i(13171),ou=e.i(236807);let oc={flexDirection:"column",alignItems:"unset",justifyContent:"flex-start"};function of(e){let t,n,r,a,s,l,p,u,c,f,d=(0,op.c)(20);return d[0]!==e?({sx:s,disabled:t,onReset:r,loading:n,...a}=e,d[0]=e,d[1]=t,d[2]=n,d[3]=r,d[4]=a,d[5]=s):(t=d[1],n=d[2],r=d[3],a=d[4],s=d[5]),d[6]!==s?(l=Array.isArray(s)?s:[s],d[6]=s,d[7]=l):l=d[7],d[8]!==l?(p=[od,...l],d[8]=l,d[9]=p):p=d[9],d[10]!==t||d[11]!==r?(u=(0,i.jsx)(ou.default,{color:"error",size:"large",disabled:t,onClick:r,children:"Reset"}),d[10]=t,d[11]=r,d[12]=u):u=d[12],d[13]!==n?(c=(0,i.jsx)(ou.default,{size:"large",type:"submit",variant:"contained",loading:n,children:"Submit to check"}),d[13]=n,d[14]=c):c=d[14],d[15]!==a||d[16]!==p||d[17]!==u||d[18]!==c?(f=(0,i.jsxs)(o.default,{sx:p,...a,children:[u,c]}),d[15]=a,d[16]=p,d[17]=u,d[18]=c,d[19]=f):f=d[19],f}function od(){return{mb:3,gap:2,display:"flex",justifyContent:"flex-end"}}function om(e){let t,n,r,a,s,l,p=(0,op.c)(12);return p[0]!==e?({sx:r,children:t,...n}=e,p[0]=e,p[1]=t,p[2]=n,p[3]=r):(t=p[1],n=p[2],r=p[3]),p[4]!==r?(a=Array.isArray(r)?r:[r],p[4]=r,p[5]=a):a=p[5],p[6]!==a?(s=[og,...a],p[6]=a,p[7]=s):s=p[7],p[8]!==t||p[9]!==n||p[10]!==s?(l=(0,i.jsx)(o.default,{sx:s,...n,children:t}),p[8]=t,p[9]=n,p[10]=s,p[11]=l):l=p[11],l}function og(){return{rowGap:5,columnGap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"}}}e.i(740602);var oy=e.i(150240);function oh(e){let t,n,r,o,a,s,l=(0,op.c)(12);return l[0]!==e?({title:o,sx:r,children:t,...n}=e,l[0]=e,l[1]=t,l[2]=n,l[3]=r,l[4]=o):(t=l[1],n=l[2],r=l[3],o=l[4]),l[5]!==o?(a=o&&(0,i.jsx)(oS,{children:o}),l[5]=o,l[6]=a):a=l[6],l[7]!==t||l[8]!==n||l[9]!==r||l[10]!==a?(s=(0,i.jsxs)(ob,{sx:r,...n,children:[a,t]}),l[7]=t,l[8]=n,l[9]=r,l[10]=a,l[11]=s):s=l[11],s}let ob=(0,g.styled)("div")(({theme:e})=>({width:"100%",display:"flex",flexWrap:"wrap",position:"relative",alignItems:"center",rowGap:e.spacing(3),columnGap:e.spacing(2),justifyContent:"center",padding:e.spacing(6,3),borderRadius:1.5*Number(e.shape.borderRadius),backgroundColor:(0,oy.rgbaFromChannel)(e.vars?.palette.grey["500Channel"],.04),boxShadow:`0 0 0 1px ${(0,oy.rgbaFromChannel)(e.vars?.palette.grey["500Channel"],.16)}`})),oS=(0,g.styled)("span")(({theme:e})=>({top:0,left:0,position:"absolute",marginLeft:e.spacing(2.5),padding:e.spacing(.25,1),color:e.vars?.palette.text.primary,borderRadius:2*Number(e.shape.borderRadius),backgroundColor:e.vars?.palette.common.white,transform:"translateY(-50%)",fontSize:e.typography.caption.fontSize,fontWeight:e.typography.fontWeightSemiBold,border:`solid 1px ${(0,oy.rgbaFromChannel)(e.vars?.palette.grey["500Channel"],.24)}`,...e.applyStyles("dark",{backgroundColor:e.vars?.palette.background.neutral})}));e.i(777857),e.i(738722),e.i(891889),e.i(554222),e.i(433070),e.i(824511),e.i(975432);var ox=e.i(287069);let ov=({category:e,name:t,iconPrefix:i,packageType:n})=>({name:t,href:`/components/${e}/${ox.StrUtils.kebabCase(t)}`,icon:`/assets/icons/components/${i}-${ox.StrUtils.kebabCase(t)}.svg`,packageType:n});["Colors","Typography","Shadows","Grid","Icons"].map(e=>ov({category:"foundation",name:e,iconPrefix:"ic",packageType:"Foundation"}));let oT=["Data grid","Date pickers","Tree view"],oP=["Chip","List","Menu","Tabs","Alert","Badge","Table","Avatar","Dialog","Rating","Slider","Switch","Drawer","Buttons","Date pickers","Popover","Stepper","Tooltip","Checkbox","Progress","Timeline","Accordion","Textfield","Data grid","Tree view","Pagination","Breadcrumbs","Autocomplete","Radio button","Transfer list"].map(e=>ov({category:"mui",name:e,iconPrefix:"ic",packageType:oT.includes(e)?"MUI X":"MUI"})),oI=["Map","Chart","Image","Editor","Upload","Scroll","Animate","Carousel","Lightbox","Snackbar","Markdown","Form wizard","Multi language","Form validation","Scroll progress","Organization chart"],oC=["Map","Dnd","Chart","Image","Label","Editor","Upload","Scroll","Layout","Animate","Carousel","Lightbox","Snackbar","Markdown","Mega menu","Utilities","Multi language","Navigation bar","Form validation","Form wizard","Scroll progress","Organization chart"].map(e=>ov({category:"extra",name:e,iconPrefix:"ic-extra",packageType:oI.includes(e)?"3rd Party":"Custom"}));ox.ArrayUtils.orderBy(oP,["name"],["asc"]),ox.ArrayUtils.orderBy(oC,["name"],["asc"]);let oF=R.Struct({singleUpload:R.NullOr(nA),multiUpload:R.Array(nA)});function ok(){let e=(0,rH.useRuntime)(),t=(0,rY.useAppForm)({...(0,rJ.makeFormOptions)({schema:oF,defaultValues:{singleUpload:null,multiUpload:[]},validator:"onSubmit"}),onSubmit:async({value:t})=>{let i=M.gen(function*(){let e=yield*R.decode(oF)(t),i=[...e.singleUpload?[e.singleUpload]:[],...e.multiUpload??[]];if(0===i.length)return{successes:[],errors:[]};let n=yield*ol,{successes:r,errors:o}=yield*n.processFiles({files:i,config:{maxSizeBytes:3145728}});return{successes:r,errors:o}});console.log(await (0,r_.runClientPromise)(e,i.pipe(E.withEnvLogging,M.provide(ol.Default)),"upload.form.submit"))}});return(0,i.jsxs)(i.Fragment,{children:[t.state.isSubmitting&&(0,i.jsx)(rZ.default,{open:!0,sx:[e=>({zIndex:e.zIndex.modal+1})],children:(0,i.jsx)(rQ.default,{color:"warning"})}),(0,i.jsxs)(rX.Form,{onSubmit:t.handleSubmit,children:[(0,i.jsx)(of,{loading:t.state.isSubmitting,disabled:0===Object.keys(t.state.errors).length,onReset:()=>t.reset()}),(0,i.jsxs)(om,{sx:{gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"}},children:[(0,i.jsx)(oh,{title:"Upload",sx:oc,children:(0,i.jsx)(t.AppField,{name:"singleUpload",children:e=>(0,i.jsx)(e.Upload,{maxSize:3145728,onDelete:()=>t.setFieldValue("singleUpload",null)})})}),(0,i.jsx)(oh,{children:(0,i.jsx)(t.AppField,{name:"multiUpload",children:e=>(0,i.jsx)(e.Upload,{multiple:!0,maxSize:3145728,onRemove:e=>t.setFieldValue("multiUpload",t.state.values.multiUpload.filter(t=>t!==e)),onRemoveAll:()=>t.setFieldValue("multiUpload",[]),onUpload:()=>t.handleSubmit()})})})]})]})]})}let oB=[{value:"",label:"Other"},{value:"fields",label:"Fields"},{value:"controls",label:"Controls"}],ow="category";function oA(){let e=(0,n.usePathname)(),t=(0,n.useSearchParams)().get(ow)??"",[u,c]=p.default.useState(!0),f=p.default.useCallback(e=>{c(e.target.checked)},[]);return(0,i.jsxs)(o.default,{children:[(0,i.jsx)(A.default,{variant:"h4",sx:{mb:3},children:"@tanstack/react-form + effect/Schema"}),(0,i.jsxs)(o.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsx)(w,{exclusive:!0,value:t,children:oB.map(t=>{var n;let o;return(0,i.jsx)(P,{component:r.RouterLink,href:(o=new URLSearchParams({[ow]:n=t.value}).toString(),n?`${e}?${o}`:e),value:t.value,"aria-label":t.label,children:t.label},t.label)})}),(0,i.jsx)(s.default,{label:"Debug",labelPlacement:"start",control:(0,i.jsx)(l.default,{checked:u,onChange:f,slotProps:{input:{id:"debug-switch"}}}),sx:[e=>({display:"none",[e.breakpoints.up(1440)]:{display:"flex"}})]})]}),(0,i.jsx)(a.default,{sx:{my:3}}),""===t&&(0,i.jsx)(ok,{}),"fields"===t&&(0,i.jsx)(A.default,{variant:"h1",children:"beep1"}),"controls"===t&&(0,i.jsx)(A.default,{variant:"h1",children:"beep2"})]})}}]);