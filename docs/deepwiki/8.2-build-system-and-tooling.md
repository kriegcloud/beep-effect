# Build System and Tooling | kriegcloud/beep-effect | DeepWiki

_Source: https://deepwiki.com/kriegcloud/beep-effect/8.2-build-system-and-tooling_

Relevant source files
*   [apps/web/next.config.ts](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/next.config.ts)
*   [apps/web/package.json](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/package.json)
*   [apps/web/tsconfig.json](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/tsconfig.json)
*   [apps/web/tsconfig.test.json](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/tsconfig.test.json)
*   [package.json](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json)
*   [packages/common/invariant/package.json](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/invariant/package.json)
*   [packages/common/schema/package.json](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/schema/package.json)
*   [packages/common/types/package.json](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/types/package.json)
*   [packages/common/utils/package.json](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/utils/package.json)
*   [packages/ui/package.json](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/ui/package.json)
*   [pnpm-lock.yaml](https://github.com/kriegcloud/beep-effect/blob/b64126f6/pnpm-lock.yaml)
*   [tooling/repo-config/package.json](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tooling/repo-config/package.json)
*   [tooling/repo-scripts/package.json](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tooling/repo-scripts/package.json)
*   [tooling/testkit/package.json](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tooling/testkit/package.json)
*   [tooling/utils/package.json](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tooling/utils/package.json)
*   [tsconfig.base.json](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tsconfig.base.json)
*   [tsconfig.build.json](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tsconfig.build.json)
*   [tsconfig.json](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tsconfig.json)

This document describes the build infrastructure, tooling, and automation systems used throughout the beep-effect monorepo. It covers package management, build orchestration, compilation pipelines, code generation, quality gates, and repository scripts.

For information about the monorepo structure and workspace organization, see [Monorepo Structure](https://deepwiki.com/kriegcloud/beep-effect/2.1-monorepo-structure). For runtime configuration and service composition, see [Runtime and Service Composition](https://deepwiki.com/kriegcloud/beep-effect/4.2-runtime-and-service-composition).

* * *

Overview
--------

The beep-effect repository uses a sophisticated build system designed for a TypeScript monorepo with multiple applications and dozens of shared packages. The core toolchain consists of:

*   **pnpm** (v10.18.0): Workspace-based package manager with efficient dependency management
*   **Turbo**: Task runner for parallel execution and intelligent caching
*   **TypeScript**: Primary compilation target with project references
*   **Babel**: Post-compilation transformations (CJS output, pure annotations)
*   **dotenvx**: Environment variable management across all contexts

The build system supports dual module output (ESM and CJS), incremental compilation, and comprehensive quality gates including linting, type checking, testing, and dependency validation.

* * *

Package Manager: pnpm
---------------------

The repository uses pnpm with workspaces to manage dependencies across all packages. The package manager is locked to version 10.18.0 to ensure consistency.

### Workspace Configuration

Workspaces are defined in [package.json 9-13](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L9-L13):

```
workspaces: [
  "packages/**",
  "apps/*",
  "tooling/*"
]
```

This configuration enables package discovery across three main directories, automatically linking workspace dependencies during installation.

### Dependency Overrides

The repository uses extensive pnpm overrides to enforce consistent versions across all packages. These are defined in [package.json 85-289](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L85-L289) and [pnpm-lock.yaml 7-289](https://github.com/kriegcloud/beep-effect/blob/b64126f6/pnpm-lock.yaml#L7-L289) and include:

| Package Category | Example Overrides | Purpose |
| --- | --- | --- |
| Effect Ecosystem | `effect: 3.18.2`, `@effect/platform: 0.92.1` | Ensure Effect version consistency |
| OpenTelemetry | `@opentelemetry/api: ^1.9.0`, `@opentelemetry/sdk-trace-base: ^2.1.0` | Align telemetry SDK versions |
| Build Tools | `typescript: 5.9.3`, `@babel/core: 7.28.4` | Lock compiler versions |
| React Ecosystem | `react: 19.2.0`, `react-dom: 19.2.0`, `next: ^15.5.4` | Maintain framework compatibility |
| Database | `drizzle-orm: 0.44.6`, `postgres: ^3.4.7` | Standardize database tooling |

### Binary Dependencies

The [package.json 290-302](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L290-L302) section specifies `onlyBuiltDependencies`, ensuring certain native modules are properly compiled:

```
onlyBuiltDependencies: [
  "@parcel/watcher",
  "@tailwindcss/oxide",
  "esbuild",
  "sharp",
  ...
]
```

**Sources:**[package.json 1-313](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L1-L313)[pnpm-lock.yaml 1-290](https://github.com/kriegcloud/beep-effect/blob/b64126f6/pnpm-lock.yaml#L1-L290)

* * *

Build Orchestration: Turbo
--------------------------

Turbo orchestrates parallel task execution across the monorepo with intelligent caching and dependency-aware scheduling.

### Task Pipeline Architecture

### Common Repository Scripts

The root [package.json 21-52](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L21-L52) defines repository-wide scripts:

| Script | Command | Purpose |
| --- | --- | --- |
| `build` | `pnpm dotenvx turbo run build` | Build all packages with env vars |
| `check` | `turbo run check` | Type check all packages |
| `check:all` | `turbo run lint check test` | Run all quality gates |
| `db:generate` | `turbo run db:generate` | Generate Drizzle schemas |
| `db:migrate` | `pnpm dotenvx turbo run db:migrate` | Run database migrations |
| `lint` | `pnpm lint:deps && turbo run lint lint:circular` | Lint code and dependencies |
| `test` | `turbo run test` | Run all tests |
| `dev` | `pnpm dotenvx turbo run dev --concurrency=36` | Start all dev servers |

### Environment Variable Integration

All build and development commands are wrapped with `dotenvx` to ensure environment variables are loaded from `.env` files. The [package.json 45](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L45-L45) defines the wrapper:

```
"dotenvx": "dotenvx run -f .env --"
```

This pattern is used consistently across [package.json 24-43](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L24-L43) for commands requiring environment access.

**Sources:**[package.json 21-52](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L21-L52)

* * *

Build Pipeline
--------------

The build pipeline transforms TypeScript source code into both ESM and CJS distributions with pure call annotations for tree-shaking optimization.

### Compilation Flow

### TypeScript Compilation

Each package uses TypeScript project references for incremental builds. The base configuration is defined in [tsconfig.base.json 1-344](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tsconfig.base.json#L1-L344):

**Key Compiler Options:**

*   `composite: true` - Enable project references
*   `declaration: true` - Generate .d.ts files
*   `declarationMap: true` - Generate source maps for declarations
*   `sourceMap: true` - Generate JS source maps
*   `incremental: true` - Enable incremental compilation
*   `module: "esnext"` - Output ESM syntax
*   `target: "ES2022"` - Target modern JavaScript

### Build Script Pattern

Most packages follow the same build script pattern, as seen in [packages/common/schema/package.json 22-26](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/schema/package.json#L22-L26):

```
"build": "pnpm build-esm && pnpm build-cjs && pnpm build-annotate",
"build-esm": "tsc -b tsconfig.build.json",
"build-cjs": "babel build/esm --plugins @babel/transform-export-namespace-from --plugins @babel/transform-modules-commonjs --out-dir build/cjs --source-maps",
"build-annotate": "babel build/esm --plugins annotate-pure-calls --out-dir build/esm --source-maps"
```

### Babel Transformations

The build pipeline uses two critical Babel plugins:

1.   **Module Transformation** ([packages/common/schema/package.json 25](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/schema/package.json#L25-L25)):

    *   Plugin: `@babel/transform-modules-commonjs`
    *   Purpose: Convert ESM to CJS for compatibility
    *   Output: `build/cjs/` directory

2.   **Pure Call Annotations** ([packages/common/schema/package.json 26](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/schema/package.json#L26-L26)):

    *   Plugin: `babel-plugin-annotate-pure-calls`
    *   Purpose: Add `/*#__PURE__*/` comments for tree-shaking
    *   Output: Annotated `build/esm/` files

### Next.js Application Build

The web application uses Next.js with Turbopack. Configuration is defined in [apps/web/next.config.ts 124-220](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/next.config.ts#L124-L220):

**Key Settings:**

*   `outputFileTracingRoot`: Points to monorepo root for workspace resolution ([apps/web/next.config.ts 195](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/next.config.ts#L195-L195))
*   `experimental.optimizePackageImports`: Optimizes imports from heavy packages ([apps/web/next.config.ts 217](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/next.config.ts#L217-L217))
*   Turbopack SVG loader rules ([apps/web/next.config.ts 187-194](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/next.config.ts#L187-L194))

The build script is defined in [apps/web/package.json 12](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/package.json#L12-L12):

```
"build": "pnpm dotenvx next build --turbopack"
```

### UI Package Asset Handling

The UI package includes CSS asset copying as part of its build. See [packages/ui/package.json 14-20](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/ui/package.json#L14-L20):

```
"copy-css": "copyfiles -f src/styles/globals.css build/src && copyfiles -f src/styles/globals.css build/esm && copyfiles -f src/styles/globals.css build/cjs",
"build": "pnpm build-esm && pnpm build-cjs && pnpm build-annotate && pnpm copy-css"
```

**Sources:**[tsconfig.base.json 1-344](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tsconfig.base.json#L1-L344)[packages/common/schema/package.json 22-26](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/schema/package.json#L22-L26)[packages/common/utils/package.json 22-26](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/utils/package.json#L22-L26)[packages/ui/package.json 14-21](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/ui/package.json#L14-L21)[apps/web/next.config.ts 124-220](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/next.config.ts#L124-L220)[apps/web/package.json 8-22](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/package.json#L8-L22)

* * *

Quality Gates
-------------

The repository enforces multiple quality gates to maintain code quality and consistency.

### Quality Gate Architecture

### Linting: Biome

Biome is used for fast linting and formatting. Configuration is applied via [package.json 304-311](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L304-L311):

```
"lint-staged": {
  "*": ["biome check"],
  "**/*.{ts,tsx,js,jsx,cjs,mjs}": ["biome check"]
}
```

Common lint commands:

*   `pnpm lint`: Run linter across all packages
*   `pnpm lint:fix`: Auto-fix linting issues
*   Per-package: `biome check .` (see [packages/common/schema/package.json 31-32](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/schema/package.json#L31-L32))

### Type Checking

TypeScript type checking runs without emitting output:

```
"check": "tsc -b tsconfig.json"
```

This command appears in every package (e.g., [packages/common/schema/package.json 27](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/schema/package.json#L27-L27)). The root [tsconfig.json 1-119](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tsconfig.json#L1-L119) references all package tsconfig files via project references ([tsconfig.json 12-118](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tsconfig.json#L12-L118)).

### Testing: Vitest

Unit tests run via Vitest with Effect integration. Test configuration uses:

*   `@effect/vitest` for Effect-specific test utilities ([package.json 67](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L67-L67))
*   Coverage via `@vitest/coverage-v8` ([package.json 70](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L70-L70))

Common test scripts:

*   `pnpm test`: Run tests ([packages/common/schema/package.json 28](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/schema/package.json#L28-L28))
*   `pnpm coverage`: Generate coverage report ([packages/common/schema/package.json 30](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/schema/package.json#L30-L30))

### Circular Dependency Detection

Madge checks for circular imports in each package:

```
"lint:circular": "pnpm madge -c ."
```

This appears in package.json files like [packages/common/schema/package.json 34](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/schema/package.json#L34-L34) and [packages/ui/package.json 28](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/ui/package.json#L28-L28)

### Dependency Version Synchronization

Syncpack ensures consistent dependency versions across the monorepo. Scripts in [package.json 46-48](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L46-L48):

| Script | Command | Purpose |
| --- | --- | --- |
| `lint:deps` | `syncpack lint --dependency-types='pnpmOverrides'` | Check version consistency |
| `lint:deps:fix` | `syncpack fix --dependency-types=pnpmOverrides` | Auto-fix version mismatches |
| `deps:update` | `syncpack update --target=latest` | Update to latest versions |

### Pre-commit Hooks

Husky manages git hooks with lint-staged for pre-commit validation. Configuration in [package.json 304-311](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L304-L311) ensures all files pass Biome checks before commit.

**Sources:**[package.json 36-50](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L36-L50)[package.json 304-311](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L304-L311)[packages/common/schema/package.json 27-34](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/schema/package.json#L27-L34)[apps/web/package.json 15-21](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/package.json#L15-L21)

* * *

Code Generation
---------------

The repository uses several code generation tools to automate schema-to-code transformations and maintain consistency.

### Code Generation Systems

### Drizzle Kit Schema Generation

Drizzle Kit generates TypeScript types and SQL migrations from schema definitions. Common commands:

| Command | Script | Purpose |
| --- | --- | --- |
| Generate | `db:generate` | Create migrations from schema changes |
| Migrate | `db:migrate` | Apply migrations to database |
| Push | `db:push` | Push schema directly (dev only) |
| Studio | `db:studio` | Launch Drizzle Studio GUI |

Root scripts in [package.json 29-35](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L29-L35):

```
"db:generate": "turbo run db:generate",
"db:migrate": "pnpm dotenvx turbo run db:migrate",
"db:push": "pnpm dotenvx turbo run db:push",
"db:studio": "pnpm dotenvx turbo run db:studio"
```

Each package with database tables implements these scripts. For example, in IAM tables the generation would produce migrations in a `drizzle/` directory.

### Effect CLI Index Generation

The Effect CLI automatically generates `index.ts` files that re-export all public APIs. This is configured in package.json files using the `effect` field:

Example from [packages/common/schema/package.json 55-66](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/schema/package.json#L55-L66):

```
"effect": {
  "generateExports": {
    "include": ["**/*.ts"]
  },
  "generateIndex": {
    "include": ["**/*.ts"]
  }
}
```

This appears in all Effect-based packages including:

*   [packages/common/utils/package.json 48-59](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/utils/package.json#L48-L59)
*   [packages/common/types/package.json 41-52](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/types/package.json#L41-L52)
*   [tooling/testkit/package.json 34-45](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tooling/testkit/package.json#L34-L45)
*   [tooling/repo-config/package.json 36-47](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tooling/repo-config/package.json#L36-L47)

### Secret Generation

The repository includes a custom secret generator for bootstrapping environment files. Invoked via [package.json 50](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L50-L50):

```
"gen:secrets": "pnpm dotenvx tsx ./tooling/repo-scripts/src/generate-env-secrets.ts"
```

This script generates cryptographically secure random values for secrets like JWT signing keys, encryption keys, and API secrets.

### Asset Path Generation

A custom generator creates type-safe paths for public assets. Invoked via [package.json 51](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L51-L51):

```
"gen:beep-paths": "pnpm dotenvx tsx ./tooling/repo-scripts/src/generate-asset-paths.ts"
```

The generator in [tooling/repo-scripts/package.json 35](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tooling/repo-scripts/package.json#L35-L35) also provides:

```
"generate-public-paths": "pnpm dotenvx tsx src/generate-asset-paths.ts"
```

This creates an `asset-paths.ts` file with typed string constants for all files in the `public/` directory.

**Sources:**[package.json 29-35](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L29-L35)[package.json 50-51](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L50-L51)[packages/common/schema/package.json 55-66](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/schema/package.json#L55-L66)[tooling/repo-scripts/package.json 33-35](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tooling/repo-scripts/package.json#L33-L35)

* * *

TypeScript Project References
-----------------------------

The monorepo uses TypeScript project references for optimal incremental compilation and editor performance.

### Reference Architecture

The root [tsconfig.json 12-118](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tsconfig.json#L12-L118) defines references to all packages, while each package defines its dependencies. For example, [apps/web/tsconfig.json 107-188](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/tsconfig.json#L107-L188) references all packages the web app depends on:

```
"references": [
  { "path": "../../packages/common/types/tsconfig.build.json" },
  { "path": "../../packages/common/invariant/tsconfig.build.json" },
  { "path": "../../packages/common/utils/tsconfig.build.json" },
  ...
]
```

### Path Mapping

The [tsconfig.base.json 49-341](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tsconfig.base.json#L49-L341) defines path mappings for all workspace packages:

```
"paths": {
  "@beep/types": ["./packages/common/types/src/index"],
  "@beep/utils": ["./packages/common/utils/src/index"],
  "@beep/schema": ["./packages/common/schema/src/index"],
  ...
}
```

Each application extends these paths with local overrides, as seen in [apps/web/tsconfig.json 41-97](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/tsconfig.json#L41-L97)

### Build Configuration Files

Each package maintains three TypeScript configurations:

1.   **tsconfig.json**: For editor support and checking (includes test files)
2.   **tsconfig.build.json**: For compilation (excludes test files)
3.   **tsconfig.src.json**: For development tooling (references source directly)

### Composite Projects

All packages enable `composite: true` in [tsconfig.base.json 6](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tsconfig.base.json#L6-L6) allowing TypeScript to:

*   Cache build outputs in `.tsbuildinfo` files
*   Build only changed projects
*   Provide instant editor feedback

**Sources:**[tsconfig.base.json 1-344](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tsconfig.base.json#L1-L344)[tsconfig.json 1-119](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tsconfig.json#L1-L119)[tsconfig.build.json 1-111](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tsconfig.build.json#L1-L111)[apps/web/tsconfig.json 1-202](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/tsconfig.json#L1-L202)

* * *

Module Resolution and Package Exports
-------------------------------------

### Package Export Patterns

Packages use granular exports to enable tree-shaking. Example from [packages/ui/package.json 31-171](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/ui/package.json#L31-L171):

```
"exports": {
  "./globals.css": "./src/styles/globals.css",
  "./animate/*": {
    "import": "./build/esm/animate/*",
    "types": "./build/dts/animate/*",
    "require": "./build/cjs/animate/*",
    "default": "./build/src/animate/*"
  },
  "./components/*": {
    "import": "./build/esm/components/*",
    "types": "./build/dts/components/*",
    "require": "./build/cjs/components/*",
    "default": "./build/src/components/*"
  },
  ...
}
```

This pattern provides:

*   ESM imports via `import` field
*   CJS imports via `require` field
*   Type definitions via `types` field
*   Source fallback via `default` field

### Tooling Package Exports

Simpler packages use direct source exports. Example from [tooling/repo-scripts/package.json 16-20](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tooling/repo-scripts/package.json#L16-L20):

```
"exports": {
  ".": "./src/index.ts",
  "./package.json": "./package.json",
  "./*": "./src/*.ts"
}
```

This allows direct source imports in development without requiring builds.

**Sources:**[packages/ui/package.json 31-171](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/ui/package.json#L31-L171)[packages/common/schema/package.json 11-15](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/schema/package.json#L11-L15)[tooling/repo-scripts/package.json 16-20](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tooling/repo-scripts/package.json#L16-L20)

* * *

Development Workflow Scripts
----------------------------

### Common Development Commands

| Context | Script | Command | Purpose |
| --- | --- | --- | --- |
| Root | `dev` | `pnpm dotenvx turbo run dev --concurrency=36` | Start all dev servers |
| Root | `dev:https` | `pnpm dotenvx turbo run dev:https --concurrency=36` | Start with HTTPS |
| Root | `services:up` | `pnpm dotenvx docker compose up -d` | Start Docker services |
| Package | `dev` | `tsc -b tsconfig.build.json --watch` | Watch mode compilation |
| Web | `dev` | `pnpm dotenvx next dev --turbopack` | Next.js dev server |

### Execute Scripts

Most packages provide an `execute` script for running one-off code:

*   [apps/web/package.json 22](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/package.json#L22-L22): `"execute": "pnpm dotenvx tsx ./execute.ts"`
*   [packages/common/schema/package.json 33](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/schema/package.json#L33-L33): `"execute": "pnpm tsx --tsconfig ./tsconfig.src.json ./src/execute.ts"`
*   [tooling/repo-scripts/package.json 32](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tooling/repo-scripts/package.json#L32-L32): `"execute": "TSX_TSCONFIG_PATH=./tsconfig.src.json NODE_OPTIONS='--import tsx' pnpm dotenvx tsx ./src/execute.ts"`

These allow running TypeScript directly without a build step, useful for debugging and experimentation.

### Utility Commands

Root-level utility scripts in [package.json 22-52](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L22-L52):

*   `clean`: Remove build artifacts from root
*   `clean:workspaces`: Clean all package builds via Turbo
*   `bootstrap`: Initialize repository (install deps, generate schemas, etc.)
*   `nuke`: Remove all Docker resources

**Sources:**[package.json 21-52](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L21-L52)[apps/web/package.json 8-22](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/package.json#L8-L22)[packages/common/schema/package.json 21-34](https://github.com/kriegcloud/beep-effect/blob/b64126f6/packages/common/schema/package.json#L21-L34)[tooling/repo-scripts/package.json 21-36](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tooling/repo-scripts/package.json#L21-L36)

* * *

Environment Configuration: dotenvx
----------------------------------

The `dotenvx` tool manages environment variables across the monorepo, ensuring consistent config injection.

### Usage Pattern

All commands requiring environment access use the `dotenvx` wrapper. The root defines [package.json 45](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L45-L45):

```
"dotenvx": "dotenvx run -f .env --"
```

Individual packages define their own wrapper to reference the root `.env`:

*   [apps/web/package.json 19](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/package.json#L19-L19): `"dotenvx": "dotenvx run -f ../../.env --"`
*   [tooling/repo-scripts/package.json 31](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tooling/repo-scripts/package.json#L31-L31): `"dotenvx": "dotenvx run -f ../../.env --"`

### Wrapped Commands

Commands that require environment variables are prefixed with `pnpm dotenvx`:

```
"build": "pnpm dotenvx turbo run build"
"dev": "pnpm dotenvx turbo run dev --concurrency=36"
"db:migrate": "pnpm dotenvx turbo run db:migrate"
```

This ensures commands like database operations, builds with env-dependent features, and service startup have access to required configuration.

**Sources:**[package.json 24-45](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L24-L45)[apps/web/package.json 9-19](https://github.com/kriegcloud/beep-effect/blob/b64126f6/apps/web/package.json#L9-L19)[tooling/repo-scripts/package.json 31-33](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tooling/repo-scripts/package.json#L31-L33)

* * *

Summary Table: Build System Components
--------------------------------------

| Component | Tool | Configuration | Purpose |
| --- | --- | --- | --- |
| Package Manager | pnpm v10.18.0 | [package.json 5-8](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L5-L8) | Workspace management |
| Task Runner | Turbo | Root scripts | Parallel execution |
| TypeScript | tsc v5.9.3 | [tsconfig.base.json](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tsconfig.base.json) | Compilation |
| Module Transform | Babel | `@babel/transform-modules-commonjs` | ESM to CJS |
| Tree Shaking | Babel | `annotate-pure-calls` | Pure annotations |
| Linting | Biome v2.2.5 | Per-package | Code quality |
| Testing | Vitest v3.2.4 | Per-package | Unit tests |
| Dep Check | Madge v8.0.0 | Per-package | Circular deps |
| Dep Sync | Syncpack | Root scripts | Version consistency |
| Env Management | dotenvx v1.51.0 | Root + packages | Config injection |
| DB Generation | Drizzle Kit v0.31.5 | Table packages | Schema to SQL |
| Index Generation | Effect CLI v0.41.1 | Package metadata | Auto exports |

**Sources:**[package.json 1-313](https://github.com/kriegcloud/beep-effect/blob/b64126f6/package.json#L1-L313)[pnpm-lock.yaml 1-290](https://github.com/kriegcloud/beep-effect/blob/b64126f6/pnpm-lock.yaml#L1-L290)[tsconfig.base.json 1-344](https://github.com/kriegcloud/beep-effect/blob/b64126f6/tsconfig.base.json#L1-L344)
