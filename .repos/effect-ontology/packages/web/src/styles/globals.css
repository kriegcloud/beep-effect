/**
 * Editorial Minimalism Design System
 *
 * Typography: Newsreader (editorial serif) + IBM Plex Sans (humanist body)
 * Colors: Warm stone neutrals + terracotta accent
 * Spacing: 4/8/12/16/24/32 grid
 * Philosophy: High data-ink ratio, text-focused, calm but authoritative
 */

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* ═══════════════════════════════════════════════════════════════════════
       EDITORIAL PALETTE - Warm Stone + Terracotta Accent
       ═══════════════════════════════════════════════════════════════════════ */

    /* Surface hierarchy (light mode - paper-like warmth) */
    --background: 40 20% 98%;        /* Warm white paper */
    --background-subtle: 40 15% 96%; /* Slightly darker surface */
    --foreground: 20 15% 15%;        /* Warm near-black */

    /* Card surfaces */
    --card: 40 20% 99%;
    --card-foreground: 20 15% 15%;

    /* Popover/dropdown */
    --popover: 40 20% 99%;
    --popover-foreground: 20 15% 15%;

    /* Primary accent - Terracotta/Rust */
    --primary: 16 65% 45%;           /* Rich terracotta */
    --primary-foreground: 40 20% 98%;

    /* Secondary - Warm stone */
    --secondary: 30 8% 90%;
    --secondary-foreground: 20 15% 25%;

    /* Muted elements */
    --muted: 30 10% 93%;
    --muted-foreground: 20 8% 45%;

    /* Accent highlights */
    --accent: 16 65% 45%;
    --accent-foreground: 40 20% 98%;

    /* Semantic states */
    --destructive: 0 65% 45%;
    --destructive-foreground: 40 20% 98%;
    --success: 145 45% 35%;
    --warning: 35 85% 50%;

    /* Borders and inputs */
    --border: 30 12% 85%;
    --border-subtle: 30 8% 90%;
    --input: 30 12% 85%;
    --ring: 16 65% 45%;

    /* Radius - tighter for editorial feel */
    --radius: 0.25rem;

    /* ═══════════════════════════════════════════════════════════════════════
       TYPOGRAPHY SCALE - Editorial precision
       ═══════════════════════════════════════════════════════════════════════ */

    --font-serif: 'Newsreader', Georgia, 'Times New Roman', serif;
    --font-sans: 'IBM Plex Sans', -apple-system, BlinkMacSystemFont, sans-serif;
    --font-mono: 'IBM Plex Mono', 'SF Mono', Consolas, monospace;

    /* Type scale - tighter line heights for density */
    --text-xs: 0.6875rem;    /* 11px */
    --text-sm: 0.8125rem;    /* 13px */
    --text-base: 0.9375rem;  /* 15px */
    --text-lg: 1.125rem;     /* 18px */
    --text-xl: 1.375rem;     /* 22px */
    --text-2xl: 1.75rem;     /* 28px */
    --text-3xl: 2.25rem;     /* 36px */

    /* Spacing scale */
    --space-1: 0.25rem;  /* 4px */
    --space-2: 0.5rem;   /* 8px */
    --space-3: 0.75rem;  /* 12px */
    --space-4: 1rem;     /* 16px */
    --space-6: 1.5rem;   /* 24px */
    --space-8: 2rem;     /* 32px */

    /* Sidebar */
    --sidebar-width: 16rem;      /* 256px */
    --sidebar-collapsed: 3rem;   /* 48px */
  }

  /* Dark mode - ink on dark paper */
  .dark {
    --background: 20 12% 8%;
    --background-subtle: 20 10% 10%;
    --foreground: 40 15% 90%;

    --card: 20 12% 10%;
    --card-foreground: 40 15% 90%;

    --popover: 20 12% 12%;
    --popover-foreground: 40 15% 90%;

    --primary: 16 70% 55%;
    --primary-foreground: 20 12% 8%;

    --secondary: 20 8% 18%;
    --secondary-foreground: 40 15% 85%;

    --muted: 20 8% 15%;
    --muted-foreground: 40 10% 55%;

    --border: 20 8% 20%;
    --border-subtle: 20 6% 15%;
    --input: 20 8% 18%;
  }

  /* ═══════════════════════════════════════════════════════════════════════
     BASE STYLES
     ═══════════════════════════════════════════════════════════════════════ */

  html {
    font-family: var(--font-sans);
    font-size: 16px;
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: 'kern' 1, 'liga' 1;
  }

  /* Editorial headline hierarchy */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-serif);
    font-weight: 500;
    letter-spacing: -0.01em;
    line-height: 1.2;
  }

  h1 { font-size: var(--text-3xl); }
  h2 { font-size: var(--text-2xl); }
  h3 { font-size: var(--text-xl); }
  h4 { font-size: var(--text-lg); }

  /* Code and data elements */
  code, pre, kbd, samp {
    font-family: var(--font-mono);
    font-size: 0.875em;
  }

  /* IRI/URI styling - dense monospace */
  .iri, [data-iri] {
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    color: hsl(var(--muted-foreground));
    word-break: break-all;
  }

  /* ═══════════════════════════════════════════════════════════════════════
     SCROLLBAR - Minimal, unobtrusive
     ═══════════════════════════════════════════════════════════════════════ */

  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
    border-radius: 3px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground) / 0.3);
  }

  /* Hide scrollbar until hover (container must have overflow) */
  .scroll-subtle {
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
  }

  .scroll-subtle:hover {
    scrollbar-color: hsl(var(--border)) transparent;
  }

  /* ═══════════════════════════════════════════════════════════════════════
     SELECTION
     ═══════════════════════════════════════════════════════════════════════ */

  ::selection {
    background: hsl(var(--primary) / 0.15);
    color: inherit;
  }
}

@layer components {
  /* ═══════════════════════════════════════════════════════════════════════
     LAYOUT PRIMITIVES
     ═══════════════════════════════════════════════════════════════════════ */

  /* Three-pane layout container */
  .layout-three-pane {
    display: grid;
    grid-template-columns: var(--sidebar-width) 1fr auto;
    min-height: 100vh;
  }

  /* Sidebar panel */
  .sidebar {
    border-right: 1px solid hsl(var(--border));
    background: hsl(var(--background-subtle));
    width: var(--sidebar-width);
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .sidebar-collapsed {
    width: var(--sidebar-collapsed);
  }

  /* Content pane */
  .content-pane {
    @apply overflow-auto;
    min-width: 0;
  }

  /* Inspector panel */
  .inspector-pane {
    border-left: 1px solid hsl(var(--border));
    background: hsl(var(--background));
    width: 320px;
    overflow: auto;
  }

  /* ═══════════════════════════════════════════════════════════════════════
     DATA DENSITY UTILITIES
     ═══════════════════════════════════════════════════════════════════════ */

  /* Dense list items */
  .list-dense > * {
    @apply py-1 px-2;
  }

  /* Compact table cells */
  .table-dense td,
  .table-dense th {
    @apply py-1.5 px-2 text-sm;
  }

  /* Data row with hover */
  .data-row {
    @apply transition-colors duration-75;
  }

  .data-row:hover {
    @apply bg-muted/50;
  }

  .data-row.selected {
    @apply bg-primary/10;
  }

  /* ═══════════════════════════════════════════════════════════════════════
     HIERARCHY VISUALIZATION
     ═══════════════════════════════════════════════════════════════════════ */

  /* Tree node */
  .tree-node {
    @apply relative pl-4;
  }

  .tree-node::before {
    content: '';
    @apply absolute left-1.5 top-0 bottom-0 w-px bg-border;
  }

  .tree-node:last-child::before {
    @apply h-3;
  }

  .tree-node::after {
    content: '';
    @apply absolute left-1.5 top-3 w-2 h-px bg-border;
  }

  /* Namespace badge */
  .namespace-badge {
    @apply inline-flex items-center gap-1 px-1.5 py-0.5 text-xs font-mono rounded;
    @apply bg-secondary text-secondary-foreground;
  }

  /* Class type indicator */
  .class-indicator {
    @apply inline-block w-2 h-2 rounded-full mr-1.5;
  }

  .class-indicator.owl-class { @apply bg-blue-500; }
  .class-indicator.rdfs-class { @apply bg-emerald-500; }
  .class-indicator.property { @apply bg-amber-500; }
  .class-indicator.individual { @apply bg-purple-500; }

  /* ═══════════════════════════════════════════════════════════════════════
     TRIPLE/CLAIM VISUALIZATION
     ═══════════════════════════════════════════════════════════════════════ */

  /* Triple row */
  .triple-row {
    @apply grid gap-2 py-2 px-3 text-sm border-b border-border-subtle;
    grid-template-columns: 1fr auto 1.5fr auto;
    align-items: baseline;
  }

  .triple-subject {
    @apply font-medium text-foreground;
  }

  .triple-predicate {
    @apply font-mono text-xs text-muted-foreground;
  }

  .triple-object {
    @apply text-foreground;
  }

  /* Confidence indicator */
  .confidence-bar {
    @apply h-1 rounded-full bg-muted overflow-hidden;
    width: 32px;
  }

  .confidence-fill {
    @apply h-full rounded-full transition-all;
  }

  .confidence-high { @apply bg-emerald-500; }
  .confidence-medium { @apply bg-amber-500; }
  .confidence-low { @apply bg-red-500; }

  /* Evidence highlight in text */
  .evidence-highlight {
    @apply bg-primary/10 border-b-2 border-primary/30;
    transition: background-color 0.15s ease;
  }

  .evidence-highlight:hover {
    @apply bg-primary/20;
  }

  /* ═══════════════════════════════════════════════════════════════════════
     NAVIGATION
     ═══════════════════════════════════════════════════════════════════════ */

  /* Nav section */
  .nav-section {
    @apply py-2;
  }

  .nav-section-title {
    @apply px-3 py-1.5 text-xs font-medium uppercase tracking-wider text-muted-foreground;
  }

  /* Nav item */
  .nav-item {
    @apply flex items-center gap-2 px-3 py-1.5 text-sm text-foreground/80;
    @apply hover:bg-muted/50 hover:text-foreground;
    @apply transition-colors duration-75;
  }

  .nav-item.active {
    @apply bg-primary/10 text-primary border-r-2 border-primary;
  }

  .nav-item-icon {
    @apply w-4 h-4 text-muted-foreground;
  }

  .nav-item.active .nav-item-icon {
    @apply text-primary;
  }

  /* ═══════════════════════════════════════════════════════════════════════
     FOCUS & INTERACTION STATES
     ═══════════════════════════════════════════════════════════════════════ */

  input:focus,
  textarea:focus,
  button:focus-visible,
  [tabindex]:focus-visible {
    @apply outline-none ring-2 ring-primary/30 ring-offset-1 ring-offset-background;
  }

  /* Keyboard navigation hint */
  .kbd {
    @apply inline-flex items-center justify-center px-1.5 py-0.5;
    @apply text-xs font-mono text-muted-foreground;
    @apply bg-muted border border-border rounded;
    min-width: 1.25rem;
  }
}

@layer utilities {
  /* Editorial text utilities */
  .font-serif { font-family: var(--font-serif); }
  .font-sans { font-family: var(--font-sans); }
  .font-mono { font-family: var(--font-mono); }

  /* Spacing utilities matching our scale */
  .gap-tight { gap: var(--space-1); }
  .gap-normal { gap: var(--space-2); }
  .gap-relaxed { gap: var(--space-3); }

  /* Text density */
  .leading-dense { line-height: 1.3; }
  .leading-tight { line-height: 1.4; }

  /* Subtle background for alternating rows */
  .bg-stripe:nth-child(even) {
    @apply bg-muted/30;
  }

  /* Truncate with fade */
  .truncate-fade {
    @apply relative overflow-hidden;
    mask-image: linear-gradient(to right, black 85%, transparent);
    -webkit-mask-image: linear-gradient(to right, black 85%, transparent);
  }
}
